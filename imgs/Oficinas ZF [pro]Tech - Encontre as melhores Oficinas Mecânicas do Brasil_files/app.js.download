!function e(t,n,a){function o(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return o(n||e)},d,d.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){this.form=$("form.md"),this.setLabelEffect(this.form)};a.prototype.setLabelEffect=function(e){var t;t=this,e.on("focus change keydown click",".form-control",function(e){return $(this).parents(".form-group").find("label").addClass("active")}),e.on("blur change",".form-control",function(e){var t;return t=$(this),setTimeout(function(){var e;if((null===(e=t.val())||0===e.length)&&!t.parents(".form-group").find("label").hasClass("fixed-active"))return t.parents(".form-group").find("label").removeClass("active")},100)}),e.find(".fileinput").on("change","input[type=file]",function(e){var t;if((t=$(this).val())&&t.length>0)return $(this).parents(".form-group").find(".form-control").val($(this).val()),$(this).parents(".form-group").find(".form-control").trigger("change")}),setTimeout(function(){return t.refreshFields(e)},100)},a.prototype.refreshFields=function(e){e.find(".form-control").each(function(e){var t,n;if(t=$(this),(n=t.val())&&n.length>0)return t.parents(".form-group").find("label").addClass("active")})},n.default=a},{}],2:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.body=$("body"),this.open_sidebar=$(".open-sidebar"),this.setActions()}return o(e,[{key:"setActions",value:function(){var e=this;this.open_sidebar.on("click",function(t){t.preventDefault(),e.body.toggleClass("opened-sidebar")})}}]),e}();n.default=r},{}],3:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.SelectLoad=n.SwitchPaper=n.Utils=n.Header=n.Form=void 0;var o=e("./form"),r=a(o),i=e("./header"),s=a(i),c=e("./utils"),l=a(c),d=e("./switch_paper"),u=a(d),p=e("./select_load"),h=a(p);n.Form=r.default,n.Header=s.default,n.Utils=l.default,n.SwitchPaper=u.default,n.SelectLoad=h.default},{"./form":1,"./header":2,"./select_load":4,"./switch_paper":5,"./utils":6}],4:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=e("mustache"),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=e("./"),c=function(){function e(){a(this,e),this.select_class=".select-load",this.setActions()}return o(e,[{key:"setActions",value:function(){var e=this;$("body").on("change",this.select_class,function(t){$(this).val()&&e.loadData({path:$(this).data("path"),data:{id:$(this).val()},target:$(this).data("target"),template:$(this).data("template")})})}},{key:"loadData",value:function(e){var t=this;$(e.target).html('<option value="">Carregando...</option>'),$.ajax({url:s.Utils.url(e.path),data:e.data,dataType:"json",type:"post",success:function(n){if(n.success){var a=e.template||'<option value="{{id}}">{{name}}</option>',o=$(e.target);if(o.length&&o[0].selectize){var r=o[0].selectize;r.clear(),r.clearOptions(),r.load(function(e){e(n.data.map(function(e){return void 0!==e.name?{text:e.name,value:e.id}:e.car_year?{text:e.car_year.name,value:e.id}:void 0}))}),r.refreshOptions()}else $(e.target).html(t.getOptions(n.data,e.target,a));e.callback&&e.callback()}else s.Utils.onError(n)},error:s.Utils.onError})}},{key:"getOptions",value:function(e,t,n){return['<option value="">Selecione</option>'].concat(e.map(function(e){return i.default.render(n,e)}))}},{key:"preload",value:function(e){var t=this;e.data("value")&&e.find("option").length>0&&this.loadData({path:e.data("path"),data:{id:e.val()},target:e.data("target"),template:e.data("template"),callback:function(){var n=$(e.data("target"));n.data("value")&&(n.val(n.data("value")),n.data("target")&&t.preload(n))}})}}]),e}();n.default=c},{"./":3,mustache:57}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./");n.default={init:function(){$("body").on("click",".switch-paper",function(e){var t=arguments,n=$(this);n.hasClass("sending")||(n.addClass("sending"),n.data("url")&&$.ajax({url:n.data("url"),type:"POST",dataType:"json",success:function(e){e.success&&n.toggleClass("on"),n.removeClass("sending")},error:function(){n.removeClass("sending"),a.Utils.onError(t)}}))})}}},{"./":3}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={url:function(e){var t;return t=$("body").data("base-url"),e&&(t+=e),t},route:function(e,t){var n,a,o,r;for(r=[],n=0,a=e.length;n<a;n++)o=e[n],$("body").hasClass(o)?r.push(t()):r.push(void 0);return r},showMessage:function(e,t,n){return"notice"===t?$.growl.notice({title:n||"Sucesso",message:e,duration:5e3,size:"large"}):$.growl.error({title:n||"Erro",message:e,duration:1e4,size:"large"})},onError:function(e){e.responseJSON&&e.responseJSON.message?alert(e.responseJSON.message):e.message?alert(e.message):(console.log("------------"),console.log("ERROR"),console.log(e),console.log("------------"))},selectAllCheckbox:function(){$(".select-all").on("change click",function(e){var t=$(this).closest("table"),n=$(this).prop("checked");t.find("tbody input[type=checkbox]").prop("checked",n)})}}},{}],7:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=e("./app/modules/helpers"),r=a(o),i=e("./app/modules/menu"),s=a(i),c=e("./app/modules/banner"),l=a(c),d=e("./app/modules/image-input"),u=a(d),p=e("./app/views/mobile-navigation"),h=a(p),m=e("./app/views/home"),f=a(m),v=e("./app/views/workshop"),g=a(v),_=e("./app/views/workshop/filters"),b=a(_),w=e("./app/views/workshop/newRegister"),y=a(w),k=e("./app/views/workshop/steps"),S=a(k),C=e("./app/views/workshop/register"),x=a(C),E=e("./app/views/program"),q=a(E),L=e("./app/views/how-it-works"),M=a(L),D=e("./app/views/scheduling"),I=a(D),F=e("./app/views/car"),A=a(F),T=e("./app/views/rating"),N=a(T),O=e("./app/modules/dynamic-form"),B=a(O),P=e("./app/modules/tabs"),j=a(P),V=e("./app/modules/state-city"),R=a(V),Y=e("./app/modules/images-group"),H=a(Y),z=e("./app/views/login"),U=a(z),J=e("./app/views/user"),Q=(a(J),e("./app/views/widget")),W=a(Q),K=e("./app/views/workshop-premium"),G=a(K),X=e("./app/views/workshopDashboard/new-client"),Z=a(X),ee=e("./app/views/workshopDashboard/edit-client"),te=a(ee),ne=e("./app/views/workshopDashboard/new-schedule"),ae=a(ne),oe=e("./app/views/workshopDashboard/edit-schedule"),re=a(oe),ie=e("./app/views/workshopDashboard/orders"),se=a(ie),ce=e("./app/views/workshopDashboard/clients"),le=a(ce);r.default.addParsleyValidations(),$(function(){l.default.init(),s.default.init(),j.default.init(),u.default.init(),h.default.init(),R.default.init(),H.default.init(),U.default.init(),B.default.init(),r.default.route("workshops-clients",le.default.init),r.default.route("workshops-orders",se.default.init),r.default.route("workshops-edit_schedule",re.default.init),r.default.route("workshops-new_schedule",ae.default.init),r.default.route("workshops-new_client",Z.default.init),r.default.route("workshops-edit_client",te.default.init),r.default.route("pages-index",f.default.init.bind(f.default)),r.default.route("workshops",g.default.init.bind(g.default)),r.default.route("workshops-search",b.default.init),r.default.route("workshops",S.default.init),r.default.route("schedulings",I.default.init.bind(I.default)),r.default.route("pages-user_profile_edit",A.default.init.bind(A.default)),r.default.route("schedulings",A.default.init.bind(A.default)),r.default.route("pages-register_workshop",x.default.init.bind(x.default)),r.default.route("pages-new_register_workshop",y.default.init.bind(y.default)),r.default.route("pages-workshop_profile_edit",y.default.init.bind(y.default)),r.default.route("pages-program",q.default.init.bind(q.default)),r.default.route("pages-how_it_works",M.default.init.bind(M.default)),r.default.route("ratings",N.default.init.bind(N.default)),r.default.route("widgets",W.default.init.bind(W.default)),r.default.route("workshop-premium",G.default.init.bind(G.default)),r.default.route("workshop-premium",g.default.init.bind(g.default)),$("select.selectize").selectize(),$('[type="checkbox"]').on("change",function(){$('[name="'+this.name+'"]').prop("checked",this.checked)}),$("[data-replace-history]").on("click",function(e){e.preventDefault(),window.location.replace(e.target.href||"/")}),$(".search-by-address").on("click",function(e){e.preventDefault(),$("#search-workshop-modal").modal({modalClass:"modal",escapeClose:!0,clickClose:!0})}),$(".find-closest").on("click",function(e){e.preventDefault();var t=$(this).attr("href");"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){t=t+"?lat="+e.coords.latitude+"&lng="+e.coords.longitude,location.href=t}):location.href=t}),$(".mask-cnpj").inputmask("99.999.999/9999-99"),$(".mask-cellphone-ddd").inputmask("(99) 9999-9999[9]"),$(".mask-zipcode").inputmask("99999-999"),"0"===localStorage.userLoggedIn&&(localStorage.removeItem("ratingModalAlreadyShown"),localStorage.removeItem("ozfptrole")),$(".footer-section--go-states select").on("change",function(e){window.location.href=$(this).val()}),$(".go-sign-in-button--open").on("click",function(e){e.preventDefault(),$(".go-sign-in-form").addClass("opened"),$(".go-sign-in-modal").addClass("opened")}),$(".go-sign-in-button--close").on("click",function(e){e.preventDefault(),$(".go-sign-in-form").removeClass("opened"),$(".go-sign-in-modal").removeClass("opened")}),$(".go-sign-in-modal").on("click",function(e){e.preventDefault(),$(".go-sign-in-form").removeClass("opened"),$(".go-sign-in-modal").removeClass("opened")})})},{"./app/modules/banner":8,"./app/modules/dynamic-form":9,"./app/modules/helpers":10,"./app/modules/image-input":11,"./app/modules/images-group":12,"./app/modules/menu":13,"./app/modules/state-city":15,"./app/modules/tabs":16,"./app/views/car":19,"./app/views/home":24,"./app/views/how-it-works":25,"./app/views/login":26,"./app/views/mobile-navigation":27,"./app/views/program":29,"./app/views/rating":30,"./app/views/scheduling":32,"./app/views/user":36,"./app/views/widget":37,"./app/views/workshop":40,"./app/views/workshop-premium":38,"./app/views/workshop/filters":44,"./app/views/workshop/newRegister":45,"./app/views/workshop/register":47,"./app/views/workshop/steps":50,"./app/views/workshopDashboard/clients":51,"./app/views/workshopDashboard/edit-client":52,"./app/views/workshopDashboard/edit-schedule":53,"./app/views/workshopDashboard/new-client":54,"./app/views/workshopDashboard/new-schedule":55,"./app/views/workshopDashboard/orders":56}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{$banners:$(".go-banner")},api:{track:"/banner-trackings/add"},init:function(){this.hookEvents()},hookEvents:function(){this.el.$banners.on("click",this.trackEvent.bind(this))},trackEvent:function(e){this.sendRequest(this.getBannerId(e))},getBannerId:function(e){return $(e.currentTarget).data("bannerId")},sendRequest:function(e,t){console.log("bannerId",e);var n=this;t=t||function(){},$.ajax({url:this.api.track,method:"POST",dataType:"json",data:{banner_id:e},success:function(e){t.call(n,!0,e)},error:function(){t.call(n,!1)}})}}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./helpers"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={init:function(){$(".go-dynamic-form.--apply").each(this.applyComponent.bind(this))},applyComponent:function(e,t){var n=$(t),a=n.find(".back-step-button"),o=n.find(".next-step-button"),r=n.find('[class^="step"]');this.addDots(n,r),n.hasClass("--no-ajax")||this.addNextStepAndSubmitHandler(n,o),n.hasClass("--no-ajax")||this.addBackStep(n,a),this.applyMasks(n),n.hasClass("--no-ajax")||this.applySubmit(n),this.applyTogglers(n)},applyTogglers:function(e){e.find("data-toggler").each(function(e,t){var n=$(t),a='[data-toggler-target="'+n.data("toggler")+'"]',o=$(a);o.length||console.warn("Toggler target not found.",a),n.on("click",function(){o.hasClass("show")?(o.removeClass("show"),o.addClass("hide")):(o.removeClass("hide"),o.addClass("show"))})})},isLastStep:function(e){var t=e.find('[class^="step"]').length;return parseInt(this.getStepNumber(e.find('[class^="step"].active')))===t},getActiveNextStepButton:function(e){return e.find('[class^="step"].active .next-step-button')[0]},applySubmit:function(e,t){var n=this,a=$(e.find("form"));if(!a.length)return console.warn("Form not found in dynamic form. Add the tag <form> inside .dynamic-form.--apply");a.on("submit",function(t){function o(t){a.data("sending",!1);var n=void 0;if(n=t.hasOwnProperty("data")?t.data:t,n.hasOwnProperty("errors")){var o=[];Object.keys(n.errors).forEach(function(e){var t=n.errors[e],r="",i=Object.keys(t);i.forEach(function(e,n){var a=t[e],o="";n!==i.length-1&&(o=";"),r+=a+o}),o.push(r);var s=$(a.find(".go-input-group."+e+" .feedback, .go-images-group."+e+" .feedback"));s.length&&(s.html(r),s.addClass("active"))});if($(".go-form--submit-feedback").length){$(".go-form--submit-feedback").addClass("active");var r=$("<div>"),i=$("<ul>");for(var s in o)i.append("<li>"+o[s]+"</li>");r.append("<p>Erro(s) encontrado(s):</p>"),r.append(i),$(".go-form--submit-feedback").html(r)}}else if(e.data("on-success-action")){var c=e.data("on-success-action");if(-1==c.indexOf(":"))console.warn('on-success-action must have an action and a param (on-success-action="action:param")');else{c=c.split(":");var l=c[0],d=c[1];"redirect"==l&&(window.location=d)}}else{var u=$(".go-page-form--success-title"),p=$(".go-page-form--success-subtitle");e.addClass("success"),u.length&&(u.addClass(e.data("success-title-class")),u.html(e.data("success-title"))),p.length&&(p.addClass(e.data("success-subtitle-class")),p.html(e.data("success-subtitle")))}a.onAjaxSubmit&&a.onAjaxSubmit(t)}if(t.preventDefault(),n.hideFeedbackTags(e),!n.isLastStep(e))return n.jumpToNextStep(e);if(a.data("sending"))return!1;a.data("sending",!0);for(var r=new FormData,i=a.find(":input:not([disabled])"),s=0,c=i.length;s<c;s++){var l=i[s];if(!l.attributes.disabled)if(l.files)r.append(l.name,l.files[0]);else if("checkbox"===l.type||"radio"===l.type)"on"==l.value?r.append(l.name,l.checked):l.checked&&r.append(l.name,l.value);else{var d;if(l.dataset.type){var u,p=l.dataset.type;"int"==p&&(u=l.value.match(/([\d]+)/))&&u.length&&(d=parseInt(u[1]))}else d=l.value;r.append(l.name,d)}}var h=a.attr("method");h=h?h.toLowerCase():"POST";var m=a.attr("action");m||(m="."),$.ajax({url:m,type:h,data:r,processData:!1,contentType:!1,success:o,error:function(){o({data:null,success:!1,errors:{internal:{_invalid:"Erro interno no servidor"}}})}})})},jsonData:function(e){var t=e.serializeArray(),n={};return t.forEach(function(e){n[e.name]=e.value}),n},hideFeedbackTags:function(e){e.find(".go-input-group .feedback").each(function(e,t){$(t).removeClass("active")}),e.find(".go-form--submit-feedback").each(function(e,t){$(t).removeClass("active")})},applyMasks:function(e){var t={date:"^\\d{2}\\/\\d{2}\\/\\d{4}$",url:"(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?"},n={phone:function(e,t){if(e.target.reportValidity()){var n=/[0]{9}|[1]{9}|[2]{9}|[3]{9}|[4]{9}|[5]{9}|[6]{9}|[7]{9}|[8]{9}|[9]{9}/.test(e.target.value&&e.target.value.replace(" ",""));e.target.setCustomValidity(n?"Telefone inválido.":""),t(!n)}else t(!1)},atLeastCheckbox:function(e){return function(t,n){if(t.target.dataset.id){var a=document.querySelectorAll('[data-id="'+t.target.dataset.id+'"]'),o=0,r=t.target.dataset.feedback,i=0;r||console.warn("At-least-"+e+"-checkbox mask requires dataset feedback element selector");var s=document.querySelector(r);for(i=0;i<a.length;i++)a[i].checked&&o++;var c=o>=e;for(i=0;i<a.length;i++)a[i].setCustomValidity(c?"":"Este campo é obrigatório");c?s.classList.remove("active"):(s.classList.add("active"),""===s.innerText&&(s.innerText="Este campo é obrigatório")),n(c)}else console.warn("At-least-one-checkbox mask requires dataset ID"),n(!1)}}};[['[data-mask="dateOld"]',{pattern:t.date,mask:"99/99/9999",showMaskOnHover:!1,validate:function(e,t){if(e.target.reportValidity()){var n=e.target.value.match(/(\d{2})\/(\d{2})\/(\d{4})/),a=new Date;if(n=new Date(n[2]+"/"+n[1]+"/"+n[3]),"Invalid Date"===n.toString())return e.target.setCustomValidity("Data inválida."),void t(!1);var o=n.getTime()>a.getTime();e.target.setCustomValidity(o?"Essa data não pode acontecer no futuro.":""),t(!o)}else t(!1)}}],['[data-mask="date"]',{pattern:t.date,mask:"99/99/9999",showMaskOnHover:!1,validate:function(e,t){if(e.target.reportValidity()){var n=e.target.value.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!n||n.length<4)return t(!1),e.target.setCustomValidity("Data inválida.");n=new Date(n[3]+"/"+n[2]+"/"+n[1]);var a="Invalid Date"===n.toString();e.target.setCustomValidity(a?"Data inválida.":""),t(!a)}else t(!1)}}],['[data-mask="ddd"]',{pattern:"^(\\(\\d{2}\\))$",mask:"(99)",showMaskOnHover:!1}],['[data-mask="cellphone"]',{pattern:"^(\\d{4}\\s?\\d{4}\\d?)$",mask:"9999 9999[9]",showMaskOnHover:!1,validate:n.phone}],['[data-mask="phone"]',{pattern:"^(\\d{4}\\s?\\d{4})$",mask:"9999 9999",showMaskOnHover:!1,validate:n.phone}],['[data-mask="fax"]',{pattern:"^(\\d{4}\\s?\\d{4})$",mask:"9999 9999",showMaskOnHover:!1}],['[data-mask="cpf"]',{pattern:"(^\\d{3}.\\d{3}.\\d{3}-\\d{2})|(^\\d{3}\\d{3}\\d{3}\\d{2})$",mask:"999.999.999-99",showMaskOnHover:!1,validate:function(e,t){if(e.target.reportValidity()){if(!e.target.required&&!e.target.value)return t(!0);var n,a,o=e.target.value.replace(/[\.\-]+/g,"");n=0;var r=0;if("00000000000"==o)return e.target.setCustomValidity("CPF inválido."),t(!1);for(r=1;r<=9;r++)n+=parseInt(o.substring(r-1,r))*(11-r);if(a=10*n%11,10!=a&&11!=a||(a=0),a!=parseInt(o.substring(9,10)))return e.target.setCustomValidity("CPF inválido."),t(!1);for(n=0,r=1;r<=10;r++)n+=parseInt(o.substring(r-1,r))*(12-r);return a=10*n%11,(10!=a&&11!=a||(a=0),a!=parseInt(o.substring(10,11)))?(e.target.setCustomValidity("CPF inválido."),t(!1)):(e.target.setCustomValidity(""),t(!0))}return t(!1)}}],['[data-mask="zipcode"]',{pattern:"^(\\d{5}-\\d{3})$",mask:"99999-999",showMaskOnHover:!1}],['[data-mask="hourMinute"]',{pattern:"^\\d{2}:\\d{2}$",mask:"99:99",showMaskOnHover:!1,validate:function(e,t){if(e.target.reportValidity()){var n=e.target.value.match(/(\d{2}):(\d{2})/);n=new Date("01/01/1900 "+n[0]+":"+n[1]);var a="Invalid Date"===n.toString();e.target.setCustomValidity(a?"Horário inválido. (00:00 até 23:59)":""),t(!a)}else t(!1)}}],['[data-mask="url"]',{pattern:t.url}],['[data-mask="cnpj"]',{pattern:"\\d{2}.\\d{3}.\\d{3}\\/\\d{4}-\\d{2}",mask:"99.999.999/9999-99",showMaskOnHover:!1,validate:function(e,t){if(e.target.reportValidity()){var n=e.target.value,a=n.replace(/[^\d]+/g,""),o=function(){e.target.setCustomValidity("CNPJ inválido."),t(!1)};if(14!=a.length||a.match(/0{14}|1{14}|2{14}|3{14}|4{14}|5{14}|6{14}|7{14}|8{14}|9{14}/g))return o();for(var r=a.length-2,i=a.substring(0,r),s=a.substring(r),c=0,l=r-7,d=r;d>=1;d--)c+=i.charAt(r-d)*l--,l<2&&(l=9);if((c%11<2?0:11-c%11)!=s.charAt(0))return o();for(r+=1,i=a.substring(0,r),c=0,l=r-7,d=r;d>=1;d--)c+=i.charAt(r-d)*l--,l<2&&(l=9);if((c%11<2?0:11-c%11)!=s.charAt(1))return o();$.post("/workshops/document-exists",{document:n}).then(function(n){n.result&&n.result.success?(e.target.setCustomValidity(n.result.exists?"Oficina já cadastrada.":""),t(!n.result.exists)):(console.error("Users controller error"),e.target.setCustomValidity(""),t(!0))})}else t(!1)}}],['[data-mask="license-plate"]',{pattern:"[A-Z]{3}-[0-9]{4}",mask:"AAA-9999"}],['[data-mask="password-check"]',{validate:function(e,t){if(e.target.reportValidity()){var n=e.target.value,a=document.querySelector("[data-password-check]");if(!a)return console.warn('Password check mask needs a input[name="password"]'),t(!0);if(a.reportValidity()){var o=n===a.value;e.target.setCustomValidity(o?"":"As senhas estão diferentes."),t(o)}else t(!1)}else t(!1)}}],['[type="email"]',{validate:function(e,t){if(e.target.value&&e.target.value.length>0){var n=e.target.value,a=e.target.dataset.emailFilter;if(new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)){if(e.target.dataset.editingUserEmail&&e.target.dataset.editingUserEmail===n)return t(!0);$.post("/users/email-exists",{email:n,filter:a}).then(function(n){n.result&&n.result.success?(e.target.setCustomValidity(n.result.exists?"E-mail já cadastrado.":""),t(!n.result.exists)):(console.error("Users controller error"),t(!0))})}else e.target.setCustomValidity("E-mail inválido."),t(!1)}else e.target.reportValidity(),t(!1)}}],['[data-mask="at-least-one-checkbox"]',{validate:n.atLeastCheckbox(1)}],['[data-mask="at-least-five-checkbox"]',{validate:n.atLeastCheckbox(5)}],['[data-mask="at-least-one-bool-radio-check"]',{validate:function(e,t){if(e.target.dataset.id){var n,a=document.querySelectorAll('[data-id="'+e.target.dataset.id+'"]'),o=e.target.dataset.feedback,r=0;o||console.warn("At-least-one-bool-radio-check mask requires dataset feedback element selector");var i=document.querySelector(o),s=0;for(r=0;r<a.length;r++)!a[r].checked||"1"!==a[r].value&&"true"!==a[r].value&&!0!==a[r].value||s++;for(n=s>0,r=0;r<a.length;r++)a[r].setCustomValidity(n?"":"Selecione ao menos um item.");n?i.classList.remove("active"):(i.classList.add("active"),""===i.innerText&&(i.innerText="Selecione ao menos um item.")),t(n)}else console.warn("At-least-one-bool-radio-check mask requires dataset ID"),t(!1)}}]].forEach(function(t){var n=t[0],a=t[1];if(n=e.find(n+":not([disabled])"),n.length){var o=$(n);a.validate&&(o.on("validate",a.validate),o.on("keyup",function(e){e.target.setCustomValidity("")})),o.attr("pattern",a.pattern),o.inputmask(a)}}),$("a[data-method=delete]").on("click",function(e){e.preventDefault();var t=$(this).data("message")||"Tem certeza?";if(confirm(t)){var n=$("<form>",{style:"position:fixed;left:-9999px;top:-9999px;",action:$(this).attr("href"),method:"POST"});n.append('<input type="hidden" name="_method" value="DELETE" />'),n.append('<input type="submit" tabindex="-1" />'),$("body").append(n),n.submit()}});var a=null;$("[data-zipcode]").on("keyup",function(e){var t=$(this),n=t.val(),o=t.parents(".cep-wrapper"),r=void 0,i=void 0;/[0-9]{5}-[0-9]{3}/.test(n)&&(a=n,$.getJSON("https://viacep.com.br/ws/"+n+"/json/",function(e){if(e.cep){o.length?(o.find(".address").val(e.logradouro),o.find(".neighborhood").val(e.bairro),r=o.find("select.city_id"),i=o.find("select.state_id")):($(".address").val(e.logradouro),$(".neighborhood").val(e.bairro),r=$("select.city_id"),i=$("select.state_id"));var t=null;if(r.length&&(t=r[0].selectize)&&r[0].selectize.on("load",function(){var t=r[0].selectize.search(e.localidade).items;t.length&&(t=t[0].id,r[0].selectize.setValue(t),r[0].selectize.close())}),i.length&&(t=i[0].selectize)){var n=t.search(e.uf).items;n.length&&(n=n[0].id,t.setValue(n))}o.length?o.find(".address_number").focus():$(".address_number").focus()}}))})},paintDot:function(e,t){if(e.find(".dot").length){e.find(".dot.active").removeClass("active");e.find(".dot").eq(t).addClass("active")}},addDots:function(e,t){var n=$(e.find(".current-step--dots"));if(n.length){for(var a=$('<div class="current-step--dots"/>'),o=null,r=0;r<t.length;r++)o=$('<li class="dot"></li>'),o.on("click",this.goToStepHandlerClosure(e,r)),0===r?(o.addClass("active"),a.append(o)):a.append(o);n.replaceWith(a)}},goToStepHandlerClosure:function(e,t){var n=this;return function(){n.goToStep(e,t)}},goToStep:function(e,t){var n=$(e.find(".step-"+(t+1)));($(e.find(".step-"+t)).attr("valid")||n.attr("valid"))&&(this.paintDot(e,t),e.find('[class^="step"].active').removeClass("active"),n.addClass("active"),this.updateHeader(e,n))},updateHeader:function(e,t){var n=this.getStepNumber(t),a=$(e.find(".current-step")),o=$(e.find(".current-step--text")),r=$(e.find(".current-step--dots .dot")).length;a.text("Passo "+n+" de "+r+":"),o.text(t.data("title"))},getStepNumber:function(e){var t=e.prop("class");return t&&(t=t.match(/step-(\d+)/)),t&&t.length>1?t[1]:(console.warn("Current step not found. Set class to 'step-{NUMBER}'"),null)},jumpToNextStep:function(e){var t=this.getActiveNextStepButton(e);return this.jumpToNextStepClosure(e,t,this)({currentTarget:t})},jumpToNextStepClosure:function(e,t,n){var a=this.setLoader,r=this.getTriggerValidations(e);return function(i){var s=$(t);if("true"!==t.dataset.loading){var c=$(i.currentTarget),l=c.parents('[class^="step"]'),d=l.find(":input:not([disabled])"),u=[];d.map(function(e,t){u.push(t)});var p=u.shift();a(t,{loading:!0,backup:!0}),r(u,p,function(r){r&&(s.data("step-url")?$.ajax({url:s.data("step-url"),data:n.getFormData(e),type:"post",processData:!1,contentType:!1,success:function(t){t.success?(o.default.scrollTo(e.offset().top-60),l.attr("valid","valid"),n.nextStep(e,l)):n.addErrorsToInputs(e,t.errors)},error:function(e){console.log(e),a(t,{loading:!1})}}):(o.default.scrollTo(e.offset().top-60),l.attr("valid","valid"),n.nextStep(e,l))),a(t,{loading:!1})})}}.bind(n)},setLoader:function(e,t){var n=$(e);e.dataset&&(e.dataset.loading=t.loading),t.backup&&e.dataset&&(e.dataset.backup=n.html()),n.html(t.loading?'<div class="spinner-box"><div class="spinner "></div></div>':e.dataset?e.dataset.backup:"")},getTriggerValidations:function(e){function t(e,t){var n=$._data(e.get(0),"events");e.length&&n&&n.validate?e.trigger("validate",[t]):t(e.get(0).reportValidity())}return function e(n,a,o){t($(a),function(t){return t?n.length>0?(a=n.shift(),void e(n,a,o)):o(!0):a.validity.valid?(console.warn("Input ",a," specific validation callback didn't set as invalid."),o(!1)):(a.reportValidity(),o(!1))})}},addBackStep:function(e,t){var n=this;t.each(function(t,a){var o=$(a),r=o.data("step");o.on("click",n.backStep(e,r))})},backStep:function(e,t){var n=this;return function(){n.goToStep(e,t),o.default.scrollTo(e.offset().top-60)}},addNextStepAndSubmitHandler:function(e,t){var n=this,a=e.find('[type="submit"]'),o=this.setLoader,r=this.getTriggerValidations(e);t.each(function(t,a){var o=$(a),r=n;o.on("click",n.jumpToNextStepClosure(e,a,r))}),a.on("click",function(t){if(!this.isLastStep(e))return this.jumpToNextStep(e);if("true"!==a.data("loading")){var n=$(t.currentTarget),i=n.parents('[class^="step"]'),s=i.find(":input:not([disabled])"),c=[];s.map(function(e,t){c.push(t)});var l=c.shift();o(a[0],{loading:!0,backup:!0}),r(c,l,function(e){e?i.attr("valid","valid"):t.preventDefault(),o(a[0],{loading:!1})})}}.bind(this))},nextStep:function(e,t){var n=this.getStepNumber(t);t.removeClass("active"),n++,this.paintDot(e,n-1);var a=e.find(".step-"+n),o=$(a);if(o)o.addClass("active"),this.updateHeader(e,o);else{var r=e.find(".step-1"),i=$(r);i.addClass("active"),this.updateHeader(e,i)}},getFormData:function(e){for(var t=new FormData,n=e.find(":input:not([disabled])"),a=0,o=n.length;a<o;a++){var r=n[a];if(!r.attributes.disabled)if(r.files)t.append(r.name,r.files[0]);else if("checkbox"===r.type||"radio"===r.type)"on"==r.value?t.append(r.name,r.checked):r.checked&&t.append(r.name,r.value);else{var i;if(r.dataset.type){var s,c=r.dataset.type;"int"==c&&(s=r.value.match(/([\d]+)/))&&s.length&&(i=parseInt(s[1]))}else i=r.value;t.append(r.name,i)}}return t},addErrorsToInputs:function(e,t){Object.keys(t).forEach(function(n){var a=t[n],o="",r=Object.keys(a);r.forEach(function(e,t){var n=a[e],i="";t!==r.length-1&&(i=";"),o+=n+i});var i=$(e.find(".go-input-group."+n+" .feedback, .go-images-group."+n+" .feedback"));i.length&&(i.html(o),i.addClass("active"))})}}},{"./helpers":10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./validations"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={getWidth:function(){return self.innerWidth?self.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0},getHeight:function(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0},request:function(e,t,n,a){var o;o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&a(o.status,o.responseText)},o.open(e,t,!0),"POST"==e&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(JSON.stringify(n))},changeMenuColor:function(e){for(var t=[document.querySelector(".hc-open-nav .icon-menu"),document.querySelector(".hc-open-nav .icon-close")],n=0;n<t.length;n++)t[n]&&("black"==e?t[n].classList.remove("icon-white"):t[n].classList.remove("icon-black"),t[n]&&t[n].classList.add("icon-"+e))},scrollTo:function(e){$("html,body").animate({scrollTop:e},800)},route:function(e,t){if("string"==typeof e){if($("body").hasClass(e))return t()}else if(Array.isArray(e)){var n=e.filter(function(e){return $("body").hasClass(e)}).length>0;n&&t()}},addParsleyValidations:function(){window.Parsley&&(window.Parsley.addValidator("birthday",{validateString:function(e,t){return o.default.birthday(e)},messages:{"pt-br":"Data de aniversário inválida"}}),window.Parsley.addValidator("cpf",{validateString:function(e,t){return o.default.cpf(e)},messages:{"pt-br":"CPF inválido"}}),window.Parsley.addValidator("licensePlate",{validateString:function(e,t){return o.default.license_plate(e)},messages:{"pt-br":"Placa inválida"}}),window.Parsley.addValidator("phone",{validateString:function(e,t){return o.default.phone(e)},messages:{"pt-br":"Telefone inválido"}}),window.Parsley.addValidator("cellphone",{validateString:function(e,t){return o.default.cellphone(e)},messages:{"pt-br":"Celular inválido"}}),window.Parsley.addAsyncValidator("email",function(e){var t,n=this.$element;n.value;try{t=JSON.parse(e.responseText)}catch(e){t={}}return!(t.result&&t.result.exists)},"/users/email-exists"))},url:function(e){var t;return t=$("body").data("base-url"),e&&(t+=e),t},onError:function(e){e.responseJSON&&e.responseJSON.message?alert(e.responseJSON.message):e.message?alert(e.message):(console.log("------------"),console.log("ERROR"),console.log(e),console.log("------------"))}}},{"./validations":18}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){$(".go-image-input").each(this.applyComponent.bind(this))},error:function(e){console.error(e)},loadImage:function(e,t){if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(e.files[0])}else"string"==typeof e&&t.attr("src",e)},sendImage:function(e,t){if(e.files&&e.files[0]){var n=e.files[0],a=new FormData;return a.append(e.name,n),new Promise(function(e,n){$.ajax({type:"POST",url:t,success:e,error:e,async:!0,data:a,cache:!1,contentType:!1,processData:!1})})}},setStatus:function(e,t){switch(e.removeClass("sending"),t){case"sending":e.addClass("sending")}},
applyComponent:function(e,t){var n=this,a=$(t),o=a.find(".go-image-input__target");if(!o.length)return this.error("Missing image input target. $('.go-image-input__target')");var r=a.find(".go-image-input__file-input");if(!r.length)return this.error("Missing image input file. $('.go-image-input__file-input')");r.on("change",function(){var e=a.data("action");e?(n.setStatus(a,"sending"),n.sendImage(r[0],e).then(function(e){e&&e.url?n.loadImage(e.url,o):n.loadImage(r[0],o),n.setStatus(a,"done")})):n.loadImage(r[0],o)})}}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){$(".go-images-group").each(this.applyComponent.bind(this))},applyComponent:function(e,t){var n=this,a=$(t),o=$(a.find(".go-images"));if(!o.length)return console.warn('Images container from images group component not found. [class="go-images"]');var r=$(a.find(".go-images-group--add-more")),i=$(a.find(".go-image")).length;if(0===i?this.addMoreImages(o,i):this.addBehaviour(a.find(".go-image")),!r.length)return console.warn('Add more button from images group component not found. [class="go-images-group--add-more"]');r.on("click",function(){var e=$(a.find(".go-image")).length;n.addMoreImages(o,e)})},addBehaviour:function(e){for(var t=0;t<e.length;t++)!function(){var n=e[t],a=$(n),o=$(a.find('[type="file"]')),r=$(a.find(".go-image--preview--shell")),i=$(a.find(".go-image--preview"));o.on("change",function(e){if(o[0].files&&o[0].files[0]){var t=new FileReader;t.onload=function(e){r.removeClass("--empty"),i.attr("src",e.target.result)},t.readAsDataURL(o[0].files[0])}})}()},addMoreImages:function(e,t){var n='\n    <div class="go-image">\n      <div class="go-image--preview--shell --empty"><img class="go-image--preview"/></div>\n      <label for="workshop_images['+t+'][image]" class="go-image-label">Carregar imagem</label>\n      <input id="workshop_images['+t+'][image]" data-index="'+t+'" type="file" name="workshop_images['+t+'][image]" id="workshop-images-'+t+'-image"/>\n      <a href="javascript:void(0)" class="go-button-orange go-image--remove-button">Remover</a>\n    </div>\n    ',a=$(n),o=$(a.find(".go-image--preview--shell")),r=$(a.find(".go-image--preview")),i=$(a.find('[type="file"]')),s=$(a.find(".go-image--remove-button"));i.on("change",function(e){if(i[0].files&&i[0].files[0]){var t=new FileReader;t.onload=function(e){o.removeClass("--empty"),r.attr("src",e.target.result)},t.readAsDataURL(i[0].files[0])}}),s.on("click",function(t){var n=$(e.find(".go-image")).length;if(!(n<=3)){if(t.target.previousElementSibling.dataset.index==n-1)t.target.parentNode.remove();else{var a=$(t.target.parentNode.parentNode);t.target.parentNode.remove(),a.find(".go-image").each(function(e,t){var n=$(t);n.find("label").attr("for","workshop_images["+e+"][image]"),n.find("input").attr("id","workshop_images["+e+"][image]"),n.find("input").attr("name","workshop_images["+e+"][image]")})}}}),e.append(a)},removeImage:function(){}}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{go_sign_in_form:$(".go-sign-in-form"),header:$(".header-section"),btn_change_home_to_client:$(".btn-change-home-to-client"),btn_change_home_to_workshop:$(".btn-change-home-to-workshop"),white_box_workshop:$(".white-box.home-workshop-exclusive")},init:function(){var e=this,t=function(){$("body").one("click",function(e){$(e.target).parents(".go-sign-in-form").length||(e.stopPropagation(),o())})};"/sou-mecanico"===document.location.pathname&&localStorage.setItem("ozfptrolehome",3),"/"===document.location.pathname&&localStorage.setItem("ozfptrolehome",2);var n=function(){$("body").off("click",function(e){e.stopPropagation(),o()})},a=function(){e.el.go_sign_in_form.addClass("active"),t()},o=function(){e.el.go_sign_in_form.removeClass("active"),n()};this.el.go_sign_in_form.find("input").on("focus",a),this.el.go_sign_in_form.find("input").on("blur",o);!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("ozfptrolehome");e.el.header.data("loggedIsWorkshop")?e.el.white_box_workshop.addClass("logged-as-workshop-hidden"):e.el.white_box_workshop.removeClass("logged-as-workshop-hidden"),3==t?($(".home-client-exclusive").each(function(){$(this).addClass("hidden")}),$(".home-workshop-exclusive").each(function(){$(this).removeClass("hidden")})):($(".home-client-exclusive").each(function(){$(this).removeClass("hidden")}),$(".home-workshop-exclusive").each(function(){$(this).addClass("hidden")}))}(),this.el.btn_change_home_to_client.on("click",function(e){e.preventDefault(),window.location.href="/"}),this.el.btn_change_home_to_workshop.on("click",function(e){e.preventDefault(),window.location.href="/sou-mecanico"});!function(){$(".open-sub-menu").on("click",function(e){e.preventDefault();var t=$(this).parent(),n=t.hasClass("on");t.addClass("on");var a=$(this).parent().children(".workshop-dropdown-content"),o=a.hasClass("hidden");$(".workshop-dropdown-content").addClass("hidden"),$(this).removeClass("flip-180"),o&&(a.removeClass("hidden"),$(this).addClass("flip-180")),n&&t.removeClass("on")})}();!function(){$(".submenu-item.container").on("click",function(e){e.preventDefault();var t=$(this).parent().children(".submenu-items"),n=t.hasClass("hidden");t.addClass("hidden"),t.parent().children(".submenu-item.container").removeClass("on"),$(this).removeClass("flip-180"),n&&(t.removeClass("hidden"),$(this).addClass("flip-180"),t.parent().children(".submenu-item.container").addClass("on"))})}()}}},{}],14:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=e("./helpers"),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=function(){function e(t){a(this,e),this.settings=t,this.select_class=".select-load",this.setActions()}return o(e,[{key:"setActions",value:function(){var e=this;this.settings.container.on("change",this.select_class,function(t){$(this).val()&&e.loadData({path:$(this).data("path"),data:{id:$(this).val()},target:$(this).data("target"),template:$(this).data("template"),item:$(this)})})}},{key:"loadData",value:function(e){var t=this;this.settings.container.find(e.target).html("<option>Carregando...</option>"),$.ajax({url:i.default.url(e.path),data:e.data,dataType:"json",type:"post",success:function(n){if(n.success){var a=e.template||'<option value="{{id}}">{{name}}</option>';t.settings.container.find(e.target).html(t.getOptions(n.data,e.target,a,e.item)),e.callback&&e.callback()}else i.default.onError(n)},error:i.default.onError})}},{key:"getOptions",value:function(e,t,n,a){var o="Selecione";return a.data("first-option")&&(o=a.data("first-option")),['<option value="">'+o+"</option>"].concat(e.map(function(e){return Mustache.render(n,e)}))}},{key:"preload",value:function(e){var t=this;e.data("value")&&e.find("option").length>0&&this.loadData({path:e.data("path"),data:{id:e.val()},target:e.data("target"),template:e.data("template"),item:e,callback:function(){var n=$(e.data("target"));n.data("value")&&(n.val(n.data("value")),n.data("target")&&t.preload(n))}})}}]),e}();n.default=s},{"./helpers":10}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){$(".go-state-city").each(this.applyComponent)},applyComponent:function(e,t){var n=$(t),a=$(n.find(".state-select")),o=$(n.find(".city-select"));if(!a.length)return console.warn("State select");if(!o.length)return console.warn("City select");var r=$(a),i=$(o);r.on("change",function(){$.get("/",{getCity:1,stateId:r.val()},function(e){if(e.cities){var t=i[0].selectize;t.clear(),t.clearOptions(),t.load(function(t){t(Object.keys(e.cities).map(function(t){return{text:e.cities[t].text,value:e.cities[t].id}}))}),t.refreshOptions()}})})}}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){$(".go-tab").each(this.applyComponent)},applyComponent:function(e,t){function n(e,t){var n=t.data("open-tab");e.find("[data-open-tab].active").removeClass("active"),t.addClass("active"),e.find("[data-tab].open").removeClass("open"),e.find('[data-tab="'+n+'"]').addClass("open")}var a=$(t);a.find(".tab-button").each(function(e,t){var o=$(t);o.on("click",function(){n(a,o)})})}}},{}],17:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.$element=t,this.events={},this.isBlankHref=!1}return o(e,[{key:"onClick",value:function(e){var t=this;this.$element.on("click",function(n){t.isBlankHref||n.preventDefault(),e(n)})}},{key:"setIsBlankHref",value:function(e){this.isBlankHref=e}},{key:"goToHref",value:function(){window.location=this.$element.attr("href")}},{key:"track",value:function(){var e=this;return new Promise(function(t,n){var a=e.$element.data("id"),o=e.$element.data("track");e.$element.data("type");$.ajax({url:o,data:{workshop_id:a},type:"post",dataType:"json",success:function(e){t(e)},error:function(e){n(e)}})})}},{key:"replaceContent",value:function(){this.$element.closest(".value").html(this.$element.data("content"))}}]),e}();n.default=r},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={cpf:function(e){var t=e.replace(/[^\d]+/g,""),n=void 0,a=void 0,o=void 0,r=void 0,i=void 0;if(i=1,t.length<11)return!1;for(r=0;r<t.length-1;r++)if(t.charAt(r)!=t.charAt(r+1)){i=0;break}if(i)return!1;for(n=t.substring(0,9),a=t.substring(9),o=0,r=10;r>1;r--)o+=n.charAt(10-r)*r;if((o%11<2?0:11-o%11)!=a.charAt(0))return!1;for(n=t.substring(0,10),o=0,r=11;r>1;r--)o+=n.charAt(11-r)*r;return(o%11<2?0:11-o%11)==a.charAt(1)},license_plate:function(e){return/^[a-z]{3}-[0-9]{4}$/i.test(e)},phone:function(e){return/^\([0-9]{2}\) [0-9]{4}-[0-9]{4}$/i.test(e)},cellphone:function(e){return/^\([0-9]{2}\) [0-9]{4,5}-[0-9]{4,5}$/i.test(e)},birthday:function(e){return moment(e,"DD/MM/YYYY").isValid()&&/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/.test(e)}}},{}],19:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("./car/edit"),s=a(i),c=e("./car/user_profile_edit"),l=a(c),d=e("./workshop/favorite"),u=a(d);n.default={init:function(){r.default.route("schedulings-user_list",s.default.init.bind(s.default)),r.default.route("pages-user_profile_edit",l.default.init.bind(l.default)),r.default.route("schedulings-user_favorites_list",u.default.init.bind(u.default))}}},{"../modules/helpers":10,"./car/edit":20,"./car/user_profile_edit":21,"./workshop/favorite":43}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../modules/select_load"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={el:{car_modal:$("#car-edit-modal"),edit_car:$(".edit-car"),car_modal_content:$(".car-modal-content"),form:$(".car-modal-content form"),profile_photo:$(".profile-photo"),btn_plus:$(".plus"),btn_plus_close:$(".plus-close"),btn_clear_filter:$(".clear-filter"),calendar_box:$(".calendar-box"),filter_status:$(".select-scheduling")},init:function(){this.el.btn_plus.on("click",this.changeToDetails.bind(this)),this.el.btn_plus_close.on("click",this.changeToResume.bind(this)),this.el.btn_clear_filter.on("click",this.clearFilter.bind(this)),this.el.filter_status.on("change",this.changeOption.bind(this)),this.selectLoad=new o.default({container:this.el.car_modal_content}),this.el.form.find('input[name="license_plate"]').inputmask("AAA-9999"),this.createCalendar()},openModal:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("car"),a=this.el.form.find('input[name="id"]'),o=this.el.form.find('select[name="car_manufacturer_id"]'),r=this.el.form.find('select[name="car_model_id"]'),i=this.el.form.find('select[name="car_version_id"]'),s=this.el.form.find('select[name="car_version_year_id"]'),c=this.el.form.find('input[name="license_plate"]'),l=this.el.form.find('select[name="car_color_id"]'),d=this.el.form.find('input[name="km"]');a.val(n.id),o.val(n.car_manufacturer_id).data("value",n.car_manufacturer_id),r.data("value",n.car_model_id),i.data("value",n.car_version_id),c.val(n.license_plate),l.val(n.car_color_id),d.val(n.km),n.car_version_year&&n.car_version_year.car_year&&(s.append($("<option>",{value:n.car_version_year_id,text:n.car_version_year.car_year.name})),s.val(n.car_version_year_id)),this.selectLoad.preload(o),this.el.car_modal.modal("open"),this.parsley=this.el.form.parsley()},createCalendar:function(){var e=this;this.picker=new Pikaday({field:this.el.calendar_box.find(".datepicker")[0],format:"YYYY-MM-DD",container:this.el.calendar_box.find(".datepicker-container")[0],i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},onSelect:function(t){var n=moment(t).format("YYYY-MM-DD");$("#filter-date").val(n),e.submitFilters()}}),document.removeEventListener("keydown",this.picker._onKeyChange)},changeToResume:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.parents(".details"),a=n.parent().children(".resume");n.addClass("hidden"),a.removeClass("hidden")},changeToDetails:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.parents(".resume"),a=n.parent().children(".details");n.addClass("hidden"),a.removeClass("hidden")},changeOption:function(e){$("#filter-status").val(e.currentTarget.value),this.submitFilters()},clearFilter:function(){$("#filter-date").val(""),$("#filter-status").val(""),this.submitFilters()},submitFilters:function(){var e=$("#filter-date").val()||!1,t=$("#filter-status").val()||!1,n="";t&&(n="?filtro="+t),e&&(t?n+="&data="+e:n="?data="+e),window.location="/perfil/agendamentos"+n}}},{"../../modules/select_load":14}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){e.preventDefault();var n=h(f),a=n.cellphone.split(" "),r=parseInt(a[0].replace(/[{()}]/g,""));n.cellphone=a[1],n.cellphone_area_code=r,t(n)&&p("/perfil/editar","post",n).then(function(e){e.error&&e.errors?o(e.errors):window.location.reload()}).catch(function(e){console.log(e)})}function t(e){document.querySelectorAll(".edit-input-error-message").forEach(function(e){return e.classList.remove("active")});var t=!1,o=e.password,r=e.password_check;return Object.entries(e).forEach(function(i){var s=document.querySelector("#edit-create-form-"+i[0]),c=void 0;if(s&&(c=s.querySelector(".edit-input-error-message")),"document"==i[0]){n(i[1].replace(/-/g,"").replace(/\./g,""))||(c.classList.add("active"),c.textContent="CPF ínvalido",t=!0)}if("birthday"==i[0]){var l=i[1].split("/");a(l[1]+"/"+l[0]+"/"+l[2])||(c.classList.add("active"),c.textContent="Data ínvalida",t=!0)}"password_check"==i[0]&&r!==o&&(c.classList.add("active"),c.textContent="Senha divergente",t=!0),"password_check"==i[0]&&(r||delete e.password_check),"password"==i[0]&&(o||delete e.password)}),!t}function n(e){var t,n;if(t=0,"00000000000"==e)return!1;for(var a=1;a<=9;a++)t+=parseInt(e.substring(a-1,a))*(11-a);if(n=10*t%11,10!=n&&11!=n||(n=0),n!=parseInt(e.substring(9,10)))return!1;t=0;for(var a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return n=10*t%11,10!=n&&11!=n||(n=0),n==parseInt(e.substring(10,11))}function a(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]}function o(e){Object.entries(e).forEach(function(e){var t=document.querySelector("#edit-create-form-"+e[0]),n=t.querySelector(".edit-input-error-message");"email"===e[0]?n.textContent="E-mail já cadastrado":n.textContent=e[1][Object.keys(e[1])[0]],n.classList.add("active")})}function r(e,t,n,a){e.forEach(function(e){var o=new Option(e[n],e[a]);t.appendChild(o)})}function i(e){e.forEach(function(e){var t=new Option(e.car_year.name,e.car_year.id);w.appendChild(t)}),d()}function s(){p("/carManufacturers/getModels","post",{id:g.value}).then(function(e){e.success&&(d(_,"selecione o modelo"),d(b,"selecione a versão"),d(w,"selecione o ano"),r(e.data,_,"name","id"))})}function c(){p("/carModels/getVersions","post",{id:_.value}).then(function(e){e.success&&(d(b,"selecione a versão"),d(w,"selecione o ano"),r(e.data,b,"name","id"))})}function l(){p("/carVersions/getVersionYears","post",{id:b.value}).then(function(e){e.success&&(d(w,"selecione o ano"),i(e.data))})}function d(e,t){if(e){for(var n=e.options.length,a=n-1;a>=0;a--)e.options[a]=null;var o='<option value="" disabled selected hidden>'+t+"</option>";e.innerHTML=o}}function u(e){e.preventDefault();var t=h(v);p("/pages/registerNewCar","post",{car:{car_manufacturer_id:t.manufacturer,car_model_id:t.model,car_version_id:t.version,car_version_year_id:t.year,license_plate:t.plate,car_color_id:t.color,km:t.mileage}}).then(function(e){document.querySelector("#vehicles-car-form").innerHTML+='<div class="vehicles-content">\n            <p>\n              <a data-id="'+e.car.id+'" class="remove-car">X</a>\n              '+e.car+"\n            </p>\n          </div>",$(".remove-car").on("click",m),document.getElementById("car-form").reset(),e.error&&alert(e.error)}).catch(function(e){console.log(e)})}function p(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})}function h(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n}function m(e){e.preventDefault();var t=$(e.currentTarget);if(confirm("Todos os agendamentos relacionados ao veículo serão removidos. Deseja continuar?")){var n=$("<form>",{class:"hide",method:"post",action:"/veiculos/remover"});n.append('<input type="hidden" name="id" value="'+t.data("id")+'">'),t.before(n),n.trigger("submit")}}if(!function(){var e=document.querySelector("#edit-profile-one-section");if(!e)return{error:!0};var t=e.dataset.userId;return t||(t=null),{userId:t}}().error){!function(){$('[data-mask="date"]').inputmask({mask:"99/99/9999",showMaskOnHover:!1}),$('[data-mask="cpf"]').inputmask({mask:"999.999.999-99",showMaskOnHover:!1}),$('[data-mask="cellphone-ddd"]').inputmask({mask:"(99) 99999-999[9]",showMaskOnHover:!1})}();var f=document.querySelector("#edit-profile-form-create");f.addEventListener("submit",e),$(".remove-car").on("click",m);var v=document.querySelector("#car-form"),g=document.querySelector("#manufacturer-select"),_=document.querySelector("#model-select"),b=document.querySelector("#version-select"),w=document.querySelector("#year-select"),y=document.querySelector(".add-car-button"),k=document.createTextNode("Adcionar outro veiculo"),S=document.createTextNode("Fechar adição de veiculo");y.appendChild(k),v.addEventListener("submit",u),g.addEventListener("change",s),_.addEventListener("change",c),b.addEventListener("change",l),y.addEventListener("click",function(){"block"===document.getElementsByClassName("car-form-input")[0].style.display?(y.replaceChild(k,y.childNodes[0]),document.getElementsByClassName("car-form-input")[0].style.display="none"):(y.replaceChild(S,y.childNodes[0]),document.getElementsByClassName("car-form-input")[0].style.display="block")})}}}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../modules/helpers");!function(e){e&&e.__esModule}(a);n.default={el:{form:$('form[name="contact"]'),button:$('form[name="contact"] .go-submit button'),ajax_result:$('form[name="contact"] .ajax-result'),contato_section:$(".contact-section")},init:function(){var e=this;this.el.form.find('input[name="phone"]').inputmask("(99) 9999-9999"),this.el.form.find('input[name="cellphone"]').inputmask("(99) 99999-9999"),this.el.form.on("submit",function(t){t.preventDefault(),e.el.button.addClass("sending").attr("disabled",!0),e.el.ajax_result.removeClass("active success error"),$.ajax({url:e.el.form.attr("action"),type:e.el.form.attr("method"),data:e.el.form.serialize(),dataType:"json",success:function(t){t.success&&e.el.form[0].reset(),e.el.ajax_result.html(t.message).addClass(t.success?"success":"error").addClass("active"),e.el.button.removeClass("sending").removeAttr("disabled")},error:function(){e.el.button.removeClass("sending").removeAttr("disabled")}})})}}},{"../modules/helpers":10}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../modules/helpers"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={el:{intro_section:$(".intro-section"),know_more:$(".intro-section--know-more"),how_it_works_section:$(".how-it-works-section"),featured_workshops_section:$(".featured-workshops-section")},init:function(){var e=this;this.last_height=$(window).height(),this.el.know_more.on("click",function(t){t.preventDefault();var n=e.el.featured_workshops_section.length?e.el.featured_workshops_section.offset().top:e.el.how_it_works_section.offset().top;$(window).width(),n-=70,o.default.scrollTo(n)});var t=void 0;$(window).on("resize",function(){clearInterval(t),t=setTimeout(function(){e.changeHeight()},200)}),this.changeHeight(!0)},changeHeight:function(e){var t=$(window).height(),n=Math.abs(t-this.last_height);this.last_height=t;var a=t>800?t:800;(n>100||t>640||e)&&(t<=500&&(t="initial"),this.el.intro_section.css({height:t,maxHeight:a,minHeight:800}))}}},{"../modules/helpers":10}],24:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("../modules/tracker"),s=a(i),c=e("./contact"),l=a(c),d=e("./newsletter"),u=a(d),p=e("./hero"),h=a(p),m=e("./workshop-search"),f=a(m);n.default={el:{blog_content:$(".blog-content"),blog_card_template:$("#blog-card-template").html(),how_it_works_section:$(".how-it-works-section"),blog_section:$(".blog-section"),doubts_section:$(".doubts-section"),contact_section:$(".contact-section"),features_section:$(".features-section"),features_section_workshop:$(".features-section-workshop"),workshop_sign_up_section:$(".workshop-sign-up-section"),go_to_how_it_works_section:$(".go-to-how-it-works-section"),go_to_blog_section:$(".go-to-blog-section"),go_to_contact_section:$(".go-to-contact-section"),go_to_features_section:$(".go-to-features-section"),go_to_features_section_workshop:$(".go-to-features-section-workshop"),go_to_workshop_sign_up_section:$(".go-to-workshop-sign-up-section"),go_helper_link:$(".go-helper-link a"),empty_featured_workshop_button:$(".empty-featured-workshop-button"),btn_by_nearby:$(".btn-by-nearby"),btn_by_service:$(".btn-by-service"),btn_by_address:$(".btn-by-address"),box_by_nearby:$(".box-by-nearby"),box_by_service:$(".box-by-service"),box_by_address:$(".box-by-address"),action_by_nearby:$(".action-by-nearby"),action_by_service:$(".action-by-service"),action_by_address:$(".action-by-address")},init:function(){var e=this;f.default.init(),u.default.init(),l.default.init(),h.default.init(),-1===document.location.search.indexOf("como-funciona")&&-1===document.location.pathname.indexOf("como-funciona")||this.goToHowItWorks(),-1===document.location.search.indexOf("contato")&&-1===document.location.pathname.indexOf("contato")||this.goToContact(),-1===document.location.search.indexOf("agendamentos")&&-1===document.location.pathname.indexOf("agendamentos")||this.goToFeatures(),-1===document.location.search.indexOf("cadastre-sua-oficina")&&-1===document.location.pathname.indexOf("cadastre-sua-oficina")||this.goToRegister(),this.el.go_to_how_it_works_section.on("click",function(t){t.preventDefault(),e.goToFeatures()}),this.el.go_to_blog_section.on("click",function(t){t.preventDefault(),e.goToBlog()}),this.el.go_to_contact_section.on("click",function(t){t.preventDefault(),e.goToDoubts()}),this.el.go_to_features_section.on("click",function(t){t.preventDefault(),e.goToFeatures()}),this.el.go_to_features_section_workshop.on("click",function(t){t.preventDefault(),e.goToFeaturesWorkshop()}),this.el.go_to_workshop_sign_up_section.on("click",function(t){t.preventDefault(),e.goToRegister()}),this.el.btn_by_nearby.on("click",function(t){t.preventDefault(),e.el.btn_by_nearby.addClass("active"),e.el.btn_by_service.removeClass("active"),e.el.btn_by_address.removeClass("active"),e.el.box_by_nearby.removeClass("search-by-hidden"),e.el.box_by_service.addClass("search-by-hidden"),e.el.box_by_address.addClass("search-by-hidden"),e.el.action_by_nearby.removeClass("search-by-hidden"),e.el.action_by_service.addClass("search-by-hidden"),e.el.action_by_address.addClass("search-by-hidden")}),this.el.btn_by_service.on("click",function(t){t.preventDefault(),e.el.btn_by_nearby.removeClass("active"),e.el.btn_by_service.addClass("active"),e.el.btn_by_address.removeClass("active"),e.el.box_by_nearby.addClass("search-by-hidden"),e.el.box_by_service.removeClass("search-by-hidden"),e.el.box_by_address.addClass("search-by-hidden"),e.el.action_by_nearby.addClass("search-by-hidden"),e.el.action_by_service.removeClass("search-by-hidden"),e.el.action_by_address.addClass("search-by-hidden")}),this.el.btn_by_address.on("click",function(t){t.preventDefault(),e.el.btn_by_nearby.removeClass("active"),e.el.btn_by_service.removeClass("active"),e.el.btn_by_address.addClass("active"),e.el.box_by_nearby.addClass("search-by-hidden"),e.el.box_by_service.addClass("search-by-hidden"),e.el.box_by_address.removeClass("search-by-hidden"),e.el.action_by_nearby.addClass("search-by-hidden"),e.el.action_by_service.addClass("search-by-hidden"),e.el.action_by_address.removeClass("search-by-hidden")}),this.el.go_helper_link.on("click",function(t){"#"==e.el.go_helper_link.attr("href")&&(t.preventDefault(),e.goToContact())}),this.setTracker($(".swiper-slide [data-track]")),this.setSwiper(),this.getBlogLastNews()},setTracker:function(e){var t=function(e){var t=new s.default(e);t.onClick(function(){t.track().then(function(){t.goToHref()})})};e.length>1?e.each(function(e,n){t($(n))}):t(e)},goToHowItWorks:function(){var e=this.el.how_it_works_section.offset().top-70;r.default.scrollTo(e)},goToBlog:function(){var e=this.el.blog_section.offset().top-70;r.default.scrollTo(e)},goToDoubts:function(){var e=this.el.doubts_section.offset().top-70;r.default.scrollTo(e)},goToContact:function(){var e=this.el.contact_section.offset().top-30;$(window).width()<640&&(e-=50),r.default.scrollTo(e)},goToFeatures:function(){var e=this.el.features_section.offset().top-30;$(window).width()<640&&(e-=50),r.default.scrollTo(e)},goToFeaturesWorkshop:function(){var e=this.el.features_section_workshop.offset().top-30;$(window).width()<640&&(e-=50),r.default.scrollTo(e)},goToRegister:function(){var e=this.el.workshop_sign_up_section.offset().top-30;$(window).width()<640&&(e-=50),r.default.scrollTo(e)},setSwiper:function(){new Swiper(".swiper-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",paginationClickable:!0,spaceBetween:30,centeredSlides:!0,autoplay:1e4,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})},getBlogLastNews:function(){var e=this;if(this.el.blog_content&&this.el.blog_card_template){var t=function(t){e.el.blog_content.append(Mustache.render(e.el.blog_card_template,t))};$.ajax({url:"https://blog.oficinaszfprotech.com.br/?rest_route=/wp/v2/posts&_embed",type:"get",dataType:"json",success:function(e){if(e&&e.length>0)for(var n=0;n<4;n++){var a=e[n],o={};o.dateObj=new Date(a.date);var r=new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"long",day:"numeric"});o.date=r.format(o.dateObj),o.title=a.title.rendered,o.class="",o.index=n,o.link=a.link,n>1&&(o.class="hide-small"),o.image="/img/intro-background.jpg",a._embedded["wp:featuredmedia"]&&a._embedded["wp:featuredmedia"].length>0&&(o.image=a._embedded["wp:featuredmedia"][0].source_url),t(o)}},error:function(){}})}}}},{"../modules/helpers":10,"../modules/tracker":17,"./contact":22,"./hero":23,"./newsletter":28,"./workshop-search":39}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{topCanvas:document.querySelector(".shell-top__canvas"),bottomCanvas:document.querySelector(".shell-bottom__canvas")},init:function(){},initTopCanvas:function(){var e=this.el.topCanvas,t=e.getContext("2d"),n=e.width,a=e.height;t.beginPath(),t.moveTo(0,0),t.lineTo(n,0),t.lineTo(n,a),t.closePath(),t.fillStyle="#f3f6f9",t.fill()},initBottomCanvas:function(){var e=this.el.bottomCanvas,t=e.getContext("2d"),n=e.width,a=e.height;t.beginPath(),t.moveTo(n,0),t.lineTo(n,a),t.lineTo(0,a),t.closePath(),t.fillStyle="#f3f6f9",t.fill()}}},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){$(".go-sign-in-button");$(".go-form--user-login").each(this.applyComponent)},applyComponent:function(e,t){function n(e){e.preventDefault();var t=$(".go-sign-in-form .tab-button.active"),n=a.find('[name="cnpj"]').val(),o=a.find('[name="email"]').val()||a.find('[name="user[email]"]').val(),s=a.find('[name="password"]').val()||a.find('[name="user[password]"]').val(),c=a.find('[name="role_id"]').val(),l=!1;i?o&&s&&(l=!0):"workshop"==t.data("open-tab")?n&&s&&(l=!0):o&&s&&(l=!0),l?$.post(i?a.data("action"):a.prop("action"),{cnpj:n,email:o,password:s,role_id:c}).success(function(e){e.error?r.text(e.error.message):e.success&&(i&&a.data("url")?window.location=a.data("url"):window.location=e.success.url)}).error(function(){r.text("Ocorreu um erro interno, favor tentar mais tarde.")}):r.text("Preencher todos os campos solicitados")}var a=$(t),o=a.find(".go-form--ajax-submit"),r=a.find(".go-form--feedback"),i=a.hasClass("--component");o.on("click",n),a.find('[name="cnpj"]').inputmask("99.999.999/9999-99")}}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{header:$(".header-section"),openNav:document.querySelector(".open-nav"),mainNav:document.querySelector(".main-nav-box"),iconClose:document.querySelector(".icon-close"),subHeader:$(".sub-header-section"),modalSubHeaderMobile:document.querySelector(".modal-sub-header-mobile"),openSubMenu:document.querySelector(".open-sub-menu"),closeSubMenu:document.querySelector(".close-sub-header-mobile")},init:function(){this.el.openNav&&this.el.openNav.addEventListener("click",this.openCloseNav.bind(this)),this.el.iconClose&&this.el.iconClose.addEventListener("click",this.openCloseNav.bind(this)),this.el.openSubMenu&&this.el.openSubMenu.addEventListener("click",this.openCloseSubMenu.bind(this)),this.el.closeSubMenu&&this.el.closeSubMenu.addEventListener("click",this.openCloseSubMenu.bind(this)),$("body").hasClass("pages-index")&&(window.addEventListener("scroll",this.onScrollWindow.bind(this)),this.onScrollWindow()),$("body").hasClass("pages-program")&&(window.addEventListener("scroll",this.onScrollWindow.bind(this)),this.onScrollWindow())},openCloseNav:function(e){e.preventDefault();for(var t=this,n=this.el.mainNav.querySelectorAll("li > a"),a=0;a<n.length;a++){n[a].addEventListener("click",function(){t.el.openNav.classList.remove("opened"),document.body.classList.remove("opened-nav")})}
this.el.openNav.classList.contains("opened")?this.el.openNav.classList.remove("opened"):this.el.openNav.classList.add("opened"),this.el.openNav.classList.contains("opened")?document.body.classList.add("opened-nav"):document.body.classList.remove("opened-nav")},openCloseSubMenu:function(e){e.preventDefault(),this.el.modalSubHeaderMobile.classList.contains("hidden")?this.el.modalSubHeaderMobile.classList.remove("hidden"):this.el.modalSubHeaderMobile.classList.add("hidden")},opensubmenu:function(){$(".open-submenu").on("click",function(e){e.preventDefault(),console.log("ooooooooooooi");var t=$(this).parent().children(".submenu-mobile"),n=t.hasClass("hidden");$("submenu-mobile").addClass("hidden"),$(this).removeClass("flip-180"),n&&(t.removeClass("hidden"),$(this).addClass("flip-180"))})},onScrollWindow:function(e){$(window).scrollTop()>10?this.el.header.addClass("fixed"):this.el.header.removeClass("fixed")}}},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../modules/helpers");!function(e){e&&e.__esModule}(a);n.default={el:{forms:document.querySelectorAll("form.newsletter")},init:function(){function e(e){e.preventDefault();var t=this,n=t.querySelector("button"),a=t.querySelector(".feedback"),o=t.querySelector("input");$.post("/newsletters/add",{email:o.value}).then(function(e){a.classList.add("active"),e.success?(a.classList.remove("error"),a.classList.add("success"),o.disabled="disabled",n.disabled="disabled",o.value="",a.textContent=e.message):(a.classList.remove("success"),a.classList.add("error"),e.errors?(e.errors.email.email&&(a.textContent="E-mail inválido"),e.errors.email._isUnique&&(a.textContent="E-mail já cadastrado")):a.textContent="Houve algum erro na inscrição."),t.classList.remove("loading")})}this.el.forms&&this.el.forms.length&&this.el.forms.forEach(function(t){t.addEventListener("submit",e)})}}},{"../modules/helpers":10}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{},init:function(){this.setSwiper()},setSwiper:function(){new Swiper(".swiper-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",paginationClickable:!0,spaceBetween:30,centeredSlides:!0,autoplay:1e4,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})}}},{}],30:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("./rating/page"),s=a(i);n.default={init:function(){r.default.route("ratings-workshop",s.default.init.bind(s.default))}}},{"../modules/helpers":10,"./rating/page":31}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{form:$(".rating-form"),button:$(".rating-form button[type=submit]"),rating:$(".rating-form input[name=rating]"),stars_box:$(".rating-form .rating-box .stars-box"),result:$(".rating-form .ajax-result")},init:function(){this.el.form.parsley(),this.setStarsBox(),this.setForm()},setStarsBox:function(){var e=this;this.el.stars_box.find("span").on("click",function(t){var n=$(this).index()+1;e.setRate(n)})},setRate:function(e){for(var t=1;t<=5;t++)$(".rating-box .stars-box").removeClass("star-"+t);parseInt(e)>0?($(".rating-box .stars-box").addClass("star-"+e),this.el.form.find("input[name=rating]").val(e)):this.el.form.find("input[name=rating]").val("")},setForm:function(){var e=this;this.el.form.on("submit",function(t){t.preventDefault(),e.validRating()?(e.el.form.find(".item-rating-stars").removeClass("has-error"),e.el.result.removeClass("success error").addClass("active").html("Enviando..."),e.el.button.addClass("disabled").attr("disabled",!0),$.ajax({url:e.el.form.attr("action"),type:e.el.form.attr("method"),data:e.el.form.serialize(),success:function(t){var n="error";t.success?n="success":e.el.button.removeClass("disabled").removeAttr("disabled"),e.el.result.addClass(n).html(t.message)},error:function(){alert("Ocorreu um erro interno"),e.el.button.removeClass("disabled").removeAttr("disabled")}})):e.el.form.find(".item-rating-stars").addClass("has-error")})},validRating:function(){return parseInt(this.el.rating.val())>0}}},{}],32:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("./scheduling/workshop"),s=a(i),c=e("./workshop/rating"),l=a(c),d=e("./scheduling/calendar"),u=a(d);n.default={init:function(){r.default.route("schedulings-workshop_list",s.default.init.bind(s.default)),r.default.route("schedulings-workshop_list",l.default.init.bind(l.default)),r.default.route("schedulings-workshop_list",function(){$(".scheduling-filter-calendario").length>0&&u.default.init()}),r.default.route("schedulings-user_list",s.default.init.bind(s.default)),r.default.route("schedulings-user_list",l.default.init.bind(l.default))}}},{"../modules/helpers":10,"./scheduling/calendar":33,"./scheduling/workshop":34,"./workshop/rating":46}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{calendar:$("#calendar"),spinner_content:$(".scheduling-full-calendar .spinner-box"),spinner_sidebar:$(".scheduling-sidebar .spinner-box"),scheduling_sidebar_ul:$(".scheduling-sidebar ul"),modal_block_day:$("#scheduling-block-hour")},tpl:{sidebar_item:$("#template-scheduling-sidebar-item").html(),sidebar_item_popover:$("#template-scheduling-sidebar-item-popover").html(),scheduling_hour_item:$("#template-scheduling-hour-item").html()},events:[],sidebar_items:[],date_items:[],blocked_date_items:{},blocked_day_items:[],init:function(){var e=this;this.el.calendar.fullCalendar({locale:"pt-br",dayClick:function(t,n,a){var o=parseInt(t.format("d")),r=e.el.modal_block_day.data("saturday"),i=[0];r||i.push(6),-1==i.indexOf(o)&&moment().isBefore(t)&&e.showModalBlockHour(t)},viewRender:function(t,n){var a=e.el.calendar.fullCalendar("getDate"),o=parseInt(a.format("M")),r=parseInt(a.format("Y"));e.loadSchedulings(o,r)},dayRender:function(t,n){var a=parseInt(t.format("d")),o=moment(t).format("YYYY-MM-DD"),r=e.el.modal_block_day.data("saturday"),i=[0];r||i.push(6),e.blocked_day_items.indexOf(o)>-1?$(n).addClass("blocked-cell"):i.indexOf(a)>-1&&$(n).addClass("not-work")},eventClick:function(e,t,n){$(".scheduling-show[data-id="+e.id+"]").trigger("click")}}),this.el.scheduling_sidebar_ul.on("click",".scheduling-sidebar-item-client-name",function(t){t.preventDefault();var n=$(this).closest(".scheduling-sidebar-item");e.el.scheduling_sidebar_ul.find(".scheduling-sidebar-item").not(n).removeClass("active"),n.toggleClass("active")}),this.el.scheduling_sidebar_ul.on("click",".scheduling-sidebar-item .close",function(e){e.preventDefault(),$(this).closest(".scheduling-sidebar-item").toggleClass("active")})},loadSchedulings:function(e,t){var n=this;this.showSpinners(),this.removeSidebarItems(),this.el.calendar.fullCalendar("removeEventSources"),$.ajax({url:this.el.calendar.data("url"),data:{month:e,year:t},type:"post",dataType:"json",success:function(e){if(e.success){n.events=[],n.sidebar_items=[],n.date_items={},n.blocked_date_items={},n.blocked_day_items=[];for(var t in e.data){var a=e.data[t];n.events.push({id:a.id,title:a.user.name,start:a.date,className:a.content_status}),n.sidebar_items.push({id:a.id,name:a.user.name,date:moment(a.date).format("DD/MM HH[h]mm"),manufacturer:a.car.car_manufacturer.name,model:a.car.car_model.name,year:a.car.car_version_year.car_year.year,km:a.car.km,content_status:a.content_status,content_status_label:"approved"==a.content_status?"Confirmado":"Pendente",approved:"approved"==a.content_status,scheduling:JSON.stringify(a.scheduling)});var o=moment(a.date).format("YYYY-MM-DD HH:mm:ss");n.date_items[o]={date:o,name:a.user.name}}for(var r in e.blocked){var i=e.blocked[r],s=moment(i.date).format("YYYY-MM-DD HH:mm:ss"),c=moment(i.date).format("YYYY-MM-DD");n.blocked_date_items[s]={date:s},n.blocked_day_items.push(c)}n.mountSidebarItems();var l=n.el.calendar.fullCalendar("getView");l.unrenderDates(),l.renderDates(),n.el.calendar.fullCalendar("addEventSource",n.events),n.hideSpinners()}}})},hideSpinners:function(){this.el.spinner_content.removeClass("active"),this.el.spinner_sidebar.removeClass("active")},showSpinners:function(){this.el.spinner_content.addClass("active"),this.el.spinner_sidebar.addClass("active")},removeSidebarItems:function(){this.el.scheduling_sidebar_ul.html("")},mountSidebarItems:function(){for(var e in this.sidebar_items){var t=this.sidebar_items[e],n=$(Mustache.render(this.tpl.sidebar_item,t));this.el.scheduling_sidebar_ul.append(n)}},showModalBlockHour:function(e){var t=this;this.el.modal_block_day.find(".scheduling-day").html(e.format("DD/MM/YYYY")),this.el.modal_block_day.modal("show");var n=this.el.modal_block_day.find(".scheduling-checkbox-hours"),a=e.format("YYYY-MM-DD"),o=this.el.modal_block_day.data("hours"),r=o.map(function(e){var n=a+" "+e+":00",o="",r="";if(t.date_items[n]){e=e+" (<strong>"+t.date_items[n].name+"</strong>)",o="disabled",r="checked"}else t.blocked_date_items[n]&&(r="checked");return{date:n,label:e,disabled:o,checked:r}});n.html(""),r.map(function(e){n.append(Mustache.render(t.tpl.scheduling_hour_item,e))})}}},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../modules/tracker"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={el:{cancel_modal:$("#scheduling-cancel-modal"),show_modal:$("#scheduling-show-modal"),message_show:$(".message-show"),message_show_modal:$("#message-show-modal"),modal_app:$("#modal-app"),close_and_dont_show:$(".close-and-dont-show"),workshop_profile_thumb:$(".workshop-profile-thumb img"),premium_box_link:$(".premium-box a"),btn_clear_filter:$(".clear-filter"),certificate_download:$(".certificate-download"),filter_scheduling:$(".select-scheduling"),calendar_box:$(".calendar-box")},tpl:{scheduling_show:$("#template-scheduling-show").html()},init:function(){if($("body").on("submit",".form-scheduling-cancel",this.openCancelModal.bind(this)),this.el.cancel_modal.on($.modal.BEFORE_CLOSE,this.onHideCancelModal.bind(this)),this.el.cancel_modal.find("form").on("submit",this.confirmCancellation.bind(this)),this.el.btn_clear_filter.on("click",this.clearFilter.bind(this)),$(document).on("click",".scheduling-show",this.schedulingShow.bind(this)),this.el.filter_scheduling.on("change",this.changeOption.bind(this)),this.setTracker(this.el.premium_box_link),this.setTracker(this.el.certificate_download),this.adjustProfileImage(),this.el.message_show&&this.el.message_show.text().length>0){var e=Mustache.render('<div class="warning-message-modal">{{message}}</div>',{message:this.el.message_show.text()});this.el.message_show.html(""),this.el.message_show_modal.modal("show"),this.el.message_show_modal.find(".message-show-modal--content").html(e)}this.el.modal_app.data("show")&&(Cookies.get("modal_app")||this.el.modal_app.modal("show")),this.el.close_and_dont_show.on("click",function(e){e.preventDefault(),Cookies.set("modal_app",!0)}),this.createCalendar()},setTracker:function(e){var t=new o.default(e);t.onClick(function(){t.track().then(function(){t.goToHref()})})},adjustProfileImage:function(){var e=this.getNaturalImageSize(this.el.workshop_profile_thumb[0]);e.width>e.height?(this.el.workshop_profile_thumb.css({height:"46px"}),setTimeout(function(){this.el.workshop_profile_thumb.css({marginLeft:"-"+(parseInt(this.el.workshop_profile_thumb.css("width"))-46)/2+"px"})}.bind(this))):(this.el.workshop_profile_thumb.css({width:"46px"}),setTimeout(function(){this.el.workshop_profile_thumb.css({marginTop:"-"+(parseInt(this.el.workshop_profile_thumb.css("height"))-46)/2+"px"})}.bind(this)))},getNaturalImageSize:function(e){var t=new Image;return e&&e.src&&(t.src=e.src),{width:t.width,height:t.height}},openCancelModal:function(e){this.current_form_cancel=$(e.currentTarget),console.log("oi"),console.log(this.current_form_cancel),this.current_form_cancel.data("alerted")||(e.preventDefault(),this.current_form_cancel.data("alerted",!0),this.el.cancel_modal.modal("show"))},createCalendar:function(){var e=this;this.picker=new Pikaday({field:this.el.calendar_box.find(".datepicker")[0],format:"YYYY-MM-DD",container:this.el.calendar_box.find(".datepicker-container")[0],i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},onSelect:function(t){var n=moment(t).format("YYYY-MM-DD");$("#filter-date").val(n),e.submitFilters()}}),document.removeEventListener("keydown",this.picker._onKeyChange)},onHideCancelModal:function(e,t){this.current_form_cancel.data("alerted",!1)},confirmCancellation:function(e){e.preventDefault();var t=this.el.cancel_modal.find("textarea[name=cancellation_reason]").val();t=t.toString().trim(),t.length>=5?(this.el.cancel_modal.find(".go-button-orange").attr("disabled",!0).addClass("disabled"),this.current_form_cancel.find("input[name=cancellation_reason]").val(t),this.current_form_cancel.trigger("submit")):(this.el.cancel_modal.find("textarea[name=cancellation_reason]").focus(),this.el.cancel_modal.find(".error-message").html("Mínimo de 5 caracteres"))},schedulingShow:function(e){e.preventDefault();var t=$(e.currentTarget),n=Mustache.render(this.tpl.scheduling_show,t.data("scheduling"));this.el.show_modal.modal("show"),this.el.show_modal.find(".scheduling-content").html(n)},changeOption:function(e){$("#filter-status").val(e.currentTarget.value),this.submitFilters()},clearFilter:function(){$("#filter-date").val(""),$("#filter-status").val(""),this.submitFilters()},submitFilters:function(){var e=$("#filter-date").val()||!1,t=$("#filter-status").val()||!1,n="";t&&(n="?filtro="+t),e&&(t?n+="&data="+e:n="?data="+e),window.location="/oficina/agendamentos"+n}}},{"../../modules/tracker":17}],35:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=e("../../../admin/helpers"),i=function(){function e(){a(this,e),$("body").data("base-url",window.location.origin+"/");var t=$(".go-dynamic-form.--apply");this.inputs=["car_manufacturer_id","car_model_id","car_version_id","car_version_year_id","car_color_id","car_type_id","license_plate","km","remove"],this.selects=["car_manufacturer_id","car_model_id","car_version_id","car_version_year_id","car_color_id","car_type_id"],this.counter=$(".car-template").length-1,this.manufacturers=$(".cars-box").data("manufacturers"),this.manufacturers||console.warn("No manufacturers JSON found in .cars-box data."),this.types=$(".cars-box").data("types"),this.types||console.warn("No types JSON found in .cars-box data."),this.colors=$(".cars-box").data("colors"),this.colors||console.warn("No colors JSON found in .cars-box data."),this.setActions($(".car-template")),this.addMoreCarsButton=$(".go-car-add-more"),this.activateAddMoreCarsButton(),r.Utils.route(["pages-register_user"],function(){t.onAjaxSubmit=function(e){e.url&&$(".go-to-my-profile").attr("href",e.url)}})}return o(e,[{key:"carTemplate",value:function(e){var t=this,n=['<option value="">Selecione</option>'].concat(Object.keys(t.manufacturers).map(function(e){return'<option value="'+e+'">'+t.manufacturers[e]+"</option>"})),a=(['<option value="">Selecione</option>'].concat(Object.keys(t.types).map(function(e){return'<option value="'+e+'">'+t.types[e]+"</option>"})),['<option value="">Selecione</option>'].concat(Object.keys(t.colors).map(function(e){return'<option value="'+e+'">'+t.colors[e]+"</option>"}))),o='\n    <div class="car-template">\n        <div class="row-1 grid-16">\n            <div class="column-1-1">\n              <div class="go-input-group cars ">\n                  <label for="cars['+e.index+'][car_manufacturer_id]">Fabricante*<span class="feedback"></span></label>\n                  <select id="cars['+e.index+'][car_manufacturer_id]" name="cars['+e.index+'][car_manufacturer_id]" class="selectize select-load" required = "required" data-target="#car_model_id'+e.index+'" data-path="car-manufacturers/get-models.json">\n                  '+n+'\n                  </select>\n              </div>\n            </div>\n        </div>\n\n        <div class="row-3 grid-16">\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="car_model_id'+e.index+'">Modelo*<span class="feedback"></span></label>\n                  <select id="car_model_id'+e.index+'" name="cars['+e.index+'][car_model_id]" class="selectize select-load" required = "required" disabled="" data-target="#car_version_id'+e.index+'" data-path="car-models/get-versions">\n                    <option value=\'\'>Selecione uma versão primeiro</option>\n                  </select>\n              </div>\n            </div>\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="car_version_id'+e.index+'">Versão*<span class="feedback"></span></label>\n                  <select id="car_version_id'+e.index+'" name="cars['+e.index+'][car_version_id]" class="selectize select-load" required = "required" disabled="" data-target="#car_version_year_id'+e.index+'" data-path="car-versions/get-version-years" data-template="<option value=\'{{id}}\'>{{car_year.name}}</option>">\n                    <option value=\'\'>Selecione um modelo primeiro</option>\n                  </select>\n              </div>\n            </div>\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="car_version_year_id'+e.index+'">Ano da versão*<span class="feedback"></span></label>\n                  <select id="car_version_year_id'+e.index+'" name="cars['+e.index+'][car_version_year_id]" class="selectize " required = "required" disabled="">\n                    <option value=\'\'>Selecione uma versão primeiro</option>\n                  </select>\n              </div>\n            </div>\n        </div>\n\n        <div class="row-3 grid-16">\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="cars['+e.index+'][license_plate]">Placa*<span class="feedback"></span></label>\n                  <input id="cars['+e.index+'][license_plate]" name="cars['+e.index+'][license_plate]" type="" placeholder="" class="go-input " data-mask="license-plate" value="" required/>\n              </div>\n            </div>\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="cars['+e.index+'][km]">Quilometragem<span class="feedback"></span></label>\n                  <input id="cars['+e.index+'][km]" name="cars['+e.index+'][km]" type="" placeholder="" class="go-input "  value=""/>\n              </div>\n            </div>\n            <div class="column-1-3">\n              <div class="go-input-group cars ">\n                  <label for="cars['+e.index+'][car_color_id]">Cor<span class="feedback"></span></label>\n                  <select id="cars['+e.index+'][car_color_id]" name="cars['+e.index+'][car_color_id]" class="selectize">\n                  '+a+'</select>\n              </div>\n            </div>\n        </div>\n\n        <div class="go-input-group cars  --hidden">\n            <label for="cars['+e.index+'][car_type_id]">*<span class="feedback"></span></label>\n            <input id="cars['+e.index+'][car_type_id]" name="cars['+e.index+'][car_type_id]" type="hidden" placeholder="" class="go-input " required="required" value="1">\n        </div>\n\n        <div class="go-car-remove-shell"></div>\n    </div>';return $(o)}},{key:"setActions",value:function(e){var t=this;e.find(".selectize").each(function(e,t){t.selectize||$(t).selectize({sortField:"text"})}),this.selectLoad=new r.SelectLoad,this.selectLoad.preload(e);var n=this.selects;this.counter&&this.getId(),e.find(".go-car-remove-shell").html("").append('<button type="button" class="go-button-orange go-car-remove pull-right btn">Remover veículo</button>'),e.length>0?e.each(function(e,n){t.activateRemoveButton($(n),$(n).find(".go-car-remove"))}):t.activateRemoveButton(e,e.find(".go-car-remove"));for(var a=0,o=n.length;a<o;a++)if(a+1<=o){var i=e.find(this.getSelector(this.getName(n[a]))),s=e.find(this.getSelector(this.getName(n[a+1])));i[0]&&i[0].selectize?i[0].selectize.on("change",this.freeSelect(s)):i.on("change",this.freeSelect(s))}[['[data-mask="license-plate"]',{pattern:"[A-Z]{3}-[0-9]{4}",mask:"AAA-9999"}]].forEach(function(t){var n=t[0],a=t[1];if(n=e.find(n),n.length){var o=$(n);a.validate&&(o.on("validate",a.validate),o.on("keyup",function(e){e.target.setCustomValidity("")})),o.attr("pattern",a.pattern),o.inputmask(a)}})}},{key:"activateRemoveButton",value:function(e,t){var n=this,a=e.index(),o='<input id="cars['+a+'][remove]" name="cars['+a+'][remove]" type="hidden" placeholder="" class="go-input " required="required" value="on">';t.on("click",function(){e.find(".car-id").length>0?(e.append(o),e.addClass("--hidden")):(e.remove(),n.counter-=1)})}},{key:"getName",value:function(e,t){return t?"cars[0]["+e+"]":"cars["+this.counter+"]["+e+"]"}},{key:"getSelector",value:function(e){return'[name="'+e+'"]'}},{key:"getLabelSelector",value:function(e){return'[for="'+e+'"]'}},{key:"getId",value:function(){return String.fromCharCode(97+this.counter)}},{key:"freeSelect",value:function(e){return function(){if(e.length&&e[0].selectize){var t=e[0].selectize;(this.selectize?""===this.selectize.getValue():0===this.selectedIndex)?t.disable():t.enable()}else 0===this.selectedIndex?(e.attr("disabled","disabled"),e.val(void 0).change()):e.removeAttr("disabled")}}},{key:"activateAddMoreCarsButton",value:function(){var e=this;this.addMoreCarsButton.click(function(){e.counter+=1;var t=(e.selects,e.inputs,e.carTemplate({index:e.counter}));e.setActions(t),t.appendTo(".cars-box")})}}]),e}();$(function(){r.Utils.route(["users-edit","pages-register_user","pages-user_profile_edit"],function(){new i})}),n.default=i},{"../../../admin/helpers":3}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./form"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={form:o.default}},{"./form":35}],37:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("./workshop-search"),s=a(i);n.default={init:function(){r.default.route(["widgets-search","widgets-search_mini"],s.default.init),r.default.route(["widgets-search","widgets-search_mini"],function(){var e=window.location.origin,t=$(".home-state-select"),n=$(".home-city-select"),a=$(".home-neighborhood-input"),o=$(".home-cep-search-checkbox"),r=$(".home-cep-input");$(".widget-search-workshop-button").on("click",function(i){i.preventDefault();var s=void 0;if(o.prop("checked"))s=e+"/oficinas/busca?endereco="+r.val();else{var c=[a.val(),n.text(),t.text()].join(" ");s=e+"/oficinas/busca?endereco="+c+"&state_id="+t.val()+"&city_id="+n.val()}window.open(s,"guiadeoficinas")})})}}},{"../modules/helpers":10,"./workshop-search":39}],38:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("../modules/tracker"),s=a(i);n.default={el:{plan_master_know_more:$(".plan-master-know-more"),premium_subscribe:$(".premium-subscribe"),terms_of_accession:$("#terms_of_accession"),plans:$(".workshop-plans"),plans_buttons:{basic:$(".button.basic-plan"),plus:$(".button.plus-plan"),master:$(".button.master-plan")}},init:function(){r.default.route("workshop-premium-index",this.setActions.bind(this)),r.default.route("workshop-premium-cancel_subscribe",this.setActions.bind(this))},state:{plans:{}},setTracker:function(e){var t=new s.default(e);t.onClick(function(){t.track().then(function(){t.goToHref()})})},setActions:function(){this.setTracker(this.el.plan_master_know_more),this.setPlans();var e=this.el.premium_subscribe,t=new s.default(e);t.setIsBlankHref(!0),t.onClick(function(n){if(e.hasClass("disabled"))return n.preventDefault();t.track().then(function(){e.addClass("disabled")})}),this.el.terms_of_accession.on("change",function(){var t=$(this);e[(t.is(":checked")?"remove":"add")+"Class"]("disabled")})},refreshPlansButtonsText:function(){var e=this.el.plans_buttons,t={basic:{hasnt_plus:"Permanecer no básico",has_plus:"Atualizar dados"},plus:{active:"Permanecer no Plano Plus e garantir mais 12 meses gratuitos!",disabled:"Atualizar dados e habilitar Plano Plus"},master:{active:"Permanecer no Plano Master Digital",disabled:"Assinar agora!"}};e.basic.text(this.state.plans.plus?t.basic.has_plus:t.basic.hasnt_plus),e.plus.text(this.state.plans.plus?t.plus.active:t.plus.disabled),e.master&&e.master.text(this.state.plans.master?t.master.active:t.master.disabled)},setPlans:function(){this.state.workshopId=this.el.plans.data("workshop-id"),this.state.plans={basic:!0,plus:this.el.plans.data("is-plus"),master:this.el.plans.data("is-master")};var e=this.el.plans_buttons;this.refreshPlansButtonsText(),e.basic.on("click",this.setBasic.bind(this)),e.plus.on("click",this.setPlus.bind(this))},redirect:function(e){window.location=window.location.origin+"/"+e},setBasic:function(e){e.preventDefault(),this.state.plans.plus?(this.state.plans.plus=0,this.redirect("oficina/editar")):this.redirect("oficina/agendamentos")},setPlus:function(e){e.preventDefault(),this.state.plans.plus?this.redirect("oficina/agendamentos"):(this.state.plans.plus=1,this.redirect("oficina/editar"))},apiSetScheduling:function(e,t){var n=this,a=this.state.workshopId;return e.text("Carregando..."),new Promise(function(e,o){$.ajax({url:"/workshops/"+(t?"enable":"disable")+"-scheduling",data:{workshop_id:a},type:"post",dataType:"json",success:function(t){e(t)},error:function(e){o(e)},complete:function(){n.refreshPlansButtonsText()}})})}}},{"../modules/helpers":10,"../modules/tracker":17}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){var e=$(".small-home-state-select"),t=$(".small-home-city-select"),n=$(".small-home-neighborhood-input"),a=$(".small-home-cep-search-checkbox"),o=$(".small-home-cep-input"),r=$(".small-home-search-workshop-button"),i=$(".small-home-workshop-search-feedback"),s=$(".home-state-select"),c=$(".home-city-select"),l=$(".home-neighborhood-input"),d=$(".home-cep-search-checkbox"),u=$(".home-cep-input"),p=$(".home-search-workshop-button"),h=$(".home-workshop-search-feedback");s.on("change",function(){$.get("/",{getCity:1,stateId:s.val(),withWorkshops:!0},function(e){if(e.cities){var t=c[0].selectize;if(t)t.clear(),t.clearOptions(),t.load(function(t){t(Object.keys(e.cities).map(function(t){return{text:e.cities[t].text,value:e.cities[t].id}}))}),t.refreshOptions();else{var n="",a={};Object.keys(e.cities).forEach(function(t){a[e.cities[t].id]=e.cities[t].text}),n=Object.keys(a).map(function(e){return'<option value="'+a[e]+'">'+a[e]+"</option>"}),c.html(n)}}})}),e.on("change",function(){$.get("/",{getCity:1,stateId:e.val(),withWorkshops:!0},function(e){if(e.cities){var n=t[0].selectize;if(n)n.clear(),n.clearOptions(),n.load(function(t){t(Object.keys(e.cities).map(function(t){return{text:e.cities[t].text,value:e.cities[t].id}}))}),n.refreshOptions();else{var a="",o={};Object.keys(e.cities).forEach(function(t){o[e.cities[t].id]=e.cities[t].text}),a=Object.keys(o).map(function(e){return'<option value="'+o[e]+'">'+o[e]+"</option>"}),t.html(a)}}})}),d.on("change",function(){d.prop("checked")?(s.prop("disabled",!0),c.prop("disabled",!0),l.prop("disabled",!0),u.prop("disabled",!1)):(l.prop("disabled",!1),s.prop("disabled",!1),c.prop("disabled",!1),u.prop("disabled",!0))}),a.on("change",function(){a.prop("checked")?(e.prop("disabled",!0),t.prop("disabled",!0),n.prop("disabled",!0),o.prop("disabled",!1)):(n.prop("disabled",!1),e.prop("disabled",!1),t.prop("disabled",!1),o.prop("disabled",!0))}),p.on("click",function(){var e=document.querySelectorAll('input[name^="selected-services"]:checked'),t=Array.prototype.slice.call(e),n="";if(t.map(function(e){return n+=(n?",":"")+e.value}),h.html(""),h.removeClass("active"),n)"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){window.location=window.location.origin+"/oficinas/busca?lat="+e.coords.latitude+"&lng="+e.coords.longitude+"&service_id="+n}):window.location=window.location.origin+"/oficinas/busca?service_id="+n;else if(d.prop("checked"))window.location=window.location.origin+"/oficinas/busca?endereco="+u.val();else{if(!s.val()||!c.val())return h.addClass("active"),h.html("Insira estado e cidade ou o endereço para buscar");var a=[l.val(),c.find("option:selected").text(),s.find("option:selected").text()].join(" ");window.location=window.location.origin+"/oficinas/busca?endereco="+a+"&state_id="+s.val()+"&city_id="+c.val()}}),r.on("click",function(){var r=document.querySelectorAll('input[name^="small-selected-services"]:checked'),s=Array.prototype.slice.call(r),c="";if(s.map(function(e){return c+=(c?",":"")+e.value}),h.html(""),h.removeClass("active"),c)"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){window.location=window.location.origin+"/oficinas/busca?lat="+e.coords.latitude+"&lng="+e.coords.longitude+"&service_id="+c}):window.location=window.location.origin+"/oficinas/busca?service_id="+c;else if(a.prop("checked"))window.location=window.location.origin+"/oficinas/busca?endereco="+o.val();else{if(!e.val()||!t.val())return i.addClass("active"),i.html("Insira estado e cidade ou o endereço para buscar");var l=[n.val(),t.find("option:selected").text(),e.find("option:selected").text()].join(" ");window.location=window.location.origin+"/oficinas/busca?endereco="+l+"&state_id="+e.val()+"&city_id="+t.val()}})}}},{}],40:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../modules/helpers"),r=a(o),i=e("./workshop/search"),s=a(i),c=e("./workshop/show"),l=a(c),d=e("./workshop-search"),u=a(d),p=e("./workshop/favorite"),h=a(p);n.default={init:function(){r.default.route("workshops-search",s.default.init.bind(s.default)),r.default.route("workshops-search",u.default.init),r.default.route("workshops-show",l.default.init.bind(l.default)),r.default.route("workshops-show",h.default.init.bind(h.default))}}},{"../modules/helpers":10,"./workshop-search":39,"./workshop/favorite":43,"./workshop/search":48,"./workshop/show":49}],41:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t;this.el=(t={content_tab:$(".content-tab-1"),form:$(".content-tab-1 .scheduling-form"),schedule_start:$(".content-tab-1 .schedule-start"),scheduling_step_box:$(".content-tab-1 .scheduling-step-box"),header_section:$(".header-section"),user_is_registering:$('[name="user_is_registering"]'),calendar_box:$(".content-tab-1 .calendar-box"),car_id:$('.content-tab-1 select[name="scheduling[car_id]"]'),scheduling_date:$(".content-tab-1 .scheduling-date"),scheduling_hour:$(".content-tab-1 .scheduling-hour"),submit_scheduling:$(".go-finish-scheduling")},o(t,"scheduling_date",$(".content-tab-1 .scheduling-date")),o(t,"scheduling_hour",$(".content-tab-1 .scheduling-hour")),
o(t,"register_new_car",$(".content-tab-1 .register-new-car")),o(t,"user_accept_terms",$('.content-tab-1 [name="user[accept_terms]"]')),o(t,"login_form",$(".content-tab-1 .go-form--user-login.--component")),t),this.init(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var i=e("../../modules/helpers"),s=a(i),c=e("../../modules/select_load"),l=a(c);r.prototype.init=function(e){this.settings=e,"general"==this.settings.type&&(this.el.content_tab=$(".content-tab-2"),this.el.form=this.el.content_tab.find(".scheduling-form"),this.el.schedule_start=this.el.content_tab.find(".schedule-start"),this.el.login_form=this.el.content_tab.find(".go-form--user-login.--component"),this.el.scheduling_step_box=this.el.content_tab.find(".scheduling-step-box"),this.el.calendar_box=this.el.content_tab.find(".calendar-box"),this.el.car_id=this.el.content_tab.find('select[name="scheduling[car_id]"]'),this.el.user_is_registering=this.el.content_tab.find('[name="user_is_registering"]'),this.el.scheduling_date=this.el.content_tab.find(".scheduling-date"),this.el.submit_scheduling=this.el.content_tab.find(".go-finish-scheduling"),this.el.scheduling_hour=this.el.content_tab.find(".scheduling-hour"),this.el.scheduling_description=this.el.content_tab.find(".scheduling-description"),this.el.register_new_car=this.el.content_tab.find(".register-new-car"),this.el.user_accept_terms=this.el.content_tab.find('[name="user[accept_terms]"]')),this.step=1,this.setMasks(),this.setActions(),this.setCalendar(),this.setFormDataFromQuery({type:this.settings.type,query:location.search}),this.setUrlUpdater({type:this.settings.type})},r.prototype._parseQuery=function(e){var t={};return e&&"string"==typeof e&&-1!==e.indexOf("?")?(e=e.split("?")[1],e.split("&").forEach(function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}),t):t},r.prototype._toQuery=function(e){return Object.keys(e).map(function(t,n){return 0==n&&void 0===t||void 0===e[t]?"?l=1":void 0===t||void 0===e[t]?"":0==n?"?"+t+"="+e[t]:"&"+t+"="+e[t]}).join("")},r.prototype.setFormDataFromQuery=function(e){var t=this,n=e.type,a=e.query;a=this._parseQuery(a);var o=$(this.el.scheduling_hour),r=$(this.el.user_accept_terms),i=$(this.el.scheduling_description),s=$(this.el.schedule_start[0]);a.tipo&&$('[data-target=".content-tab-'+("geral"===a.tipo?2:1)+'"]').click(),a.termo&&r.prop("checked",parseInt(a.termo)),a.descricao&&i.val(a.descricao),a.data&&(this._disableDayFn(new Date(a.data))||(this.picker.loadedData=function(){t.picker.loadedData=null,a.hora&&o.val(a.hora);var e="general"===n?4:3;i.length&&e++,Object.keys(a).length===e&&s.click()},this.picker.setDate(a.data)))},r.prototype.setUrlUpdater=function(e){var t=e.type;this.updateLoginUrl({type:t}),this._setUserTermsUpdater({type:t}),this._setSelectUrlUpdater(),this._setTextareaUrlUpdater()},r.prototype._setUserTermsUpdater=function(e){var t=this,n=e.type,a=$(this.el.user_accept_terms);a.on("change",function(){var e=$(".content-tab-"+("general"===n?1:2)+' [name="user[accept_terms]"]');e.prop("checked")!==a.prop("checked")&&e.prop("checked",a.prop("checked")).trigger("change"),t.updateLoginUrl({userTerm:a.prop("checked")})})},r.prototype._setSelectUrlUpdater=function(){var e=this,t=$(this.el.scheduling_hour);t.on("change",function(){e.updateLoginUrl({hour:t.val()})})},r.prototype._setTextareaUrlUpdater=function(){var e=this,t=$(this.el.scheduling_description);t.on("keyup",function(){e.updateLoginUrl({description:t.val()})})},r.prototype.setMasks=function(){this.el.form.find("[data-mask]").each(function(){var e=null;switch($(this).data("mask")){case"date":e="99/99/9999";break;case"license-plate":e="AAA-9999";break;case"cpf":e="999.999.999-99";break;case"phone":e="(99) 9999-9999";break;case"cellphone":e="(99) 9999[9]-9999"}e&&$(this).inputmask(e)})},r.prototype.setActions=function(){var e=this;this.parsley=this.el.form.parsley(),this.el.schedule_start.on("click",this.checkCurrentStep.bind(this)),this.el.car_id.on("change",this.onChangeCarId.bind(this)),this.el.user_is_registering.on("change",function(t){e._updateSubmitButton(),e._toggleCarForm()}),this.selectLoad=new l.default({container:this.el.content_tab}),this.selectLoad.preload(this.el.form.find('select[name="car[car_manufacturer_id]"]'))},r.prototype._toggleCarForm=function(){"0"===this.el.user_is_registering.val()?this.el.register_new_car.hide():this.el.register_new_car.show()},r.prototype._updateSubmitButton=function(){"0"===this.el.user_is_registering.val()?this.el.submit_scheduling.attr("disabled","disabled"):this.el.submit_scheduling.removeAttr("disabled")},r.prototype._disableDayFn=function(e){var t=this.el.calendar_box.data("enabled-days"),n=this.el.calendar_box.data("disabled-dates"),a=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),t)||$.inArray(a,n)>-1},r.prototype.setCalendar=function(){var e=this,t=moment().add(1,"days").toDate(),n=moment().add(1,"year").toDate(),a=this.el.calendar_box.data("enabled-days"),o=this.el.calendar_box.data("disabled-dates");a||(a=[]),o||(o=[]),this.picker=new Pikaday({field:this.el.calendar_box.find(".datepicker")[0],format:"DD-MM-YYYY",container:this.el.calendar_box.find(".datepicker-container")[0],minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(t){return e._disableDayFn(t)},onSelect:function(t){e.updateLoginUrl({date:moment(t).format("DD-MM-YYYY")}),e.loadHours(t)}}),document.removeEventListener("keydown",this.picker._onKeyChange)},r.prototype.updateLoginUrl=function(e){var t=e.date,n=e.userTerm,a=e.description,o=e.hour,r=e.type;if(this.el.login_form.length){var i=($(this.el.login_form),this.el.login_form.data("url")),s=this._parseQuery(i);t&&(s.data=t,delete s.hora),r&&(s.tipo="general"===r?"geral":"checkup"),o&&(s.hora=o),console.log("userTerm",n),void 0!==n&&(console.log(n),s.termo=n?"1":"0"),a&&(s.descricao=encodeURI(a)),i=i.split("?")[0]+this._toQuery(s),this.el.login_form.data("url",i)}},r.prototype.checkCurrentStep=function(e){e.preventDefault(),this.validStep()&&this.submitForm()},r.prototype.submitForm=function(e){e&&e.preventDefault(),this.el.schedule_start.addClass("active").attr("disabled",!0),this.el.form.submit()},r.prototype.validStep=function(){var e=this.el.form.find('input[name="scheduling[date]"]').val();if(1==this.step){return this.parsley.validate("step-"+this.step)&&e}return this.parsley.validate("step-"+this.step)},r.prototype.nextStep=function(){++this.step,this.el.scheduling_step_box.removeClass("active"),this.el.scheduling_step_box.filter(".step-"+this.step).addClass("active"),this.scrollToTopStep()},r.prototype.goToStep=function(e){this.step=e,this.el.scheduling_step_box.removeClass("active"),this.el.scheduling_step_box.filter(".step-"+this.step).addClass("active"),this.scrollToTopStep()},r.prototype.scrollToTopStep=function(){var e=this.el.content_tab.closest(".scheduling-box").offset().top;e-=this.el.header_section.height()+15,s.default.scrollTo(e)},r.prototype.loadHours=function(e){var t=this,n=moment(e).format("YYYY-MM-DD"),a=this.el.form.find('select[name="scheduling[hour]"]');a.html("").append('<option value="">Carregando...</option>'),$.ajax({url:this.el.calendar_box.data("url-available-hours"),type:"post",data:{workshop_id:this.el.calendar_box.data("workshop-id"),date:n},dataType:"json",success:function(e){if(e.success){a.html("").append('<option value="">Horários</option>');for(var n in e.data){var o=Mustache.render('<option value="{{hour}}">{{hour}}</option>',{hour:e.data[n]});a.append(o)}"function"==typeof t.picker.loadedData&&t.picker.loadedData()}else a.html("").append("<option>"+e.message+"</option>")},error:s.default.onError})},r.prototype.onChangeCarId=function(e){var t=["car[car_manufacturer_id]","car[car_model_id]","car[car_version_id]","car[car_version_year_id]","car[license_plate]","car[car_color_id]","car[km]"];if(""!=this.el.car_id.val()){for(var n in t)this.el.form.find('[name="'+t[n]+'"]').removeAttr("required").attr("disabled",!0);this.el.register_new_car.addClass("hide")}else{for(var a in t)this.el.form.find('[name="'+t[a]+'"]').attr("required",!0).attr("disabled",!1);this.el.register_new_car.removeClass("hide")}this.parsley.validate()},r.prototype.ajaxResult=function(e){if(e.success){var t=this.el.form.find('input[name="scheduling[date]"]').val(),n=this.el.form.find('select[name="scheduling[hour]"]').val();t=moment(t).format("DD/MM/YYYY"),this.el.scheduling_date.html(t),this.el.scheduling_hour.html(n)}else if(this.el.schedule_start.removeClass("active").removeAttr("disabled"),e.errors){var a=null;for(var o in e.errors){-1!==$.inArray(o,["user","car"])?a=2:-1!==$.inArray(o,["scheduling"])&&(a||(a=1));for(var r in e.errors[o]){var i='[name="'+o+"["+r+']"]',s=this.el.form.find(i),c=$("<ul>",{class:"parsley-errors-list filled"});for(var l in e.errors[o][r])c.append($("<li>",{class:"parsley-required",text:e.errors[o][r][l]}));s.addClass("parsley-error"),s.closest("div").find("ul").remove(),s.after(c)}}a&&this.goToStep(a)}}},{"../../modules/helpers":10,"../../modules/select_load":14}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{form:$(".form-comment"),button:$(".form-comment button"),ajax_result:$(".form-comment .ajax-result")},init:function(){this.el.form.parsley(),this.el.form.on("submit",this.sendComment.bind(this))},sendComment:function(e){var t=this;if(e.preventDefault(),this.el.form.parsley().isValid()){var n=this.el.form.data("logo");this.disableForm(),$.ajax({url:this.el.form.attr("action"),type:this.el.form.attr("method"),data:this.el.form.serialize(),success:function(e){e.success&&t.el.form[0].reset();var a=e.success?"success":"error";t.showResult('\n            <div class="logo"><div class="logo--wrapper"><img src="'+n+'"/></div></div>\n            <div class="message">'+e.message+"</div>\n          ",a),t.enableForm()},error:function(){t.enableForm(),t.showResult("Não foi possível completar sua requisição, tente mais tarde.","error")}})}},disableForm:function(){this.hideResult(),this.el.button.addClass("disabled sendind").attr("disabled",!0)},enableForm:function(){this.el.button.removeClass("disabled sendind").removeAttr("disabled")},hideResult:function(){this.el.ajax_result.removeClass("success error active")},showResult:function(e,t){var n=this.el.ajax_result;n.modal({modalClass:"modal active "+t,escapeClose:!0,clickClose:!0}),n.find(".modal-body").html(e)}}},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={const:{ADD_FAVORITE:"Adicionar aos favoritos",FAVORITE:"Favorita!",ICON_LIKE:"/img/svg/like.svg",ICON_LIKED:"/img/svg/liked.svg"},el:{favorite_box:$(".favorite-box"),favorite_img:$(".favorite-img"),label:null},state:{isFavorite:!1},api:{add:"/user-favorites/add",remove:"/user-favorites/delete"},init:function(){this.el.label=this.el.favorite_box.find(".add-favorite"),this.state.isFavorite=this.getIsFavorite(),this.changeTextFromStatus(),this.hookEvents(),this.addFavoriteBtnListener()},hookEvents:function(){this.el.favorite_box.on("click",this.toggleFavorite.bind(this))},changeTextFromStatus:function(){this.state.isFavorite?(this.el.label.text(this.const.FAVORITE),this.el.favorite_img&&this.el.favorite_img.attr("src",this.const.ICON_LIKED)):(this.el.label.text(this.const.ADD_FAVORITE),this.el.favorite_img&&this.el.favorite_img.attr("src",this.const.ICON_LIKE))},changeStatus:function(e){this.state.isFavorite=e,this.el.favorite_box.data("isFavorite",e?"1":"0"),this.el.favorite_box.attr("data-is-favorite",e?"1":"0"),this.updateFavoriteBoxState()},updateFavoriteBoxState:function(){this.state.isFavorite?this.el.favorite_box.addClass("active"):this.el.favorite_box.removeClass("active")},toggleFavorite:function(){this.sendRequest(!this.state.isFavorite,this.changeTextFromStatus.bind(this))},getIsFavorite:function(){return"1"==this.el.favorite_box.data("isFavorite")},getUserId:function(){return this.el.favorite_box.data("userId")},getWorkshopId:function(){return this.el.favorite_box.data("workshopId")},sendRequest:function(e,t){var n=this;this.changeStatus(e),$.ajax({url:e?this.api.add:this.api.remove,method:"POST",dataType:"json",data:{user_id:n.getUserId(),workshop_id:n.getWorkshopId(),is_favorite:e?1:0},success:function(e){t.call(n,!0,e)},error:function(){t.call(n,!1)}})},addFavoriteBtnListener:function(){var e=this;document.querySelectorAll(".workshop-card-like-btn").forEach(function(t){t.addEventListener("click",function(n){return e.handleFavoriteClick(n.target,$(t).data("userId"),$(t).data("workshopId"))})})},handleFavoriteClick:function(e,t,n){console.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAA");var a=e;"IMG"===e.tagName&&(a=e.parentElement);var o=a.classList.contains("favorited");this.handleFavoriteData(n,a,o,t)},handleFavoriteData:function(e,t,n,a){$.ajax({url:n?"/user-favorites/delete":"/user-favorites/add",method:"POST",dataType:"json",data:{user_id:a,workshop_id:e,is_favorite:n?0:1},success:function(e){t.classList.toggle("favorited")},error:function(){alert("erro: Por Favor, tente novamente")}})}}},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){var n=void 0;if(e.classList.contains("selected")&&(n=!0),"filters"===e.id)return c.classList.remove("selected"),void e.classList.toggle("selected");"order"===e.id&&i.classList.remove("selected"),c.classList.remove("selected"),t.classList.remove("selected"),o.classList.remove("selected"),n||e.classList.add("selected")}var t=document.querySelector("#filter-services"),n=document.querySelector("#filter-services-btn"),a=document.querySelector("#filter-services-btn-two"),o=document.querySelector("#filter-workshops"),r=document.querySelector("#filter-workshops-btn"),i=document.querySelector("#filters"),s=document.querySelector("#filter-filters-btn"),c=document.querySelector("#order"),l=document.querySelector("#order-btn");n.addEventListener("click",function(){return e(t)}),a.addEventListener("click",function(){return e(t)}),r.addEventListener("click",function(){return e(o)}),s.addEventListener("click",function(){return e(i)}),l.addEventListener("click",function(){return e(c)});var d=document.querySelector("#show-map-btn"),u=document.querySelector(".map-box");d.addEventListener("click",function(){u.classList.toggle("active"),d.classList.toggle("close"),d.classList.contains("close")?d.innerHTML="X Fechar mapa":d.innerHTML="Ver mapa"})}}},{}],45:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.default={init:function(){if(document.querySelector(".workshop-register-section")){var e=document.querySelector("#step-one").dataset.isEdit,t=function(){function e(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})}function n(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n}function o(){var e=document.querySelector(".step-container.active"),t=e.querySelectorAll("button"),n=e.querySelector(".steps-spinner");t.forEach(function(e){return e.classList.toggle("disabled")}),n.classList.toggle("active")}function r(e){var t=document.querySelector("#steps-edit-message"),n=t.querySelector("p");t.classList.add("active"),e&&(t.classList.remove("error-edit-message"),n.textContent="Os dados foram atualizados com sucesso"),e||(t.classList.add("error-edit-message"),n.textContent="Ocorreu um erro, por favor tente novamente!"),window.scrollTo({top:0,behavior:"smooth"})}function i(e,t){b(t);var n=[];if(e.forEach(function(e){e.cnpj&&h(e,n),e.cpf&&u(e,n),e.date&&f(e,n),e.isTrue&&c(e,n),e.notEmpty&&s(e,n),e.toBe&&d(e,n),e.img&&l(e,n)}),n.length>0){n.forEach(function(e){return _(e.inputName,e.message)});var a=document.querySelector(".step-container.active .error").offsetTop;return window.scrollTo({top:a-300,behavior:"smooth"}),!1}return!0}function s(e,t){0===e.value.length&&g("Este campo não pode estar vazio",e.inputName,t)}function c(e,t){e.value||g("Este campo é obrigatório",e.inputName,t)}function l(e,t){var n=e.value.size;["image/jpeg","image/png"].includes(e.value.type)||g("A imagem deve estar nos formatos .JPG, .JPEG, ou .PNG",e.inputName,t),n>5242880&&g("A imagem deve ser menor que 5mb",e.inputName,t)}function d(e,t){e.value!==e.toBe&&g("Este campo é obrigatório",e.inputName,t)}function u(e,t){p(e.value)||g("CPF inválido",e.inputName,t)}function p(e){var t,n;if(t=0,"00000000000"==e)return!1;for(var a=1;a<=9;a++)t+=parseInt(e.substring(a-1,a))*(11-a);if(n=10*t%11,10!=n&&11!=n||(n=0),n!=parseInt(e.substring(9,10)))return!1;t=0;for(var a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return n=10*t%11,10!=n&&11!=n||(n=0),n==parseInt(e.substring(10,11))}function h(e,t){m(e.value)||g("CNPJ inválido",e.inputName,t)}function m(e){if(!e)return!1;var t="string"==typeof e;if(!(t||Number.isInteger(e)||Array.isArray(e)))return!1;if(t){if(e.length>18)return!1;var n=/^\d{14}$/.test(e),o=/^\d{2}.\d{3}.\d{3}\/\d{4}-\d{2}$/.test(e);if(!n&&!o)return!1}var r=e.toString().match(/\d/g),i=Array.isArray(r)?r.map(Number):[];if(14!==i.length)return!1;if(1===[].concat(a(new Set(i))).length)return!1;var s=function(e){for(var t=i.slice(0,e),n=e-7,a=0,o=e;o>=1;o--)a+=t[e-o]*n--,n<2&&(n=9);var r=11-a%11;return r>9?0:r},c=i.slice(12);return s(12)===c[0]&&s(13)===c[1]}function f(e,t){v(e.value)||g("Data inválida",e.inputName,t)}function v(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]}function g(e,t,n){var a={inputName:t,message:e};n.push(a)}function _(e,t){var n=void 0;(n=document.querySelector("#step-input-"+e))||(n=document.querySelector("#"+e));var a=n.querySelector(".step-input-error-message");n.classList.add("error"),a.textContent=t}function b(e){e.querySelectorAll(".error").forEach(function(e){return e.classList.remove("error")})}function w(e){var t=document.querySelector("#"+e),n=t.querySelectorAll(".multi-checkbox"),a=void 0;return n.forEach(function(e){e.checked&&(a=e.value)}),"false"===a?0:"true"===a?1:""}function y(e){var t=document.querySelector("#"+e),n=t.querySelectorAll(".row-checkbox"),a=[];return n.forEach(function(e){if(e.checked){if(a.includes(e.value))return;a.push(e.value)}}),a}function k(e){var t=document.querySelector("#"+e),n=t.querySelectorAll(".list-checkbox"),a=[];return n.forEach(function(e){if(e.checked){if(a.includes(e.value))return;a.push(e.value)}}),a}function S(e,t){var n=document.querySelector("#"+e),a=n.querySelector(".checkbox-time-input").checked,o=n.querySelector(".checkbox-time-select-start").value,r=n.querySelector(".checkbox-time-select-finish").value,i={};return i["works_on_"+t]=a?1:0,a&&(i["start_worktime_on_"+t]=o,i["end_worktime_on_"+t]=r),i}function C(e,n,a){var o=document.querySelector("#"+a);if(t.getMultiCheckBoxValue(e)===n)return o.classList.remove("disabled");o.classList.add("disabled")}function x(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=document.querySelector("#"+e);n.classList.toggle("active"),t&&n.focus()}function E(e){var t=e.split(" ");return{phoneNumber:t[1],phoneAreaCode:t[0].replace(/[{()}]/g,"")}}function q(e){var t=e.split("/");return t[1]+"/"+t[0]+"/"+t[2]}var L={};return{getFormValues:n,validateForm:i,addInputError:_,getMultiCheckBoxValue:w,getRowCheckBoxValues:y,getTimeCheckBoxValue:S,getListCheckBoxValues:k,toggleSubInputsApperance:C,makeRequest:e,toggleRowCheckBoxOtherInput:x,splitPhone:E,formatDate:q,displayEditMessage:r,toggleStepEditSpinner:o,masks:{cpf:function(e){return e.replace(/\D+/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},cnpj:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},phone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephonePhone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})-(\d)(\d{4})/,"$1$2-$3").replace(/(-\d{4})\d+?$/,"$1")},cep:function(e){return e.replace(/\D+/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1")},date:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1")}},requestData:L}}(),n=function(){function t(){if(e){var t=document.querySelector("#workshop-finish-register-btn");t&&t.addEventListener("click",a),document.querySelector("#workshop-edit-selector-one").addEventListener("click",function(){return o(0)}),document.querySelector("#workshop-edit-selector-two").addEventListener("click",function(){return o(1)}),document.querySelector("#workshop-edit-selector-three").addEventListener("click",function(){return o(2)}),document.querySelector("#workshop-edit-selector-four").addEventListener("click",function(){return o(3)}),document.querySelector("#workshop-edit-selector-five").addEventListener("click",function(){return o(4)}),document.querySelector("#workshop-edit-selector-six").addEventListener("click",function(){return o(5)}),document.querySelector("#workshop-edit-selector-seven").addEventListener("click",function(){return o(6)})}e&&document.querySelector("#step-edit-back-btn").addEventListener("click",n),e||c.previousStepBtn.addEventListener("click",function(){return r("previous")})}function n(){document.querySelector(".workshop-edit-steps-selector-section").classList.remove("disabled"),c.stepsSection.classList.add("disabled")}function a(){var e=document.querySelector(".workshop-edit-steps-selector-section");document.querySelector(".workshop-finish-register-section").classList.remove("active"),e.classList.remove("disabled")}function o(e){var t=document.querySelector(".workshop-edit-steps-selector-section");document.querySelector(".step-container.active").classList.remove("active"),i(e),c.stepsSection.classList.remove("disabled"),t.classList.add("disabled"),c.steps[e].classList.add("active"),window.scrollTo({top:0,behavior:"smooth"})}function r(t){var n=document.querySelector(".step-container.active"),a=c.steps.indexOf(n),o=void 0;if("next"===t&&(o=a+1),"previous"===t&&(o=a-1),-1===o)return window.location.href="/";c.steps[a].classList.remove("active"),c.steps[o].classList.add("active"),window.scrollTo({top:0,behavior:"smooth"}),e||s(o),e&&i(o)}function i(e){var t=document.querySelector("#step-edit-title"),n={0:"Sobre a oficina",1:"Dados legais",2:"Sobre o proprietário",3:"Atendimento ao cliente",4:"Estrutura",5:"Agendamento",6:"Fotos oficina"};t.textContent=n[e]}function s(e){if(7!==e){for(var t={0:"01 sobre a oficina",1:"02 dados legais",2:"03 sobre o proprietário",3:"04 atendimento ao cliente",4:"05 estrutura",5:"06 agendamento",6:"07 fotos oficina"},n=0;n<c.headerItems.length;n++)c.headerItems[n].textContent=[n+1],c.headerItems[n].classList.remove("active");c.headerItems[e].textContent=t[e],c.headerItems[e].classList.add("active")}else{c.lastHeaderItem.classList.add("active");for(var n=0;n<c.headerItems.length;n++)c.headerItems[n].style.display="none",c.previousStepBtn.style.display="none"}}var c={steps:Array.from(document.querySelectorAll(".step-container")),headerItems:Array.from(document.querySelectorAll(".step-header-item")),previousStepBtn:document.querySelector("#step-previous-step-btn"),lastHeaderItem:document.querySelector(".step-header-item-last"),stepsSection:document.querySelector(".workshop-register-section")};return function(){t()}(),{changeStep:r}}();(function(){function a(){e&&h.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),h.stepForm.querySelectorAll("input").forEach(function(e){var n=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=t.masks[n](e.target.value)})}),h.stepForm.addEventListener("submit",o),h.stateSelect.addEventListener("change",u),h.zipcodeInput.addEventListener("input",function(e){return l(e.target)})}function o(n){n.preventDefault();var a=t.getFormValues(h.stepForm),o=h.contactCheckBox.checked,r=a.address,s=a.address_complement,c=a.address_number,l=a.city_id,d=a.document,u=a.email,p=a.facebook_publish_url,m=a.instagram_publish_url,f=a.name,v=a.neighborhood,g=a.password,_=a.password_check,b=a.phone,w=a.phone_has_whatsapp,y=a.site,k=a.state_id,S=a.zipcode,C=[{value:r,inputName:"address",notEmpty:!0},{value:c,inputName:"address-number",notEmpty:!0},{value:s,inputName:"complement",notEmpty:!1},{value:l,inputName:"city",notEmpty:!0},{value:d,inputName:"document",notEmpty:!0,cnpj:!0},{value:u,inputName:"email",notEmpty:!0},{value:p,inputName:"facebook",notEmpty:!1},{value:m,inputName:"instagram",notEmpty:!1},{value:f,inputName:"name",notEmpty:!0},{value:v,inputName:"neighborhood",notEmpty:!0},{value:g,inputName:"password",notEmpty:!0},{value:_,inputName:"check-password",notEmpty:!0},{value:b,inputName:"phone",notEmpty:!0},{value:w,inputName:"phone-has-whatsapp",notEmpty:!0},{value:y,inputName:"site",notEmpty:!1},{value:k,inputName:"state",notEmpty:!0},{value:S,inputName:"zipcode",notEmpty:!0},{value:o,inputName:"contact-authorized",isTrue:!0}],x=t.validateForm(C,h.stepForm);if(_!==g)return void t.addInputError("check-password","as senhas são diferentes");if(x){var $=t.splitPhone(b),E={address:r,address_number:c,address_complement:s,city_id:l,document:d,email:u,facebook_publish_url:p,instagram_publish_url:m,name:f,neighborhood:v,password:g,password_check:_,phone:$.phoneNumber,phone_area_code:$.phoneAreaCode,phone_has_whatsapp:w,site:y,state_id:k,zipcode:S,contact_authorized:o?1:0};if((m.length>0||p.length>0)&&(E.workshop_has_social_media=1),e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",E).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.makeRequest("/workshops/document-exists","post",{document:d}).then(function(e){if(e.result.success){if(e.result.exists)return t.addInputError("document","O CNPJ informado já existe");t.requestData.stepOne=E,i()}}).catch(function(e){return console.log(e)})}}function i(){var e={is_correspondence_address:1,workshop_has_interest_scheduling:0,terms_of_accession:1,company_name:t.requestData.stepOne.name,keep_stock:0,month_serviced_cars:0};Object.entries(t.requestData).forEach(function(t){var n=r(t,2),a=(n[0],n[1]);Object.entries(a).forEach(function(t){var n=r(t,2),a=n[0],o=n[1];e[a]=o})}),s(),t.makeRequest("workshops/register","post",e).then(function(e){if(e.data.id)return c(),n.changeStep("next");c(),h.submitBtnErrorMessage.classList.add("active"),console.log(e)}).catch(function(e){c(),h.submitBtnErrorMessage.classList.add("active"),console.log(e)})}function s(){h.submitBtn.style.display="none",h.stepSpinner.classList.add("active")}function c(){h.submitBtn.style.display="block",h.stepSpinner.classList.remove("active")}function l(e){if(9===e.value.length){var n=e.value;t.makeRequest("https://viacep.com.br/ws/"+n+"/json/","get").then(function(e){e.erro||d(e)}).catch(function(e){return console.log(e)})}}function d(e){h.addressInput.value=e.logradouro,h.neighborhoodInput.value=e.bairro,h.stateOptions.forEach(function(t){var n=t.text.split(" ");n[n.length-1].replace(/[{()}]/g,"")===e.uf&&(t.selected="selected")}),u(null,e.localidade)}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=h.stateSelect.value,o={id:a};t.makeRequest("/Cities/getStateCities","post",o).then(function(e){return p(e,n)}).catch(function(e){return console.log(e)})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h.citySelect.querySelectorAll(".step-input-city-select-option").forEach(function(e){return e.remove()}),e.forEach(function(e){t&&e.name;var n=document.createElement("option");n.classList.add("step-input-city-select-option"),n.innerText=e.name,n.value=e.id,t===e.name&&(n.selected=!0),h.citySelect.appendChild(n)})}var h={stepForm:document.querySelector("#step-one-form"),contactCheckBox:document.querySelector("#step-one-checkbox"),stateSelect:document.querySelector("#step-input-state-select"),citySelect:document.querySelector("#step-input-city-select"),zipcodeInput:document.querySelector("#step-input-zipcode input"),addressInput:document.querySelector("#step-input-address input"),neighborhoodInput:document.querySelector("#step-input-neighborhood input"),stateOptions:document.querySelectorAll("#step-input-state-select option"),stepSpinner:document.querySelector("#steps-spinner-first"),submitBtn:document.querySelector("#submit-btn-first"),submitBtnErrorMessage:document.querySelector("#step-one-submit-error-message")};!function(){e&&u(),a()}()})(),function(){function a(){e&&r.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),r.stepForm.addEventListener("submit",o),r.stepForm.querySelectorAll("input").forEach(function(e){var n=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=t.masks[n](e.target.value)})})}function o(a){a.preventDefault();var o=t.getFormValues(r.stepForm),i=o.company_name,s=o.foundation_date,c=o.state_inscription,l=t.formatDate(s),d=[{value:i,inputName:"company-name",notEmpty:!0},{value:l,inputName:"foundation-date",notEmpty:!0,date:!0},{value:c,inputName:"state-inscription"}];if(t.validateForm(d,r.stepForm)){var u={company_name:i,foundation_date:s,state_inscription:c};if(e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",u).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.requestData.stepTwoData=u,n.changeStep("next")}}var r={stepForm:document.querySelector("#step-two-form")};!function(){a()}()}(),function(){function a(){e&&i.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),i.howKnewOtherCheckbox.addEventListener("click",function(){i.howKnewOtherContainer.classList.add("active")}),i.stepForm.addEventListener("submit",o),i.otherMechanicsCheckbox.addEventListener("change",function(){return t.toggleRowCheckBoxOtherInput("mechanics-courses-other-input")}),i.isOwnerMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",r)}),i.contactRoleSelect.addEventListener("change",function(){if("Outro"==i.contactRoleSelect.value)return i.contactRoleOtherContainer.classList.remove("disabled")
;i.contactRoleOtherContainer.classList.add("disabled")}),i.mechanicsMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-mechanics-course",1,"step-input-mechanics-courses")})}),i.stepForm.querySelectorAll("input").forEach(function(e){var n=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=t.masks[n](e.target.value)})}),i.receivesNewsLetterMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-receives-oficina-brasil",0,"step-input-accept-newsletter")})})}function o(a){a.preventDefault();var o=t.getFormValues(i.stepForm),r=t.getMultiCheckBoxValue("step-input-receives-oficina-brasil"),s=t.getMultiCheckBoxValue("step-input-accept-newsletter"),c=t.getRowCheckBoxValues("step-input-how-knew-about"),l=t.getMultiCheckBoxValue("step-input-know-amigo-bom-de-peça"),d=t.getMultiCheckBoxValue("step-input-is-owner"),u=t.getMultiCheckBoxValue("step-input-mechanics-course"),p=t.getRowCheckBoxValues("step-input-mechanics-courses"),h="";1===d&&(h="Proprietário"),0===d&&(h=o.contact_role);var m=o.owner_name,f=o.owner_gender,v=o.owner_birthday,g=o.owner_document,_=o.owner_phone,b=o.owner_phone_has_whatsapp,w=o.owner_email,y=o.contact_name,k=o.contact_email,S=o.contact_role_other,C=o.how_knew_about_other,x=t.formatDate(v),$=g.replace(/-/g,"").replace(/\./g,"").trim(),E=[{value:m,inputName:"owner-name",notEmpty:!0},{value:x,inputName:"owner-birthday",notEmpty:!0,date:!0},{value:_,inputName:"owner-phone",notEmpty:!0},{value:b,inputName:"owner-phone-has-whatsapp",notEmpty:!0},{value:$,inputName:"owner-document",notEmpty:!0,cpf:!0},{value:w,inputName:"owner-email",notEmpty:!0},{value:r,inputName:"receives-oficina-brasil",notEmpty:!0},{value:c,inputName:"how-knew-about",notEmpty:!0},{value:l,inputName:"know-amigo-bom-de-peça",notEmpty:!0},{value:d,inputName:"is-owner",notEmpty:!0},{value:h,inputName:"contact-role",notEmpty:!0}],q=[{value:u,inputName:"mechanics-course",notEmpty:!0},{value:y,inputName:"contact-name",notEmpty:!0},{value:k,inputName:"contact-email",notEmpty:!0}];if(i.howKnewOtherCheckbox.checked&&E.push({value:C,inputName:"how-knew-other",notEmpty:!0}),"Outro"==i.contactRoleSelect.value&&q.push({value:S,inputName:"contact-role-other",notEmpty:!0}),0===d&&(E=E.concat(q)),0===d&&1==u&&E.push({value:p,inputName:"mechanics-courses",notEmpty:!0}),0===r&&E.push({value:s,inputName:"accept-newsletter",notEmpty:!0}),t.validateForm(E,i.stepForm)){var L=t.splitPhone(_),M={owner_name:m,owner_birthday:v,owner_document:g,owner_phone_area_code:L.phoneAreaCode,owner_phone:L.phoneNumber,owner_email:w,know_amigo_bom_de_peca:l,how_knew_about:c[0],workshop_receives_newsletter:r,contact_role:h,owner_phone_has_whatsapp:b};if(f.length>0?M.owner_gender=f:M.owner_gender="not-defined",0===d&&(M.mechanics_course=u,M.contact_name=y,M.contact_email=k),i.howKnewOtherCheckbox.checked&&(M.how_knew_about_other=C),"Outro"==i.contactRoleSelect.value&&(M.contact_role_other=S),0===r&&(M.workshop_accept_newsletter=s),0===d&&1==u&&(M.senai=0,M.federal=0,M.state_technological_education_center=0,M.other_institution="",p.includes("senai")&&(M.senai=1),p.includes("federal")&&(M.federal=1),p.includes("state_technological_education_center")&&(M.state_technological_education_center=1),p.includes("other"))){var D=document.querySelector("#mechanics-courses-other-input");D.value.length>0&&(M.other_institution=D.value)}if(e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",M).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.requestData.stepThreeData=M,n.changeStep("next")}}function r(){var e=t.getMultiCheckBoxValue("step-input-is-owner");0===e&&i.employeeInputsContainer.classList.add("active"),1===e&&i.employeeInputsContainer.classList.remove("active")}var i={stepForm:document.querySelector("#step-three-form"),isOwnerMultiCheckBox:document.querySelector("#step-input-is-owner"),employeeInputsContainer:document.querySelector("#step-three-employee-inputs"),mechanicsMultiCheckBox:document.querySelector("#step-input-mechanics-course"),otherMechanicsCheckbox:document.querySelector("#mechanics-courses-other"),receivesNewsLetterMultiCheckBox:document.querySelector("#step-input-receives-oficina-brasil"),contactRoleSelect:document.querySelector("#step-input-contact-role select"),contactRoleOtherContainer:document.querySelector("#step-input-contact-role-other"),howKnewOtherCheckbox:document.querySelector("#how-knew-other"),howKnewOtherContainer:document.querySelector("#step-input-how-knew-other")};!function(){e&&(r(),t.toggleSubInputsApperance("step-input-receives-oficina-brasil",0,"step-input-accept-newsletter"),t.toggleSubInputsApperance("step-input-mechanics-course",1,"step-input-mechanics-courses"),i.otherMechanicsCheckbox.checked&&t.toggleRowCheckBoxOtherInput("mechanics-courses-other-input",!1),"Outro"==i.contactRoleSelect.value&&i.contactRoleOtherContainer.classList.remove("disabled"),i.howKnewOtherContainer.checked&&i.howKnewOtherContainer.classList.add("active")),a()}()}(),function(){function a(){e&&l.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),l.workshopPaymentOtherCheckBox.addEventListener("change",function(){if(l.workshopPaymentOtherCheckBox.checked)return l.workshopPaymentOtherContainer.classList.add("active");l.workshopPaymentOtherContainer.classList.remove("active")}),l.acceptFleetCarsMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-accept-fleet-cars",0,"step-input-interest-fleet-cars")}),e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-accept-fleet-cars",1,"step-input-accepted-fleets")})}),l.insuranceMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-third-party-insurance",1,"step-input-accepted-third-party-insurances")})}),l.useDebitCardsMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",r)}),l.useCreditCardsMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",r)}),l.stepForm.addEventListener("submit",c),l.timeCheckBoxButtons.forEach(function(e){e.addEventListener("click",function(t){return i(t,e)})})}function r(){var e=t.getMultiCheckBoxValue("step-input-use-credicards"),n=t.getMultiCheckBoxValue("step-input-use-debitcards"),a=document.querySelector("#step-input-workshop-payments");if(1===e||1===n)return a.classList.remove("disabled");a.classList.add("disabled")}function i(e,t){var n=t.parentElement;if(!n.querySelector(".checkbox-time-input").checked)return n.classList.remove("active");n.classList.add("active")}function s(e){var t=document.querySelector("#"+e);return{start_worktime:t.querySelector(".checkbox-time-select-start").value,end_worktime:t.querySelector(".checkbox-time-select-finish").value}}function c(a){a.preventDefault();var r=t.getFormValues(l.stepForm),i=s("step-input-worktime"),c=t.getTimeCheckBoxValue("step-input-saturday","saturdays"),d=t.getTimeCheckBoxValue("step-input-sunday","sundays"),u=t.getTimeCheckBoxValue("step-input-lunch","lunch"),p=t.getMultiCheckBoxValue("step-input-third-party-insurance"),h=t.getMultiCheckBoxValue("step-input-use-pix"),m=t.getMultiCheckBoxValue("step-input-use-credicards"),f=t.getMultiCheckBoxValue("step-input-use-debitcards"),v=t.getMultiCheckBoxValue("step-input-predated-check"),g=t.getMultiCheckBoxValue("step-input-accept-imported-cars"),_=t.getMultiCheckBoxValue("step-input-offers-free-checkup"),b=t.getMultiCheckBoxValue("step-input-offers-winch"),w=t.getMultiCheckBoxValue("step-input-offers-take-bring"),y=t.getMultiCheckBoxValue("step-input-lifeguard-service"),k=t.getMultiCheckBoxValue("step-input-accept-fleet-cars"),S=t.getMultiCheckBoxValue("step-input-interest-fleet-cars"),C=t.getRowCheckBoxValues("step-input-workshop-payments"),x=t.getRowCheckBoxValues("step-input-workshop-conveniences"),$=(r.offers_financing_name,r.accepted_fleets),E=r.accepted_third_party_insurances,q=r.workshop_payments_other,L=[{value:p,inputName:"third-party-insurance",notEmpty:!0},{value:h,inputName:"use-pix",notEmpty:!0},{value:m,inputName:"use-credicards",notEmpty:!0},{value:f,inputName:"use-debitcards",notEmpty:!0},{value:x,inputName:"workshop-conveniences",notEmpty:!0},{value:v,inputName:"predated-check"},{value:g,inputName:"accept-imported-cars",notEmpty:!0},{value:_,inputName:"offers-free-checkup",notEmpty:!0},{value:b,inputName:"offers-winch",notEmpty:!0},{value:w,inputName:"offers-take-bring",notEmpty:!0},{value:y,inputName:"lifeguard-service",notEmpty:!0},{value:k,inputName:"accept-fleet-cars",notEmpty:!0}];1!==m&&1!==f||(L.push({value:C,inputName:"workshop-payments",notEmpty:!0}),l.workshopPaymentOtherCheckBox.checked&&L.push({value:q,inputName:"workshop-payments-other",notEmpty:!0})),0===k&&L.push({value:S,inputName:"interest-fleet-cars",notEmpty:!0}),1===k&&L.push({value:$,inputName:"accepted-fleets",notEmpty:!0}),1===p&&L.push({value:E,inputName:"accepted-third-party-insurances",notEmpty:!0});var M=t.validateForm(L,l.stepForm),D=0,I=!1;if(1===m&&1===f&&(D=1,I="both"),1===m&&0===f&&(D=1,I="credit"),0===m&&1===f&&(D=1,I="debit"),M){var F=o({},i,c,d,{stop_works_on_lunch:u.works_on_lunch,start_lunchtime:u.start_worktime_on_lunch,end_lunchtime:u.end_worktime_on_lunch,workshop_has_third_party_insurance:p,workshop_use_pix:h,workshop_use_credicards:D,workshop_conveniences:x,predated_check:v,workshop_accepts_imported_car:g,workshop_offers_free_checkup:_,workshop_offers_winch:b,workshop_offers_take_and_bring:w,workshop_has_lifeguard_service:y,workshop_accept_fleet_cars:k,internet:0,checkup_weekday_saturday:0});if(I&&(F.workshop_credicard_types=I),c.works_on_saturdays&&(F.checkup_weekday_saturday=1),x.includes("wifi")&&(F.internet=1),x.includes("waiting_seats")&&(F.waiting_seats=1),x.includes("bathroom")&&(F.bathroom=1),x.includes("coffe")&&(F.coffe=1),x.includes("water")&&(F.water=1),0===k&&(F.workshop_has_interest_accept_fleet_cars=S),1===k&&(F.accepted_fleets=$),1===p&&(F.accepted_third_party_insurances=E),1===D&&(F.workshop_payments={_ids:C}),1!==m&&1!==f||l.workshopPaymentOtherCheckBox.checked&&(F.workshop_payments_other=q),e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",F).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.requestData.stepFourData=F,n.changeStep("next")}}var l={stepForm:document.querySelector("#step-four-form"),acceptFleetCarsMultiCheckBox:document.querySelector("#step-input-accept-fleet-cars"),insuranceMultiCheckBox:document.querySelector("#step-input-third-party-insurance"),useDebitCardsMultiCheckBox:document.querySelector("#step-input-use-debitcards"),useCreditCardsMultiCheckBox:document.querySelector("#step-input-use-credicards"),timeCheckBoxButtons:document.querySelectorAll(".checkbox-time-input-container"),cardsCounter:0,workshopPaymentOtherCheckBox:document.querySelector("#workshop-payments-Outros"),workshopPaymentOtherContainer:document.querySelector("#step-input-workshop-payments-other")};!function(){e&&(t.toggleSubInputsApperance("step-input-accept-fleet-cars",0,"step-input-interest-fleet-cars"),t.toggleSubInputsApperance("step-input-accept-fleet-cars",1,"step-input-accepted-fleets"),t.toggleSubInputsApperance("step-input-third-party-insurance",1,"step-input-accepted-third-party-insurances"),l.workshopPaymentOtherCheckBox.checked&&l.workshopPaymentOtherContainer.classList.add("active"),r()),a()}()}(),function(){function a(){e&&l.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),l.elevatorSelect.addEventListener("change",function(){if(1==l.elevatorSelect.value)return l.elevatorNumber.classList.remove("disabled");l.elevatorNumber.classList.add("disabled")}),l.stepForm.addEventListener("submit",i),l.keepStockMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-keep-stock",1,"step-input-stock-items")})}),l.hasSoftwareMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-has-management-software",1,"step-input-workshop-management-softwares")})}),l.accreditedNetMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-accredited-network",1,"step-input-accredited-networks")})}),l.hasDitchMultiCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-has-ditch",1,"step-input-ditch-services")})}),l.servicesSelect.addEventListener("click",function(){return s(l.servicesSelect)}),l.equipamentsSelect.addEventListener("click",function(){return s(l.equipamentsSelect)}),l.checkBoxListCloseBtns.forEach(function(e){return e.addEventListener("click",c)}),l.otherDitchCheckbox.addEventListener("change",function(){return t.toggleRowCheckBoxOtherInput("ditch-services-other-input")}),l.otherManagementSoftwareBox.addEventListener("change",function(){return r(l.otherManagementSoftwareBox,"management-softwares-other-input")}),l.otherAccreditedNetworkBox.addEventListener("change",function(){return r(l.otherAccreditedNetworkBox,"accredited-network-other-input")}),l.otherEquipamentCheckBox.addEventListener("change",o)}function o(){if(l.otherEquipamentCheckBox.checked)return l.otherEquipamentsInput.classList.remove("disabled");var e=l.otherEquipamentsInput.querySelector("input");l.otherEquipamentsInput.classList.add("disabled"),e.value=""}function r(e,t){var n=document.querySelector("#"+t);if(e.checked)return n.classList.add("active");n.classList.remove("active")}function i(a){a.preventDefault(),c();var o=t.getFormValues(l.stepForm),r=t.getListCheckBoxValues("step-input-workshop-services"),i=t.getListCheckBoxValues("step-input-workshop-equipaments"),s=t.getMultiCheckBoxValue("step-input-keep-stock"),d=t.getMultiCheckBoxValue("step-input-has-management-software"),u=t.getMultiCheckBoxValue("step-input-accredited-network"),p=t.getMultiCheckBoxValue("step-input-has-ditch"),h=t.getMultiCheckBoxValue("step-input-has-ramp"),m=t.getMultiCheckBoxValue("step-input-tester-brake"),f=t.getRowCheckBoxValues("step-input-stock-items"),v=t.getRowCheckBoxValues("step-input-workshop-management-softwares"),g=t.getRowCheckBoxValues("step-input-accredited-networks"),_=t.getRowCheckBoxValues("step-input-ditch-services"),b=o.workshop_activity_area_id,w=o.workshop_activity_line_id,y=o.elevator,k=o.elevators_number,S=o.employees_number,C=o.month_serviced_cars,x=o.ticket,$=o.workshop_equipaments_others,E=o.workshop_accredited_networks_others,q=o.workshop_management_softwares_others,L=o.workshop_has_ditch_other,M=[{value:r,inputName:"workshop-services",notEmpty:!0},{value:i,inputName:"workshop-equipaments",notEmpty:!0},{value:b,inputName:"activity-area",notEmpty:!0},{value:w,inputName:"activity-line",notEmpty:!0},{value:y,inputName:"elevator",notEmpty:!0},{value:p,inputName:"has-ditch",notEmpty:!0},{value:h,inputName:"has-ramp",notEmpty:!0},{value:m,inputName:"tester-brake",notEmpty:!0},{value:S,inputName:"employees-number",notEmpty:!0},{value:s,inputName:"keep-stock",notEmpty:!0},{value:d,inputName:"has-management-software",notEmpty:!0},{value:C,inputName:"month-serviced-cars",notEmpty:!0},{value:x,inputName:"ticket",notEmpty:!0},{value:u,inputName:"accredited-network",notEmpty:!0}];if(l.otherEquipamentCheckBox.checked&&M.push({value:$,inputName:"other-equipaments-input",notEmpty:!0}),"1"===y&&M.push({value:k,inputName:"elevators-number",notEmpty:!0}),1===p&&M.push({value:_,inputName:"ditch-services",notEmpty:!0}),1===s&&M.push({value:f,inputName:"stock-items",notEmpty:!0}),1===d&&M.push({value:v,inputName:"workshop-management-softwares",notEmpty:!0}),1===u&&M.push({value:g,inputName:"accredited-networks",notEmpty:!0,errorPosition:1}),u&&l.otherAccreditedNetworkBox.checked&&M.push({value:E,inputName:"step-input-accredited-networks",notEmpty:!0}),p&&l.otherDitchServiceBox.checked){var D=L;L||(D=""),M.push({value:D,inputName:"ditch-services",notEmpty:!0})}if(d&&l.otherManagementSoftwareBox.checked){var I=q;q||(I=""),M.push({value:I,inputName:"workshop-management-softwares",notEmpty:!0})}if(t.validateForm(M,l.stepForm)){var F={workshop_services:{_ids:r},workshop_equipaments:{_ids:i},workshop_activity_area_id:b,workshop_activity_line_id:w,elevator:y,employees_number:S,keep_stock:s,workshop_has_management_software:d,month_serviced_cars:C,ticket:x,workshop_accredited_network:u,workshop_has_ramp:h,workshop_has_ditch:p,tester_brake_fluid:m,workshop_has_ditch_other:0,workshop_accredited_networks_others:0,workshop_management_softwares_others:0,workshop_equipaments_others:0};if(d&&l.otherManagementSoftwareBox.checked&&q.length>0&&(F.workshop_management_softwares_others=q),u&&l.otherAccreditedNetworkBox.checked&&E.length>0&&(F.workshop_accredited_networks_others=E),p&&l.otherDitchServiceBox.checked&&L.length>0&&(F.workshop_has_ditch_other=L),$.length>0&&(F.workshop_equipaments_others=$),"1"===y&&(F.elevators_number=k),1===s&&(F.workshop_stock_items={_ids:f}),1===u&&(F.workshop_accredited_networks={_ids:g}),1===d&&(F.workshop_management_softwares={_ids:v}),1===p&&(F.workshop_ditch_services={_ids:_}),e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",F).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.requestData.stepFiveData=F,n.changeStep("next")}}function s(e){e.closest(".checkbox-list-container").querySelector(".checkbox-lists").classList.toggle("active")}function c(){l.stepForm.querySelectorAll(".checkbox-lists").forEach(function(e){return e.classList.remove("active")})}var l={stepForm:document.querySelector("#step-five-form"),keepStockMultiCheckBox:document.querySelector("#step-input-keep-stock"),hasSoftwareMultiCheckBox:document.querySelector("#step-input-has-management-software"),accreditedNetMultiCheckBox:document.querySelector("#step-input-accredited-network"),hasDitchMultiCheckBox:document.querySelector("#step-input-has-ditch"),servicesSelect:document.querySelector("#step-input-workshop-services-select"),equipamentsSelect:document.querySelector("#step-input-workshop-equipaments-select"),checkBoxListCloseBtns:document.querySelectorAll(".checkbox-lists-close"),otherCheckBoxToRemove:document.querySelector("#ditch-services-0"),otherDitchCheckbox:document.querySelector("#ditch-services-other"),otherManagementSoftwareBox:document.querySelector("#management-software-8"),otherAccreditedNetworkBox:document.querySelector("#accredited-network-30"),otherDitchServiceBox:document.querySelector("#ditch-services-other"),elevatorSelect:document.querySelector("#step-input-elevator select"),elevatorNumber:document.querySelector("#step-input-elevators-number"),otherEquipamentCheckBox:document.querySelector("#workshop-equipaments-0"),otherEquipamentsInput:document.querySelector("#other-equipaments-input")};!function(){e&&(t.toggleSubInputsApperance("step-input-has-ditch",1,"step-input-ditch-services"),t.toggleSubInputsApperance("step-input-keep-stock",1,"step-input-stock-items"),t.toggleSubInputsApperance("step-input-has-management-software",1,"step-input-workshop-management-softwares"),t.toggleSubInputsApperance("step-input-accredited-network",1,"step-input-accredited-networks")),l.otherCheckBoxToRemove.parentNode.style.display="none",a()}()}(),function(){function a(){r.hasInterestScheduleCheckBox.querySelectorAll(".multi-checkbox").forEach(function(e){e.addEventListener("change",function(){return t.toggleSubInputsApperance("step-input-interest-scheduling",1,"step-has-interest-scheduling-sub")})}),e&&r.stepForm.querySelector(".step-edit-next-btn").addEventListener("click",function(){return n.changeStep("next")}),r.stepForm.addEventListener("submit",o)}function o(a){a.preventDefault();var o=t.getMultiCheckBoxValue("step-input-terms-accession"),i=t.getMultiCheckBoxValue("step-input-interest-scheduling"),s=t.getMultiCheckBoxValue("step-input-image-authorized"),c=t.getMultiCheckBoxValue("step-input-scheduling-accesion"),l=t.getMultiCheckBoxValue("step-input-general-services"),d=t.getMultiCheckBoxValue("step-input-prefers-free-checkup"),u=t.getMultiCheckBoxValue("step-input-accept-amigo-bom-peca"),p=[{value:o,inputName:"terms-accession",notEmpty:!0,toBe:1},{value:i,inputName:"interest-scheduling",notEmpty:!0},{value:s,inputName:"image-authorized",notEmpty:!0},{value:u,inputName:"accept-amigo-bom-peca",notEmpty:!0},{value:c,inputName:"scheduling-accesion",notEmpty:!0,toBe:1}];if(1===i&&(p.push({value:l,inputName:"general-services",notEmpty:!0}),p.push({value:d,inputName:"prefers-free-checkup",notEmpty:!0})),t.validateForm(p,r.stepForm)){var h={terms_of_accession:o,workshop_has_interest_scheduling:i,image_authorized:s,accept_amigo_bom_peca:u,terms_of_scheduling_accession:c};if(1===i&&(h.workshop_prefers_general_services=l,h.workshop_prefers_free_checkup=d),e)return t.toggleStepEditSpinner(),void t.makeRequest("/oficina/editar","post",h).then(function(e){return t.toggleStepEditSpinner(),e.error||e.data.errors?t.displayEditMessage(!1):t.displayEditMessage(!0)}).catch(function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)});t.requestData.stepSixData=h,n.changeStep("next")}}var r={stepForm:document.querySelector("#step-six-form"),hasInterestScheduleCheckBox:document.querySelector("#step-input-interest-scheduling")};!function(){e&&t.toggleSubInputsApperance("step-input-interest-scheduling",1,"step-has-interest-scheduling-sub"),a()}()}(),function(){function a(){m.stepForm.addEventListener("submit",s),m.stepForm.querySelectorAll(".photo-card-container").forEach(function(e){l(e)}),m.addBtn.addEventListener("click",h)}function o(){m.submitBtn.style.display="none",m.stepSpinner.classList.add("active")}function i(){m.submitBtn.style.display="block",m.stepSpinner.classList.remove("active")}function s(n){n.preventDefault(),m.submitBtnErrorMessage.classList.remove("active");var a=[],s=new FormData,l=0;if(m.stepForm.querySelectorAll("input").forEach(function(e){if(e.files[0]){var t=e.files[0],n=e.closest(".photo-card-container").id;a.push({value:t,inputName:n,img:!0}),s.append("workshop_images["+l+"][image]",e.files[0]),l+=1}}),t.validateForm(a,m.stepForm)){if(e){if(m.deletedImageIds.length>0){var d=0;m.deletedImageIds.forEach(function(e){s.append("deleted_image_ids["+d+"]",e),d+=1})}return t.toggleStepEditSpinner(),void $.ajax({url:"/workshops/updateImages",data:s,contentType:!1,processData:!1,method:"POST",success:function(e){return window.location.href="/oficina/editar"},error:function(e){t.toggleStepEditSpinner(),t.displayEditMessage(!1),console.log(e)}})}o();var u={is_correspondence_address:1};Object.entries(t.requestData).forEach(function(e){var t=r(e,2),n=(t[0],t[1]);Object.entries(n).forEach(function(e){var t=r(e,2),n=t[0],a=t[1];u[n]=a})}),t.makeRequest("/oficina/editar","post",u).then(function(e){if(e.data)return c(s);i(),m.submitBtnErrorMessage.classList.add("active")}).catch(function(e){i(),m.submitBtnErrorMessage.classList.add("active"),console.log(e)})}}function c(e){$.ajax({url:"workshops/addImages",data:e,contentType:!1,processData:!1,method:"POST",success:function(e){n.changeStep("next")},error:function(e){n.changeStep("next"),console.log(e)}})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.querySelector(".photo-card-input"),a=e.querySelector(".photo-card-preview"),o=e.querySelector(".delete-icon");n.addEventListener("change",function(){return d(a,n,e)}),t||o.addEventListener("click",function(){return u(n,e)}),t&&o.addEventListener("click",function(){return p(e)})}function d(e,t,n){n.classList.add("active");var a=r(t.files,1),o=a[0];o&&(e.src=URL.createObjectURL(o))}function u(t,n){e&&m.deletedImageIds.push(n.dataset.imageId),t.value="",n.classList.remove("active")}function p(e){e.remove()}function h(){m.photoCounter+=1;var e=document.createElement("div");e.classList.add("photo-card-container"),e.setAttribute("id","step-input-photo-card-"+m.photoCounter);var t='\n                    <div class="photo-card">\n                        <div class="photo-card-photo">\n                            <div class="photo-card-preview-container">\n                                <img src="" alt="" class="photo-card-preview">\n                            </div>\n                            <span>Foto oficina</span>\n                        </div>\n                        <div class="photo-card-info">\n                            <label>escolher imagem\n                                <input accept="image/*" type="file" class="photo-card-input" name="workshop_images['+m.photoCounter+'][image]">\n                            </label>\n                            <img class="add-icon" src="/img/svg/clip.svg" alt="clip">\n                            <img class="delete-icon" src="/img/svg/delete.svg" alt="delete">\n                        </div>\n                    </div>\n                    <span class="step-input-error-message"></span>\n                ';e.innerHTML+=t,e.querySelector(".photo-card-input").click(),l(e,!0),m.photosContainer.appendChild(e)}var m={stepForm:document.querySelector("#step-seven-form"),addBtn:document.querySelector("#photo-card-add-more-btn"),photosContainer:document.querySelector("#photo-cards-container"),photoCounter:2,submitBtn:document.querySelector("#step-seven-submit-btn"),stepSpinner:document.querySelector("#steps-spinner"),submitBtnErrorMessage:document.querySelector("#step-seven-submit-error-message")};e&&(m.deletedImageIds=[]),function(){a()}()}()}}}},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={el:{modal:$(".rating-modal"),form:$(".rating-form"),button:$(".rating-form button[type=submit]"),open_modal_rating:$(".open-modal-rating")},itemServices:!1,init:function(e){this.stars_box=e,this.storage_key=this.el.modal.data("type")+"_rated",this.storage_items=localStorage.getItem(this.storage_key),this.storage_items?this.storage_items=JSON.parse(this.storage_items):this.storage_items=[],"1"!=localStorage.userLoggedIn&&localStorage.ratingModalAlreadyShown&&localStorage.removeItem("ratingModalAlreadyShown"),this.setActions(),this.setForm(),this.openFirstUnratedWorkshop(),this.itemServices||(this.itemServices=!0,$(document).on("change",".item-services .go-input-group--sub-services input[type=checkbox]",function(e){var t=$(this).closest(".go-input-group").find(".go-input-related");t.length>0&&($(this).prop("checked")?(t.addClass("active"),t.find("input").removeAttr("disabled")):(t.removeClass("active"),t.find("input").attr("disabled","disabled")))}));var t=$(".open-modal-rating.auto-open");t.length>0&&t.trigger("click")},openFirstUnratedWorkshop:function(){if(this.el.open_modal_rating){var e=this.el.open_modal_rating.filter(function(e,t){return!t.dataset.rating});e.length>0&&!localStorage.ratingModalAlreadyShown&&(localStorage.ratingModalAlreadyShown=1,e[0].click())}},setActions:function(){var e=this;this.stars_box&&(this.feedback=this.stars_box.next(),this.stars_box.find("span").on("click",function(t){var n=$(this).index()+1;if(e.stars_box.data("simple")){var a=e.stars_box.data("id");e.storage_items.indexOf(a)>-1?e.stars_box&&(e.stars_box.addClass("error"),e.feedback.html('<span class="error">Você ja votou nessa oficina.</span>')):(e.setRate(n),e.sendForm(function(t,n){t?(e.storage_items.push(a),localStorage.setItem(e.storage_key,JSON.stringify(e.storage_items)),e.feedback.html('<span class="success">Obrigado pela sua avaliação!</span>')):(e.stars_box.addClass("error"),e.feedback.html('<span class="error">Houve um erro na avaliação</span>'))}))}else{var o=e.el.modal.data("id");e.stars_box&&e.storage_items.indexOf(o)>-1?(e.stars_box.addClass("error"),e.feedback.html('<span class="error">Você ja votou nessa oficina.</span>')):(e.setRate(n),e.openModal())}})),this.el.open_modal_rating.on("click",this.addValuesToModalAndOpen.bind(this))},setForm:function(){var e=this,t=this.el.form.find("input[name=rating]");this.el.form.on("submit",function(n){n.preventDefault(),""==t.val()?e.el.form.find(".item-rating-stars").addClass("has-error"):(e.el.form.find(".item-rating-stars").removeClass("has-error"),e.el.button.addClass("disabled").attr("disabled",!0),e.sendForm(function(t,n){t?(e.storage_items.push(e.el.modal.data("id")),localStorage.setItem(e.storage_key,JSON.stringify(e.storage_items)),e.stars_box?e.feedback.html('<span class="success">Obrigado pela sua avaliação!</span>'):document.location.reload()):e.stars_box&&(e.stars_box.addClass("error"),e.feedback.html('<span class="error">Houve um erro na avaliação</span>')),e.stars_box&&e.closeModal()}))}),this.el.form.find(".rating-box .stars-box > span").on("click",function(){var t=$(this).index()+1;e.setRate(t)})},setRate:function(e){for(var t=1;t<=5;t++)$(".rating-box .stars-box").removeClass("star-"+t);parseInt(e)>0?($(".rating-box .stars-box").addClass("star-"+e),this.el.form.find("input[name=rating]").val(e)):this.el.form.find("input[name=rating]").val("")},setComment:function(e){this.el.form.find("textarea").val(e)},openModal:function(e){this.el.modal.modal("show")},closeModal:function(e){this.el.modal.find(".close").trigger("click")},sendForm:function(e){var t=this;$.ajax({url:this.el.form.attr("action"),type:this.el.form.attr("method"),data:this.el.form.serialize(),dataType:"json",success:function(n){e.call(t,!0,n)},error:function(){e.call(t,!1)}})},addValuesToModalAndOpen:function(e){e.preventDefault();var t=$(e.currentTarget),n=this.el.form.find(".rating-title"),a=Mustache.render(n.data("template"),{name:t.data("name")});if(this.el.form.find(".item-id").val(t.data("id")),t.data("scheduling-id")&&this.el.form.find(".item-scheduling-id").val(t.data("scheduling-id")),$(".item-services .item-service-box").length>0){var o=t.data("services");$(".item-services .item-service-box").each(function(e){var t=parseInt($(this).data("id"));if(o&&o.hasOwnProperty(t)){$(this).find(".go-checkbox").prop("checked",!0).trigger("change");var n=$(this).find(".go-input-related");n.length>0&&n.find("input").val(o[t])}else{$(this).find(".go-checkbox").removeAttr("checked").trigger("change");var a=$(this).find(".go-input-related");a.length>0&&a.find("input").val("")}})}n.text(a),this.reset(),t.data("rating")&&(this.setRate(t.data("rating")),this.setComment(t.data("comment"))),this.openModal()},reset:function(){this.setRate(0),this.el.form.find(".item-rating-stars").removeClass("has-error"),this.setComment(""),this.el.button.removeClass("disabled").removeAttr("disabled")}}},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default={init:function(){function e(e,t,n,a){var r=$(e.map(function(e){return e+' [type="radio"]'}).join(", "));r.on("change",function(){if("if-all-no"==a){var e=r.filter(function(e,t){var n=$(t);return n.prop("checked")&&("0"===n.val()||!1===n.val()||"false"===n.val())}).length,i=e===r.length/2;o(t,i,n)}})}
function t(e,t,n,a){function r(t){e&&(e[0]&&e[0].selectize?e[0].selectize.on("change",t):e.on("change",t))}function i(e,t){if(null===e||""===e)return 0;if("string"==typeof e)if("0"===e||"1"===e)e=parseInt(e);else switch(e){case"yes":e=1;break;case"no":e=0;break;case"other":e=1;break;default:e=-1}return-1!==e&&("if-something-selected"==t&&(e=1),"if-no-selected"==t&&(e=!e)),e}function c(e){for(var n=0;n<l.length;n++){var a=$(l[n]);1==e?(t.addClass("show"),t.removeClass("hide")):(t.addClass("hide"),t.removeClass("show")),s(a,e)}}var l=void 0,d=""===e.val()?0:i(e.val(),a);if("select"==n||"input"==n)r(function(e,t){return function(){var n=i(this.value,a);o(e,n,t)}}(t,n)),o(t,d,n);else{l=t.find("input"),d||t.addClass("hide");for(var u=0;u<l.length;u++){s($(l[u]),d)}r(function(){c(i(this.value,a))}),o(t,d);var p=function(){var n=""===e.val()?0:i(e.val(),a),o=t.find("select");if(o.length>0)for(var r=0;r<o.length;r++)n?o[r].selectize.enable():o[r].selectize.disable()};r(p),setTimeout(p,1e3)}}function n(e,t){var n=$(t.find("input"));e.prop("checked")&&"0"==e.val()&&s(n,0),"0"==e.val()&&n.val()&&0!=n.val()&&"0"!=n.val()&&e.prop("checked",!0),o(t,e.prop("checked")),t.addClass("hide"),e.on("change",function(){o(t,e.prop("checked"))})}function o(e,t,n){setTimeout(function(){var a=$(e.find(n||"input")),o=null;"select"===n&&(o=$(e.find("input"))),t&&-1!==t?(e.addClass("show"),e.removeClass("hide"),s(a,1),o&&s(o,1)):(e.addClass("hide"),e.removeClass("show"),s(a,0),o&&s(o,0))})}function r(e,t,n){for(var o=$(e),r="object"==(void 0===t?"undefined":a(t))&&t.allExcept,i=[],s=0;s<o.length;s++){var c=o[s],l=c.querySelector(".label");if(r)l&&l.textContent.trim()!=t.allExcept&&i.push($(c.querySelector("input"))),s==o.length-1&&n(i);else if(l&&l.textContent.trim()==t){var d=$(c.querySelector("input"));d.length&&n(d);break}}}function i(e,t){-1===t&&(t=0);for(var n=0;n<e.length;n++)if(e[n].selectize)1==t?e[n].selectize.enable():e[n].selectize.disable();else{var a=$(e[n]);if(!a.length)continue;s(a,t)}}function s(e,t){e&&e.length&&(1==t?(e.removeAttr("disabled"),e[0].selectize&&e[0].selectize.enable(),"checkbox"!=e.attr("type")&&e.data("trulyRequired")&&e.attr("required","required")):(e.prop("disabled","disabled"),e[0].selectize&&e[0].selectize.disable(),"checkbox"!=e.attr("type")?(e.attr("required")&&void 0===e.data("trulyRequired")?e.data("trulyRequired",!0):void 0===e.data("trulyRequired")&&e.data("trulyRequired",!1),e.removeAttr("required")):(e.prop("checked",!1),e.trigger("change"))))}function c(){var e=$("#owner_email");0===e.val().length&&e.val($("#email").val())}$(".show-if-contact-role-not-owner").find(":input").prop("disabled","disabled");var l=$("#contact_role").val(),d=$(".show-if-contact-role-not-owner"),u=d.find(":input"),p="Proprietário"!==l;i(u,p),l.length&&p?d.addClass("show"):d.removeClass("show"),$("#contact_role").on("change",function(){var e=$("#contact_role").val(),t=$(".show-if-contact-role-not-owner").find(":input");e.length&&"Proprietário"!==e?(i(t,1),$(".show-if-contact-role-not-owner").addClass("show")):(i(t,0),$(".show-if-contact-role-not-owner").removeClass("show"),c())}),["Facebook","Instagram","Linkedin","Twitter","Youtube"].forEach(function(e){r(".workshop_social_medias",e,function(t){e=e.toLowerCase(),n(t,$("."+e+"_publish_url"))})}),r(".workshop_social_medias","Outra",function(e){n(e,$(".workshop_has_social_media_other")),n(e,$(".other_publish_url"))}),r(".workshop_ditch_services","Outro",function(e){n(e,$(".workshop_has_ditch_other"))}),r(".workshop_equipaments","Outro",function(e){n(e,$(".workshop_equipaments_others"))}),r(".workshop_management_softwares","Outro",function(e){n(e,$(".workshop_management_softwares_others"))}),r(".workshop_accredited_networks","Outra",function(e){n(e,$(".workshop_accredited_networks_others"))}),r(".workshop_payments","Outros",function(e){n(e,$(".workshop_credicard_others"))}),[[".workshop_has_social_media",".workshop_social_medias"],[".workshop_accredited_network",".workshop_accredited_networks"],[".workshop_has_ditch",".workshop_ditch_services"],[".keep_stock",".workshop_stock_items"],[".workshop_has_management_software",".workshop_management_softwares"],[".mechanics_course",".mechanics_course_details"],[".workshop_use_credicards",".credicard-grid"]].forEach(function(e){t($(e[0]+" select"),$(e[1]),"checkboxes")}),[[".elevator",".elevators_number"],[".how_knew_about",".how_knew_about_other","if-others-selected"],[".workshop_receives_newsletter",".workshop_accept_newsletter","if-no-selected"],[".workshop_accept_fleet_cars",".workshop_has_interest_accept_fleet_cars","if-no-selected"],[".owner_phone_has_whatsapp",".owner-phone-whatsapp--well","if-something-selected"],[".owner_phone_has_whatsapp",".owner_phone_whatsapp_can_share_clients","if-something-selected"]].forEach(function(e){t($(e[0]+" select"),$(e[1]),"select",e[2])}),[[".checkup_weekday_saturday",".works-on-saturdays-worktimes"],[".is_correspondence_address",".different_correspondence","if-no-selected"]].forEach(function(e){t($(e[0]+" select"),$(e[1]),null,e[2])}),[[".offers_financing",".offers_financing_name"],[".owner_phone_has_whatsapp",".owner-phone-whatsapp","if-no-selected"]].forEach(function(e){t($(e[0]+" select"),$(e[1]),"input",e[2])}),[[[".workshop_prefers_general_services",".workshop_prefers_free_checkup"],".must-agree-to-one","if-all-no"]].forEach(function(t){e(t[0],$(t[1]),"tag",t[2])}),n($(".workshop_has_interest_scheduling input"),$(".workshop_has_interest_scheduling--options"))}}},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../modules/tracker"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.default={el:{sidebar_filter:$(".sidebar-filter"),open_filters:$(".sidebar-filter h2"),result_box:$(".result-box"),current_sort:$(".current-sort"),sort_options:$(".sort-options"),input_sort_results:$(".sort-options input[type=radio]"),get_more:$(".get-more"),filter_services_ul:$(".services-ckb.workshop.dynamic"),filter_top_services_ul:$(".services-ckb.workshop.top"),workshop_filter_form:$("#workshop-filter-form"),filter_payments_ul:$(".filter-payments ul.items"),more_services:$(".more-services-box a"),workshop_list_ul:$(".workshop-cards-container"),result_info:$(".result-info"),location_info:$(".location-info"),location_order_btn:document.querySelector("#location-order"),rate_order_btn:document.querySelector("#best-rated-order"),alphabetical_order_btn:document.querySelector("#alphabetical-order"),clean_services_filters_btn:document.querySelector("#clean-services-dropdown-btn")},tpl:{workshop_map:$("#template-workshop-map").html(),workshop_list:$("#template-workshop-list").html(),filter_service:$("#template-filter-service").html(),filter_payment:$("#template-filter-payment").html()},paging:{page:1,sort:"location"},pins:{orange:"/img/pin-orange.png",green:"/img/pin-green.png",gray:"/img/pin-gray.png",blue:"/img/pin-blue.png"},location:{lat:null,lng:null,address:null,radius:null,city_id:null,state_id:null},filters:{services:[],payments:[]},data:[],top_workshop_services:[76,39,59,49],user_id:null,init:function(){this.search_url=this.el.result_box.data("url"),this.markers=[],this.el.result_box.data("address")&&(this.location.address=this.el.result_box.data("address")),this.el.result_box.data("radius")&&(this.location.radius=this.el.result_box.data("radius")),this.el.result_box.data("state-id")&&(this.location.state_id=this.el.result_box.data("state-id")),this.el.result_box.data("city-id")&&(this.location.city_id=this.el.result_box.data("city-id")),this.setMap(),this.setActions()},setActions:function(){var e=this;this.el.open_filters.on("click",this.openFilters.bind(this)),this.el.current_sort.on("click",this.openSortOptions.bind(this)),this.el.input_sort_results.on("change",this.onChangeInputSortOptions.bind(this)),this.el.input_sort_results.on("click",this.closeSortOptions.bind(this)),this.el.get_more.on("click",this.getMore.bind(this)),this.el.more_services.on("click",this.showMoreServices.bind(this)),this.el.workshop_filter_form.on("submit",this.filterServices.bind(this)),this.el.filter_payments_ul.on("click","a",this.filterPayments.bind(this)),this.el.alphabetical_order_btn.addEventListener("click",function(t){return e.onChangeInputSortOptions(t.target,"alphabetical")}),this.el.rate_order_btn.addEventListener("click",function(t){return e.onChangeInputSortOptions(t.target,"best-rated")}),this.el.location_order_btn.addEventListener("click",function(t){return e.onChangeInputSortOptions(t.target,"location")}),this.el.clean_services_filters_btn.addEventListener("click",function(t){return e.cleanServicesFilters()}),$("body").on("click",function(t){var n=$(".sort-box");n.is(t.target)||0!==n.has(t.target).length||e.closeSortOptions()})},openFilters:function(){this.el.sidebar_filter.toggleClass("active")},openSortOptions:function(){this.el.sort_options.addClass("active")},closeSortOptions:function(){this.el.sort_options.removeClass("active")},onChangeInputSortOptions:function(e,t){this.el.location_order_btn.classList.remove("selected"),this.el.alphabetical_order_btn.classList.remove("selected"),this.el.rate_order_btn.classList.remove("selected"),e.classList.add("selected"),this.removeAllMarkers(),this.resetButtonGetMore(),this.enableSpinner(),this.paging.page=1,this.paging.sort=t,this.loadData(this.disableSpinner),this.closeSortOptions(),document.querySelector("#order").classList.remove("selected")},enableSpinner:function(){this.el.result_box.addClass("spinner-active")},disableSpinner:function(){this.el.result_box.removeClass("spinner-active")},getUrlfilters:function(){var e=window.location.search,t=new URLSearchParams(e),n=t.get("service_id");if(n){var a=n.split(",");this.filters.services=a,this.applyFilters()}},getMore:function(e){if(e.preventDefault(),!this.el.get_more.hasClass("disabled")){this.el.input_sort_results.filter(":checked");this.el.get_more.addClass("active"),this.paging.page++,this.loadData(function(e){this.el.get_more.removeClass("active"),e&&0!=e.data.length||this.el.get_more.addClass("disabled").find("span").text(this.el.get_more.find("span").data("end"))})}},loadData:function(e){var t=this,n=$(".result-box").data("user-id");n||(n=null);var a={page:this.paging.page,sort:this.paging.sort,address:this.location.address,lat:this.location.lat,lng:this.location.lng,radius:this.location.radius,state_id:this.location.state_id,city_id:this.location.city_id,user_id:n};$.ajax({url:this.search_url,type:"get",data:a,dataType:"json",success:function(a){if(a.success){t.data=t.data.concat(a.data),1==t.paging.page&&t.el.workshop_list_ul.html("");for(var o in a.data){var r=a.data[o];if(r.user_id=n,r.lat&&r.lng){var i=t.getMarker(r);t.markers.push(i)}t.el.workshop_list_ul.append(Mustache.render(t.tpl.workshop_list,r))}$(".block-grid-item-details-button").each(function(e,n){t.setTrackerToHref($(n))}),a.current_location&&(t.setMapCenter(a.current_location),t.mapFitBounds(),t.addFavoriteBtnListener(n)),t.fillResultInfo(a)}t.mountSidebar(a.sidebar),e&&e.call(t,a)},error:function(){e&&e.call(t)}})},setMap:function(){var e=this;this.map=new GMaps({el:"#map",lat:-17.9340224,lng:-56.2261918,zoom:4}),this.location.address?this.loadData(function(){e.disableSpinner()}):GMaps.geolocate({success:function(t){e.setMapCenter({lat:t.coords.latitude,lng:t.coords.longitude}),e.loadData(function(){e.disableSpinner(),e.getUrlfilters()})},error:function(t){e.loadData(function(){e.disableSpinner()})}})},showMoreServices:function(e){e.preventDefault(),this.el.filter_services_ul.find(".initial-hide").toggleClass("active");var t=this.el.more_services.data("text"),n=this.el.more_services.text();this.el.more_services.data("text",n).text(t)},addFavoriteBtnListener:function(e){var t=this;e&&document.querySelectorAll(".workshop-card-like-btn").forEach(function(n){n.addEventListener("click",function(n){return t.handleFavoriteClick(n.target,e)})})},handleFavoriteClick:function(e,t){var n=e;"IMG"===e.tagName&&(n=e.parentElement);var a=n.id,o=n.classList.contains("favorited");this.handleFavoriteData(a,n,o,t)},handleFavoriteData:function(e,t,n,a){$.ajax({url:n?"/user-favorites/delete":"/user-favorites/add",method:"POST",dataType:"json",data:{user_id:a,workshop_id:e,is_favorite:n?0:1},success:function(e){t.classList.toggle("favorited")},error:function(){alert("erro: Por Favor, tente novamente")}})},removeAllMarkers:function(){for(var e in this.markers)this.map.removeMarker(this.markers[e]);this.markers=[]},resetButtonGetMore:function(){this.el.get_more.removeClass("disabled").find("span").text(this.el.get_more.find("span").data("start"))},mountSidebar:function(e){if(this.el.sidebar_filter.removeClass("spinner-active"),e.services){var t=0,n=!1;for(var a in e.services){n||(this.el.filter_services_ul.html(""),this.el.filter_top_services_ul.html(""),n=!0);var o=e.services[a];++t>4&&(o.hide=!0),this.top_workshop_services.includes(o.id)&&this.el.filter_top_services_ul.append(Mustache.render(this.tpl.filter_service,o)),this.el.filter_services_ul.append(Mustache.render(this.tpl.filter_service,o))}}if(e.payments){var r=!1;for(var i in e.payments){r||(this.el.filter_payments_ul.html(""),r=!0);var s=e.payments[i];this.el.filter_payments_ul.append(Mustache.render(this.tpl.filter_service,s))}}},filterServices:function(e){e.preventDefault(),this.filters.services=[];var t=document.querySelector("#workshop-filter-form"),n=new FormData(t),a=!0,o=!1,r=void 0;try{for(var i,s=n.entries()[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value;this.filters.services.push(c[0])}}catch(e){o=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}this.applyFilters()},cleanServicesFilters:function(){document.querySelector("#workshop-filter-form").reset(),this.filters.services=[],this.applyFilters()},filterPayments:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("id");if(t.toggleClass("active"),t.hasClass("active"))this.filters.payments.push(n);else{var a=this.filters.payments.indexOf(n);this.filters.payments.splice(a,1)}this.applyFilters()},applyFilters:function(){this.removeAllMarkers(),this.el.workshop_list_ul.html("");for(var e in this.data){var t=!1,n=this.data[e];if(this.filters.services.length>0)for(var a in this.filters.services){var o=this.filters.services[a];o=parseInt(o),n.services.indexOf(o)>-1&&(t=!0)}if(this.filters.payments.length>0)for(var r in this.filters.payments){var i=this.filters.payments[r];n.payments.indexOf(i)>-1&&(t=!0)}if(0==this.filters.services.length&&0==this.filters.payments.length&&(t=!0),t){var s=this.getMarker(n);this.markers.push(s),this.el.workshop_list_ul.append(Mustache.render(this.tpl.workshop_list,n))}}var c=document.querySelector("#filter-services"),l=document.querySelector("#filters");c.classList.remove("selected"),l.classList.remove("selected"),this.addFavoriteBtnListener(),this.mapFitBounds()},setTrackerToHref:function(e){var t=new o.default(e);t.onClick(function(){t.track().then(function(){t.goToHref()})})},getMarker:function(e){var t=this,n=this.pins.green;e.schedules||(n=this.pins.blue);var a=this.map.addMarker({lat:e.lat,lng:e.lng,icon:n,animation:google.maps.Animation.DROP,title:e.name,infoWindow:{content:Mustache.render(this.tpl.workshop_map,e)}});return google.maps.event.addListener(a,"click",function(){t.setTrackerToHref($(".map-marker-details-button"))}),a},mapFitBounds:function(){this.drawCircle()},drawCircle:function(){!this.circle&&this.location.lat&&this.location.lng&&(this.circle=this.map.drawCircle({lat:this.location.lat,lng:this.location.lng,strokeColor:"#3a73a4",strokeOpacity:1,strokeWeight:3,fillColor:"#3a73a4",fillOpacity:.1,radius:1e3*this.location.radius}))},fillResultInfo:function(e){this.el.result_info.html(e.result_info),this.el.location_info.html(e.location_info)},setMapCenter:function(e){e.lat&&e.lng&&(this.map.setCenter(e.lat,e.lng),this.map.setZoom(11),this.marker_current_location||(this.marker_current_location=this.map.addMarker({lat:e.lat,lng:e.lng,title:"Sua localização",icon:this.pins.orange,animation:google.maps.Animation.DROP,optimized:!1,zIndex:-1})),this.location.lat=e.lat,this.location.lng=e.lng)}}},{"../../modules/tracker":17}],49:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./checkup"),r=a(o),i=e("./comment"),s=a(i),c=e("./rating"),l=a(c),d=e("../../modules/tracker"),u=a(d),p=e("../workshop-search"),h=a(p);n.default={el:{scheduling_form:$(".scheduling-form"),scheduling_box:$(".scheduling-box"),tabs_box:$(".tabs-box"),wd_tab_box:$(".wd-tab-box"),wda_tab_box:$(".wda-tab-box"),see_phone:$(".see-phone"),see_email:$(".see-email"),open_street_view:$(".open-street-view"),open_directions:$(".open-directions"),header_map_box:$(".header-map-box"),search_back:$(".search-back"),stars_box:$(".workshop-header-info .rating-box .stars-box"),user_is_client:$(".user_is_client"),car_login_form:$(".car_login_form"),car_register_form:$(".car_register_form")},pins:{orange:"/img/pin-orange.png",green:"/img/pin-green.png",gray:"/img/pin-gray.png",blue:"/img/pin-blue.png"},init:function(){this.setActions(),new r.default({type:"checkup"}),new r.default({type:"general"}),s.default.init(),l.default.init(this.el.stars_box),this.setSwiper(),h.default.init()},setActions:function(){this.el.tabs_box.on("click",".tab-item",this.switchTab.bind(this)),this.el.wda_tab_box.on("click",".wda-tab",this.switchWorkshopDataTab.bind(this));var e=new u.default(this.el.see_phone);e.onClick(function(){e.replaceContent(),e.track()});var t=new u.default(this.el.see_email);t.onClick(function(){t.replaceContent(),t.track()});var n=new u.default(this.el.open_directions);n.onClick(function(){n.replaceContent(),n.track()}),this.el.open_street_view.on("click",this.openStreetView.bind(this)),this.el.open_directions.on("click",this.openDirections.bind(this)),this.el.user_is_client.on("change",this.switchLoginRegisterForm.bind(this)),this.setupLoginRegisterForm(),this.el.search_back.on("click",function(e){e.preventDefault(),window.history.back()})},setupLoginRegisterForm:function(){this.setSwitchLoginRegisterForm(),this.setSubmitEventsLoginForm()},setSubmitEventsLoginForm:function(){var e=this;this.el.car_login_form&&this.el.car_login_form.find("input").each(function(t,n){$(n).on("keyup",function(t){13===(t.which||t.keyCode)&&(t.preventDefault(),e.el.car_login_form.find(".go-form--ajax-submit").trigger("click"))})})},setSwitchLoginRegisterForm:function(e){this.toggleFormElement($(".car_login_form"),!0),this.toggleFormElement($(".car_register_form"),!1)},switchLoginRegisterForm:function(e){"1"===e.target.value?(this.toggleFormElement($(".car_login_form"),!1),this.toggleFormElement($(".car_register_form"),!0)):(this.toggleFormElement($(".car_login_form"),!0),this.toggleFormElement($(".car_register_form"),!1))},toggleFormElement:function(e,t){var n=this.el.scheduling_form.parsley();n&&n.destroy&&n.destroy(),t?(e.show(),e.find(".force-disable").removeAttr("disabled")):(e.hide(),e.find(".force-disable").attr("disabled","disabled")),this.el.scheduling_form.parsley({excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled], :hidden"})},switchTab:function(e){e.preventDefault();var t=$(e.currentTarget);t.hasClass("active")||(this.el.scheduling_box.find(".content-tab").removeClass("active"),this.el.scheduling_box.find(".tab-item").removeClass("active"),t.addClass("active"),this.el.scheduling_box.find(t.data("target")).addClass("active"))},switchWorkshopDataTab:function(e){e.preventDefault();var t=$(e.currentTarget);t.hasClass("active")||(this.el.wd_tab_box.find(".wd-tab").removeClass("active"),this.el.wd_tab_box.find(".wda-tab").removeClass("active"),t.addClass("active"),this.el.wd_tab_box.find(t.data("target")).addClass("active"))},openStreetView:function(e){e.preventDefault(),this.el.open_directions.removeClass("active"),this.el.open_street_view.toggleClass("active"),this.el.open_street_view.hasClass("active")?(this.el.header_map_box.addClass("active"),"street"!=this.current_header_map&&(this.current_header_map="street",this.header_map=GMaps.createPanorama({el:"#header-map",lat:this.el.header_map_box.data("lat"),lng:this.el.header_map_box.data("lng")}))):this.el.header_map_box.removeClass("active")},openDirections:function(e){var t=this;if($(window).width()>=640)if(e.preventDefault(),this.el.open_street_view.removeClass("active"),this.el.open_directions.toggleClass("active"),this.el.open_directions.hasClass("active")){if(this.el.header_map_box.addClass("active"),"directions"!=this.current_header_map){this.current_header_map="directions",this.header_map=new GMaps({el:"#header-map",lat:this.el.header_map_box.data("lat"),lng:this.el.header_map_box.data("lng"),zoom:15});var n=new google.maps.LatLngBounds;n.extend(new google.maps.LatLng(this.el.header_map_box.data("lat"),this.el.header_map_box.data("lng"))),this.getMarker("Destino",this.pins.green,{lat:this.el.header_map_box.data("lat"),lng:this.el.header_map_box.data("lng")}),this.header_map.fitBounds(n),this.header_map.panToBounds(n),this.el.header_map_box.data("current-lat")?this.drawDirections({lat:this.el.header_map_box.data("current-lat"),lng:this.el.header_map_box.data("current-lng")},{lat:this.el.header_map_box.data("lat"),lng:this.el.header_map_box.data("lng")}):GMaps.geolocate({success:function(e){t.drawDirections({lat:e.coords.latitude,lng:e.coords.longitude},{lat:t.el.header_map_box.data("lat"),lng:t.el.header_map_box.data("lng")})}})}}else this.el.header_map_box.removeClass("active")},drawDirections:function(e,t){this.header_map.drawRoute({origin:[e.lat,e.lng],destination:[t.lat,t.lng],travelMode:"driving",strokeColor:"#3a73a4",strokeOpacity:.5,strokeWeight:4});var n=new google.maps.LatLngBounds;n.extend(new google.maps.LatLng(e.lat,e.lng)),n.extend(new google.maps.LatLng(t.lat,t.lng)),this.header_map.fitBounds(n),this.header_map.panToBounds(n),this.getMarker("Sua localização",this.pins.orange,{lat:e.lat,lng:e.lng})},getMarker:function(e,t,n){return this.header_map.addMarker({lat:n.lat,lng:n.lng,icon:t,animation:google.maps.Animation.DROP,title:e,infoWindow:{content:e}})},setSwiper:function(){new Swiper(".swiper-container",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",paginationClickable:!0,spaceBetween:30,centeredSlides:!0,autoplay:1e4,autoplayDisableOnInteraction:!1,pagination:".swiper-pagination"})}}},{"../../modules/tracker":17,"../workshop-search":39,"./checkup":41,"./comment":42,"./rating":46}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){e.preventDefault();var t=C(T);t.is_json=!0,k("/users/login","post",t).then(function(e){e.success&&(E=e.data.id,S(N,O,v)),e.error&&i(e.error)}).catch(function(e){console.log(e)})}function t(e){e.preventDefault();var t=C(A),a=document.querySelector("#step-one-checkbox").checked,o=t.cellphone.split(" "),i=parseInt(o[0].replace(/[{()}]/g,"")),s="";t.name.length>0&&(s=t.name+" "+t.last_name),t.terms_of_accession=a,t.name=s,t.cellphone=o[1],t.cellphone_area_code=i,t.phone="",delete t.last_name,n(t)&&k("/users/register","post",t).then(function(e){e.data.success&&(E=e.data.data.id,S(N,O)),e.data.errors&&r(e.data.errors)}).catch(function(e){console.log(e)})}function n(e){document.querySelectorAll(".step-input-error-message").forEach(function(e){return e.classList.remove("active")});var t=!1;return Object.entries(e).forEach(function(e){var n=document.querySelector("#step-create-form-"+e[0]),r=void 0;if(n&&(r=n.querySelector(".step-input-error-message")),"document"==e[0]){a(e[1].replace(/-/g,"").replace(/\./g,""))||(r.classList.add("active"),r.textContent="CPF ínvalido",t=!0)}if("birthday"==e[0]){var i=e[1].split("/");o(i[1]+"/"+i[0]+"/"+i[2])||(r.classList.add("active"),r.textContent="Data ínvalida",t=!0)}}),!t}function a(e){var t,n;if(t=0,"00000000000"==e)return!1;for(var a=1;a<=9;a++)t+=parseInt(e.substring(a-1,a))*(11-a);if(n=10*t%11,10!=n&&11!=n||(n=0),n!=parseInt(e.substring(9,10)))return!1;t=0;for(var a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return n=10*t%11,10!=n&&11!=n||(n=0),n==parseInt(e.substring(10,11))}function o(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]}function r(e){Object.entries(e).forEach(function(e){var t=document.querySelector("#step-create-form-"+e[0]),n=t.querySelector(".step-input-error-message");"email"===e[0]?n.textContent="E-mail já cadastrado":n.textContent=e[1][Object.keys(e[1])[0]],n.classList.add("active")})}function i(e){var t=document.querySelector("#login-form-error-container");t.textContent=e.message,t.classList.add("active")}function s(){I.classList.remove("unselected"),F.classList.add("unselected"),T.classList.remove("disabled"),A.classList.add("disabled")}function c(){I.classList.add("unselected"),F.classList.remove("unselected"),T.classList.add("disabled"),A.classList.remove("disabled")}function l(e,t,n,a){e.forEach(function(e){var o=new Option(e[n],e[a]);t.appendChild(o)})}function d(e){e.forEach(function(e){var t=new Option(e.car_year.name,e.car_year.id);H.appendChild(t)}),m()}function u(){k("/carManufacturers/getModels","post",{id:V.value}).then(function(e){e.success&&(m(R,"selecione o modelo"),m(Y,"selecione a versão"),m(H,"selecione o ano"),l(e.data,R,"name","id"))})}function p(){k("/carModels/getVersions","post",{id:R.value}).then(function(e){e.success&&(m(Y,"selecione a versão"),m(H,"selecione o ano"),l(e.data,Y,"name","id"))})}function h(){k("/carVersions/getVersionYears","post",{id:Y.value}).then(function(e){e.success&&(m(H,"selecione o ano"),d(e.data))})}function m(e,t){if(e){for(var n=e.options.length,a=n-1;a>=0;a--)e.options[a]=null;var o='<option value="" disabled selected hidden>'+t+"</option>";e.innerHTML=o}}function f(e){e.preventDefault();var t=C(P);q=t.workshop_id,L=t.date,M=t.hour;var n={scheduling:{user_id:E,date:L,hour:M,workshop_id:q,description:t.description,scheduling_type:t.scheduling_type},car:{}};z&&(n.scheduling.car_id=z),z||(n.car.car_manufacturer_id=t.manufacturer,n.car.car_model_id=t.model,n.car.car_version_id=t.version,n.car.car_version_year_id=t.year,n.car.car_color_id=t.color,n.car.license_plate=t.plate,n.car.km=t.mileage);var a=document.querySelector("#step-two-form-btn"),o=document.querySelector("#steps-spinner");a.classList.add("hidden"),o.classList.add("active"),k("/schedulings/combo","post",n).then(function(e){e.success&&S(O,B,w),e.error&&alert(e.error)}).catch(function(e){console.log(e)})}function v(){k("/users/getUserCars","get",null).then(function(e){e.length>0&&g(e)}).catch(function(e){console.log(e)})}function g(e){var t=document.querySelector("#step-two-user-cars");e.forEach(function(e){var n=e.car_model.name,a=e.car_version_year.car_year.name,o=e.car_version.name,r=e.car_manufacturer.name,i=e.id,s='\n                    <div class="step-two-user-car-container" id="'+i+'">\n                        <p>\n                            Selecionar modelo existente:\n                            '+n+" "+a+" "+o+" "+r+"\n                        </p>\n                    </div>\n                ";t.innerHTML+=s}),_()}function _(){document.querySelectorAll(".step-two-user-car-container").forEach(function(e){e.addEventListener("click",b)})}function b(e){var t=e.target;"P"===t.tagName&&(t=t.parentElement),t.id!==z&&null!==z?(document.querySelectorAll(".step-two-user-car-container").forEach(function(e){e.classList.remove("selected")}),t.classList.add("selected"),z=t.id):(z=t.id==z?null:t.id,t.classList.toggle("selected"),P.classList.toggle("part-disabled"),j.classList.toggle("active"));for(var n=P.classList.contains("part-disabled")&&!0,a=P.elements,o=0,r=a.length;o<r;++o)"description"===a[o].name||"button"===a[o].name||(n&&(a[o].disabled=!0),n||(a[o].disabled=!1))}function w(){k("/workshops/showdata","post",{id:q}).then(function(e){y(e)}).catch(function(e){return console.log(e)})}function y(e){var t=document.querySelector("#step-three-schedule-card"),n=document.querySelector("#step-three-address-card"),a=document.querySelector("#step-three-contact-card"),o=document.querySelector("#step-three-message"),r=L.split("-"),i=new Date(r[0],parseInt(r[1])-1,r[2]),s=r[2]+"/"+r[1]+"/"+r[0],c=["DOMINGO","SEGUNDA-FEIRA","TERÇA-FEIRA","QUARTA-FEIRA","QUINTA-FEIRA","SEXTA-FEIRA","SÁBADO"],l=c[i.getDay()],d="\n                <p>\n                    "+s+"<br>\n                    "+l+"<br>\n                    ÀS "+M+"<br>\n                </p>\n            ",u="\n                <p>\n                    "+e.address+", "+e.address_number+", "+e.neighborhood+",\n                    "+(e.city.name?e.city.name:"")+"/"+(e.state.acronym?e.state.acronym:"")+"<br>\n                    CEP "+(e.zipcode?e.zipcode:"")+'<br>\n                    <a href="http://www.google.com/maps/place/'+e.lat+","+e.lng+'" target="blank">Veja no maps</a>\n                </p>\n            ',p="\n                <p>\n                    "+e.email+"<br>\n                    "+(e.phone_area_code?e.phone_area_code:"")+" "+(e.phone?e.phone:"")+"<br>\n                    "+(e.contact_phone_area_code?e.contact_phone_area_code:"")+" "+(e.contact_phone?e.contact_phone:"")+"<br>\n                </p>\n            ",h="\n                Pronto! Enviamos a sua solicitação de agendamento para <b>"+e.name+"</b>\n                Abaixo está tudo que você precisa saber:\n            ";t.innerHTML+=d,n.innerHTML+=u,a.innerHTML+=p,o.innerHTML+=h}function k(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.classList.remove("active"),t.classList.add("active"),n&&n()}function C(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n}var x=function(){var e=document.querySelector("#step-one-section");if(!e)return{error:!0};var t=e.dataset.userId;return t||(t=null),{userId:t}}();if(!x.error){var E=x.userId,q=void 0,L=void 0,M=void 0,D=document.referrer;document.querySelectorAll(".steps-back-link").forEach(function(e){return e.href=D}),function(){$('[data-mask="date"]').inputmask({mask:"99/99/9999",showMaskOnHover:!1}),$('[data-mask="cpf"]').inputmask({mask:"999.999.999-99",showMaskOnHover:!1}),$('[data-mask="cellphone-ddd"]').inputmask({mask:"(99) 99999-999[9]",showMaskOnHover:!1})}();var I=document.querySelector("#step-one-login-btn"),F=document.querySelector("#step-one-create-btn"),A=document.querySelector("#step-one-create"),T=document.querySelector("#step-one-login"),N=document.querySelector("#step-one-section"),O=document.querySelector("#step-two-section"),B=document.querySelector("#step-three-section");E&&S(N,O,v),I.addEventListener("click",s),F.addEventListener("click",c),T.addEventListener("submit",e),A.addEventListener("submit",t);var P=document.querySelector("#step-two-form"),j=document.querySelector("#desc-input"),V=document.querySelector("#manufacturer-select"),R=document.querySelector("#model-select"),Y=document.querySelector("#version-select"),H=document.querySelector("#year-select");P.addEventListener("submit",f),V.addEventListener("change",u),R.addEventListener("change",p),Y.addEventListener("change",h);var z=null}}}},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(){var e=i.statusFilterSelect.value;if("all"==e)return a(i.clients);t(e)}function t(e){var t=[];i.clients.forEach(function(n){n.active==e&&t.push(n)}),a(t)}function n(){var e=i.searchClientInput.value;if(""==e)return a(i.clients);r.makeRequest("/workshops/getClients","post",{data:e}).then(function(e){a(e)}).catch(function(e){console.log(e)})}function a(e){if(i.clientsContainer.innerHTML="",0===e.length)return o()
;e.forEach(function(e){var t=new Date(e.birthday),n=t.toLocaleDateString("pt-BR"),a=e.last_login,o="Indefinido";if(a){o=new Date(o).toLocaleDateString("pt-BR")}var r="green";e.active||(r="red");var s='\n                <div class="workshop-new-order-client">\n                    <div class="workshop-new-order-status-element">\n                        <div class="workshop-new-order-status-container">\n                            <label class="workshop-new-order-status-label">Status</label>\n                            <div class="workshop-new-order-status '+r+'">\n                                <img class="workshop-new-order-status-icon green" src="/img/svg/check.svg">\n                                <img class="workshop-new-order-status-icon blue" src="/img/svg/play.svg">\n                                <img class="workshop-new-order-status-icon red" src="/img/svg/cancel.svg">\n                            </div>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-client-cpf-name">\n                        <div class="workshop-new-order-input-container">\n                            <label class="workshop-new-order-input-label">CPF/CNPJ</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <input type="text" class="workshop-new-order-input" placeholder="0000.000.000" value="'+e.document+'" disabled>\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>\n                        <div class="workshop-new-order-input-container">\n                            <label class="workshop-new-order-input-label">Nome</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <input type="text" class="workshop-new-order-input" placeholder="Nome aqui" disabled value="'+e.name+'">\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>\n                    </div>            \n                    <div class="workshop-new-order-client-date-visit">\n                        <div class="workshop-new-order-input-container">\n                            <label class="workshop-new-order-input-label">Última visita</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <input type="text" class="workshop-new-order-input mx-width "placeholder="0000.000.000" disabled value="'+o+'">\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>                \n                        <div class="workshop-new-order-input-container">\n                            <label class="workshop-new-order-input-label">Aniversário</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <input type="text" class="workshop-new-order-input mx-width" placeholder="0000.000.000" disabled value="'+n+'">\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>      \n                    </div>      \n                    <div class="workshop-new-order-actions-container">\n                        <label class="workshop-new-order-actions-label">Ações</label>\n                        <div class="workshop-new-order-actions">\n                            <a href="/oficina/cliente/editar/'+e.id+'" class="workshop-new-order-actions-btn">\n                                <img src="/img/svg/edit-clients.svg" alt="editar">\n                            </a>\n                        </div>\n                    </div>        \n                </div>\n                ';i.clientsContainer.innerHTML+=s})}function o(){i.clientsContainer.innerHTML+='\n            <div class="workshop-new-order-select-item">\n                <p>Nenhum cliente encontrado</p>\n            </div>\n            '}var r={makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})}},i={clientsContainer:document.querySelector("#clients-container"),clients:[],searchClientInput:document.querySelector("#search-client-input input"),statusFilterSelect:document.querySelector("#status-filter")};r.makeRequest("/workshops/getAllClients","get").then(function(e){i.clients=e,a(i.clients)}).catch(function(e){console.log(e)}),function(){i.searchClientInput.addEventListener("input",n),i.statusFilterSelect.addEventListener("change",e)}()}}},{}],52:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){b.makeRequest("/workshops/getClientCars","post",{client_id:e}).then(function(e){if(0==e.length)return n();e.forEach(function(e){n({id:e.id,manufacturerId:e.car_manufacturer_id,modelId:e.car_model_id,versionId:e.car_version_id,yearId:e.car_version_year_id,colorId:e.car_color_id,km:e.km,plate:e.license_plate})})}).catch(function(e){console.log(e)})}function t(e){e.preventDefault(),n()}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=r('\n                <div class="workshop-new-order-wrapper car-fields" data-id ="'+(e?e.id:"")+'">\n                    <div class="workshop-new-order-close">\n                      <button id="close-card-btn" type="button"><img src="/img/svg/close.svg" alt="remover-veiculo"></button>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="manufacturer-select">\n                            <label class="workshop-new-order-input-label">Marca</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="model">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a marca</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="workshop-new-order-input-container select border" id="model-select">\n                            <label class="workshop-new-order-input-label">Modelo</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="model">\n                                    <option disabled="" selected="" hidden="" value="">Selecione o modelo</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="version-select">\n                            <label class="workshop-new-order-input-label">Versão</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="versão">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a versão</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="workshop-new-order-input-container select border" id="year-select">\n                            <label class="workshop-new-order-input-label">Ano</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="year">\n                                    <option disabled="" selected="" hidden="" value="">Selecione o ano</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="color-select">\n                            <label class="workshop-new-order-input-label">Cor</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="color">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a cor</option>\n                                </select>\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>\n                        <div class="workshop-new-order-input-wrapper new-client fifty">\n                            <div class="workshop-new-order-input-container border" id="new-client-input-plate">\n                                <label class="workshop-new-order-input-label">Placa</label>\n                                <div class="workshop-new-order-input-icon-container">\n                                    <input type="text" class="workshop-new-order-input" placeholder="AAA-000" name="plate">\n                                </div>\n                                <span class="step-input-error-message"></span>\n                            </div>\n                            <div class="workshop-new-order-input-container border" id="new-client-input-mileage">\n                                <label class="workshop-new-order-input-label">KM</label>\n                                <div class="workshop-new-order-input-icon-container">\n                                    <input type="text" class="workshop-new-order-input" placeholder="KM" name="mileage">\n                                </div>\n                                <span class="step-input-error-message"></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            '),n=t.querySelector("#manufacturer-select select"),a=t.querySelector("#model-select select"),i=t.querySelector("#version-select select"),s=t.querySelector("#year-select select"),c=t.querySelector("#color-select select"),l=t.querySelector("#new-client-input-plate input"),d=t.querySelector("#new-client-input-mileage input"),u=t.querySelector("#close-card-btn");v(w.carManufacturers,n,"name","id"),v(w.carColors,c,"name","id"),e||t.querySelectorAll("select").forEach(function(e){e.classList.add("placeholder-option"),e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})}),e&&o({manufacturerSelect:n,modelSelect:a,versionSelect:i,yearSelect:s,colorSelect:c,plateInput:l,kmInput:d},e),n.addEventListener("change",function(e){return h(n,a,i,s)}),a.addEventListener("change",function(e){return m(a,i,s)}),i.addEventListener("change",function(e){return f(i,s)}),u.addEventListener("click",function(e){return t.remove()}),w.carsContainer.appendChild(t)}function o(e,t){var n=e.manufacturerSelect,a=e.modelSelect,o=e.versionSelect,r=e.yearSelect,i=e.colorSelect,s=e.plateInput,c=e.kmInput;n.value=t.manufacturerId,b.makeRequest("/carManufacturers/getModels","post",{id:t.manufacturerId}).then(function(e){e.success&&(v(e.data,a,"name","id"),a.value=t.modelId,b.makeRequest("/carModels/getVersions","post",{id:t.modelId}).then(function(e){e.success&&(v(e.data,o,"name","id"),o.value=t.versionId,b.makeRequest("/carVersions/getVersionYears","post",{id:t.versionId}).then(function(e){e.success&&(g(e.data,r),r.value=t.yearId,i.value=t.colorId,s.value=t.plate,c.value=t.km)}))}))})}function r(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function i(e){function t(e){b.makeRequest("/users/registerWorkshopUser","put",e).then(function(e){n(e.id)}).catch(function(e){window.location.href="/oficina?success=false&message=Ocorreu um erro, por favor tente novamente",console.log(e)})}function n(e){f.forEach(function(t){t.user_id=e,b.makeRequest("/pages/registerNewCar","post",t).then(function(e){}).catch(function(e){console.log(e)})}),window.location.href="/oficina?success=true&message=Cliente editado com sucesso"}e.preventDefault();var a=b.getFormValues(w.carForm),o=(a.manufacturer,a.model,a.version,a.year,a.color,a.plate,a.mileage,void 0),r=void 0;if("client"===w.activeForm){o=b.getFormValues(w.clientForm);var i=o.document.replace(/-/g,"").replace(/\./g,"").trim(),s=b.formatDate(o.birthday);r=[{value:o.name,inputName:"new-client-input-name",notEmpty:!0},{value:s,inputName:"new-client-input-birthday",notEmpty:!0,date:!0},{value:o.gender,inputName:"new-client-input-gender",notEmpty:!0},{value:o.email,inputName:"new-client-input-email",notEmpty:!0},{value:o.cellphone,inputName:"new-client-input-cellphone",notEmpty:!0},{value:i,inputName:"new-client-input-document",notEmpty:!0,cpf:!0}]}if("company"===w.activeForm){o=b.getFormValues(w.companyForm);var c=o.responsible_document.replace(/-/g,"").replace(/\./g,"").trim();r=[{value:o.name,inputName:"new-company-input-name",notEmpty:!0},{value:o.email,inputName:"new-company-input-email",notEmpty:!0},{value:o.document,inputName:"new-company-input-document",notEmpty:!0,cnpj:!0},{value:o.company_name,inputName:"new-company-input-company-name",notEmpty:!0},{value:c,inputName:"new-company-input-responsible-document",notEmpty:!0,cpf:!0},{value:o.responsible_name,inputName:"new-company-input-responsible-name",notEmpty:!0},{value:o.company_zipcode,inputName:"new-company-input-zipcode",notEmpty:!0},{value:o.company_address,inputName:"new-company-input-address",notEmpty:!0},{value:o.company_number,inputName:"new-company-input-number",notEmpty:!0},{value:o.company_neighborhood,inputName:"new-company-input-neighborhood",notEmpty:!0},{value:o.company_state,inputName:"state-select",notEmpty:!0},{value:o.company_city,inputName:"city-select",notEmpty:!0}]}var l=[];if(l=l.concat(r),b.validateForm(l,w.pageSection)){var d=b.splitPhone(o.phone),u=b.splitPhone(o.cellphone),p=w.hasCellPhoneWhatsCheckbox.checked,h=w.hasPhoneWhatsCheckbox.checked,m={id:w.pageSection.dataset.clientId,name:o.name,email:o.email,document:o.document,cellphone:u.phoneNumber?u.phoneNumber:null,phone:d.phoneNumber?d.phoneNumber:null,cellphone_area_code:u.phoneAreaCode?u.phoneAreaCode:null,phone_area_code:d.phoneAreaCode?d.phoneAreaCode:null,terms_of_accession:!0,password:"1234",cellphone_has_whatsapp:p,phone_has_whatsapp:h};"client"===w.activeForm&&(m.birthday=o.birthday,m.gender=o.gender,m.type="person"),"company"===w.activeForm&&(m.company_name=o.company_name,m.responsible_document=o.responsible_document,m.responsible_name=o.responsible_name,m.company_zipcode=o.company_zipcode,m.company_address=o.company_address,m.company_number=o.company_number,m.company_neighborhood=o.company_neighborhood,m.company_complement=o.company_complement,m.state_id=o.company_state,m.city_id=o.company_city,m.type="company");var f=[];w.carsContainer.querySelectorAll(".car-fields").forEach(function(e){var t=e.querySelector("#manufacturer-select select").value,n=e.querySelector("#model-select select").value,a=e.querySelector("#version-select select").value,o=e.querySelector("#year-select select").value,r=e.querySelector("#color-select select").value,i=e.querySelector("#new-client-input-plate input").value,s=e.querySelector("#new-client-input-mileage input").value,c={car:{car_manufacturer_id:t,car_model_id:n,car_version_id:a,car_version_year_id:o,license_plate:i,car_color_id:r,km:s}};e.dataset.id&&(c.car.id=e.dataset.id),f.push(c)}),b.makeRequest("/users/email-exists","post",{email:o.email}).then(function(e){if(e.result.success){if(e.result.exists&&w.clientEmail!=o.email&&w.companyEmail!=o.email){b.addInputError("new-client-input-email","O e-mail informado já existe"),b.addInputError("new-company-input-email","O e-mail informado já existe");var n=document.querySelector(".error").offsetTop;return void window.scrollTo({top:n-300,behavior:"smooth"})}b.makeRequest("/users/workshop-has-user","post",{document:o.document}).then(function(e){if(e.result.success){if(e.result.exists&&w.clientCPF!=o.document&&w.clientCNPJ!=o.document){b.addInputError("new-client-input-document","O CPF informado já foi cadastrado"),b.addInputError("new-company-input-document","O CNPJ informado já foi cadastrado");var n=document.querySelector(".error").offsetTop;return void window.scrollTo({top:n-300,behavior:"smooth"})}b.activeSpinner("workshop-new-order-new-client-btn"),t(m)}}).catch(function(e){return console.log(e)})}}).catch(function(e){return console.log(e)})}}function s(e){if(9===e.value.length){var t=e.value;b.makeRequest("https://viacep.com.br/ws/"+t+"/json/","get").then(function(e){e.erro||c(e)}).catch(function(e){return console.log(e)})}}function c(e){w.addressInput.value=e.logradouro,w.neighborhoodInput.value=e.bairro,w.stateOptions.forEach(function(t){var n=t.text.split(" "),a=n[n.length-1].replace(/[{()}]/g,"");console.log(a,e.uf),a===e.uf&&(t.selected="selected")}),l(null,e.localidade)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=w.stateSelect.value,o={id:a};b.makeRequest("/Cities/getStateCities","post",o).then(function(e){return d(e,t,n)}).catch(function(e){return console.log(e)})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;w.citySelect.querySelectorAll(".step-input-city-select-option").forEach(function(e){return e.remove()}),e.forEach(function(e){var a=void 0;t&&t===e.name&&(a=!0),n&&n==e.id&&(a=!0);var o=document.createElement("option");o.classList.add("step-input-city-select-option"),o.innerText=e.name,o.value=e.id,a&&(o.selected=!0),w.citySelect.appendChild(o)})}function u(){w.clientFormBtn.classList.add("active"),w.companyFormBtn.classList.remove("active"),w.clientForm.classList.remove("disabled"),w.companyForm.classList.add("disabled"),w.activeForm="client"}function p(){w.clientFormBtn.classList.remove("active"),w.companyFormBtn.classList.add("active"),w.clientForm.classList.add("disabled"),w.companyForm.classList.remove("disabled"),w.activeForm="company"}function h(e,t,n,a){var o=e.value,r={id:o};b.makeRequest("/carManufacturers/getModels","post",r).then(function(e){e.success&&(_(t,"Selecione o modelo"),_(n,"Selecione a versão"),_(a,"Selecione o ano"),v(e.data,t,"name","id"))})}function m(e,t,n){var a=e.value,o={id:a};b.makeRequest("/carModels/getVersions","post",o).then(function(e){e.success&&(_(t,"Selecione a versão"),_(n,"Selecione o ano"),v(e.data,t,"name","id"))})}function f(e,t){var n=e.value,a={id:n};b.makeRequest("/carVersions/getVersionYears","post",a).then(function(e){e.success&&(_(t,"Selecione o ano"),g(e.data,t))})}function v(e,t,n,a){e.forEach(function(e){var o=new Option(e[n],e[a]);t.appendChild(o)})}function g(e,t){e.forEach(function(e){var n=new Option(e.car_year.name,e.car_year.id);t.appendChild(n)}),_()}function _(e,t){if(e){for(var n=e.options.length,a=n-1;a>=0;a--)e.options[a]=null;var o='<option value="" disabled selected hidden>'+t+"</option>";e.innerHTML=o}}var b={getFormValues:function(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n},makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})},validateForm:function(e,t){var n=this;this.removeInputErrors(t);var a=[];if(e.forEach(function(e){e.cpf&&n.validateCPF(e,a),e.date&&n.validateDate(e,a),e.isTrue&&n.validateIsTrueField(e,a),e.notEmpty&&n.validateEmptyField(e,a),e.cnpj&&n.validateCNPJ(e,a)}),a.length>0){a.forEach(function(e){return n.addInputError(e.inputName,e.message)});var o=document.querySelector(".error").offsetTop;return window.scrollTo({top:o-300,behavior:"smooth"}),!1}return!0},validateEmptyField:function(e,t){0===e.value.length&&this.createFormError("Este campo não pode estar vazio",e.inputName,t)},validateIsTrueField:function(e,t){e.value||this.createFormError("Este campo é obrigatório",e.inputName,t)},validateCPF:function(e,t){this.isValidCPF(e.value)||this.createFormError("CPF inválido",e.inputName,t)},isValidCPF:function(e){var t,n;if(t=0,"00000000000"==e)return!1;for(var a=1;a<=9;a++)t+=parseInt(e.substring(a-1,a))*(11-a);if(n=10*t%11,10!=n&&11!=n||(n=0),n!=parseInt(e.substring(9,10)))return!1;t=0;for(var a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return n=10*t%11,10!=n&&11!=n||(n=0),n==parseInt(e.substring(10,11))},validateCNPJ:function(e,t){this.isValidCNPJ(e.value)||this.createFormError("CNPJ inválido",e.inputName,t)},isValidCNPJ:function(e){if(!e)return!1;var t="string"==typeof e;if(!(t||Number.isInteger(e)||Array.isArray(e)))return!1;if(t){if(e.length>18)return!1;var n=/^\d{14}$/.test(e),o=/^\d{2}.\d{3}.\d{3}\/\d{4}-\d{2}$/.test(e);if(!n&&!o)return!1}var r=e.toString().match(/\d/g),i=Array.isArray(r)?r.map(Number):[];if(14!==i.length)return!1;if(1===[].concat(a(new Set(i))).length)return!1;var s=function(e){for(var t=i.slice(0,e),n=e-7,a=0,o=e;o>=1;o--){a+=t[e-o]*n--,n<2&&(n=9)}var r=11-a%11;return r>9?0:r},c=i.slice(12);return s(12)===c[0]&&s(13)===c[1]},removeInputErrors:function(e){e.querySelectorAll(".error").forEach(function(e){return e.classList.remove("error")})},validateDate:function(e,t){this.isValidDate(e.value)||this.createFormError("Data inválida",e.inputName,t)},isValidDate:function(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]},createFormError:function(e,t,n){var a={inputName:t,message:e};n.push(a)},addInputError:function(e,t){var n=document.querySelector("#"+e),a=n.querySelector(".step-input-error-message");n.classList.add("error"),a.textContent=t},formatDate:function(e){var t=e.split("/");return t[1]+"/"+t[0]+"/"+t[2]},activeSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="none"),n.style.display="flex"},disableSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="flex"),n.style.display="none"},masks:{cpf:function(e){return e.replace(/\D+/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},cnpj:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},phone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephonePhone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})-(\d)(\d{4})/,"$1$2-$3").replace(/(-\d{4})\d+?$/,"$1")},cep:function(e){return e.replace(/\D+/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1")},date:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1")}},splitPhone:function(e){var t=e.split(" ");return{phoneNumber:t[1],phoneAreaCode:t[0].replace(/[{()}]/g,"")}}},w={pageSection:document.querySelector("#workshop-new-order-section"),stateSelect:document.querySelector("#state-select select"),citySelect:document.querySelector("#city-select select"),carForm:document.querySelector("#new-car-form"),clientForm:document.querySelector("#new-client-form"),companyForm:document.querySelector("#new-company-form"),hasCellPhoneWhatsCheckbox:document.querySelector("#cellphone-whatsapp-checkbox"),hasPhoneWhatsCheckbox:document.querySelector("#phone-whatsapp-checkbox"),zipcodeInput:document.querySelector("#new-company-input-zipcode input"),addressInput:document.querySelector("#new-company-input-address input"),neighborhoodInput:document.querySelector("#new-company-input-neighborhood input"),stateOptions:document.querySelectorAll("#state-select select option"),clientFormBtn:document.querySelector("#add-new-client-btn"),companyFormBtn:document.querySelector("#add-new-company-btn"),activeForm:"client",addCarBtn:document.querySelector("#add-new-car"),carsContainer:document.querySelector("#cars-container"),carManufacturers:[],carColors:[],clientCPF:document.querySelector("#new-client-input-document input").value,clientCNPJ:document.querySelector("#new-company-input-document input").value,clientEmail:document.querySelector("#new-client-input-email input").value,companyEmail:document.querySelector("#new-company-input-email input").value};!function(){document.querySelectorAll("select").forEach(function(e){e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})}),w.carForm.addEventListener("submit",i),w.stateSelect.addEventListener("change",l),w.zipcodeInput.addEventListener("input",function(e){return s(e.target)}),w.clientFormBtn.addEventListener("click",u),w.companyFormBtn.addEventListener("click",p),w.addCarBtn.addEventListener("click",function(e){return t(e)}),w.pageSection.querySelectorAll("input").forEach(function(e){var t=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=b.masks[t](e.target.value)})})}(),w.pageSection.dataset.cityId&&l(null,null,w.pageSection.dataset.cityId),b.makeRequest("/workshops/getManufacturers","get",{}).then(function(t){w.carManufacturers=t,b.makeRequest("/workshops/getColors","get",{}).then(function(t){w.carColors=t,e(w.pageSection.dataset.clientId)}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)}),w.pageSection.dataset.type&&("person"==w.pageSection.dataset.type&&u(),"company"==w.pageSection.dataset.type&&p())}}},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){e.remove()}function t(e){e.classList.add("selected")}function n(){g.activeClientId&&(window.location.href="/oficina/cliente/editar/"+g.activeClientId)}function a(e){e.preventDefault();var t=v.getFormValues(g.scheduleForm),n=t.date,a=t.hour,r=t.content_status,i=t.return_date,s=t.description,c=t.insurance_company,l=t.delivery_date,d=v.formatDate(n,"-"),u=v.formatDate(l,"-"),p=[{value:d,inputName:"calendar-box",notEmpty:!0,date:!0},{value:u,inputName:"calendar-box-2",notEmpty:!0,date:!0},{value:a,inputName:"hours-select",notEmpty:!0}];if(i){var h=v.formatDate(i,"-");p.push({value:h,inputName:"return-schedule-date-input",notEmpty:!0,date:!0})}if(v.validateForm(p,document)){if(!g.activeClientId){g.pageMessage.innerText="Nenhum cliente selecionado",g.pageMessage.classList.add("error");var m=document.querySelector(".error").offsetTop;return void window.scrollTo({top:m-300,behavior:"smooth"})}if(!g.activeCarId){g.pageMessage.innerText="Nenhum veículo selecionado",g.pageMessage.classList.add("error");var f=document.querySelector(".error").offsetTop;return void window.scrollTo({top:f-300,behavior:"smooth"})}var _=g.servicesContainer.querySelectorAll(".workshop-new-order-input-wrapper"),b=l.split("-"),w=b[2]+"/"+b[1]+"/"+b[0],y=n.split("-"),k=y[2]+"/"+y[1]+"/"+y[0],S="";if(i){var C=i.split("-");S=C[2]+"/"+C[1]+"/"+C[0]}var x=[];_.forEach(function(e){var t=e.querySelector("#services-select select").value,n=e.querySelector("#service-supplier-input input").value,a=e.querySelector("#service-technician-input input").value,o=!1;e.dataset.id&&(o=e.dataset.id);var r={workshop_service_id:t,supplier:n,technician:a};o&&(r.id=o),t&&x.push(r)});var $=[];if("list"===g.activeLabelView&&($=o()),"checklist"===g.activeLabelView){var E=v.getContainerCheckBoxValues(g.checkboxViewContainer);E.length>0&&E.forEach(function(e){var t={scheduling_label_id:e.labelId,return_km:null};e.id&&(t.id=e.id),$.push(t)})}var q={scheduling:{date:k,hour:a,delivery_date:w,content_status:r,user_id:g.activeClientId,car_id:g.activeCarId,description:s,scheduling_type:"service_order",insurance_company:c,id:g.clientSelectContainer.dataset.schedulingId,return_date:S},scheduling_services:x,scheduling_labels:$};v.activeSpinner("workshop-new-order-schedule-btn"),v.makeRequest("/schedulings/createSchedule","put",q).then(function(e){v.disableSpinner("workshop-new-order-schedule-btn"),window.location.href="/oficina?success=true&message=Agendamento atualizado com sucesso"}).catch(function(e){v.disableSpinner("workshop-new-order-schedule-btn"),window.location.href="/oficina?success=false&message=Ocorreu um erro, por favor tente novamente",console.log(e)})}}function o(){var e=[];return g.listViewContainer.querySelectorAll(".workshop-new-order-service-list.selected").forEach(function(t){var n=!1;t.dataset.id&&(n=t.dataset.id);var a=t.querySelector("#return-km-input input"),o=t.querySelector("#return-date-input input"),r={scheduling_label_id:t.id,return_km:a.value,return_month:o.value};n&&(r.id=n),e.push(r)}),e}function r(){g.listViewBtn.classList.remove("active"),g.checklistViewBtn.classList.add("active"),g.listViewContainer.classList.add("disabled"),g.checkboxViewContainer.classList.remove("disabled"),g.activeLabelView="checklist"}function i(){g.checklistViewBtn.classList.remove("active"),g.listViewBtn.classList.add("active"),g.checkboxViewContainer.classList.add("disabled"),g.listViewContainer.classList.remove("disabled"),g.activeLabelView="list"}function s(e){e.preventDefault();var t=document.querySelector("#services-select select").innerHTML,n=document.createElement("div");n.classList.add("workshop-new-order-input-wrapper","new-schedule");var a=l("Código","id-teste","name"),o=l("Fornecedor","service-supplier-input","name"),r=l("Técnico","service-technician-input","name"),i=c('\n                <div class="workshop-new-order-input-container select" id="services-select">\n                    <label class="workshop-new-order-input-label">Descrição</label>\n                    <div class="workshop-new-order-input-icon-container">\n                        <select class="workshop-new-order-input select placeholder-option">\n                    </div>\n                    <span class="step-input-error-message"></span>\n                </div>\n            ');i.querySelector("select").innerHTML=t,n.innerHTML+=a,n.appendChild(i),n.innerHTML+=o,n.innerHTML+=r,n.querySelector("select").addEventListener("change",function(e){e.target.classList.remove("placeholder-option")}),g.servicesContainer.appendChild(n)}function c(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function l(e,t,n){return'\n                <div class="workshop-new-order-input-container" id="'+t+'">\n                    <label class="workshop-new-order-input-label">'+e+'</label>\n                    <div class="workshop-new-order-input-icon-container">\n                        <input type="text" class="workshop-new-order-input" placeholder="'+e+'" name="'+n+'">\n                    </div>\n                    <span class="step-input-error-message"></span>\n                </div>\n            '}function d(e){var t=e.target.value;g.clientSelectContainer.innerHTML="",g.carSelectContainer.innerHTML="",g.activeClientId=null,g.activeCarId=null,""!=t&&v.makeRequest("/workshops/getClients","post",{data:t}).then(function(e){
if(0==e.length)return u(g.clientSelectContainer,"Nenhum cliente encontrado");p(e)}).catch(function(e){console.log(e)})}function u(e,t){var n='\n                <div class="workshop-new-order-select-item">\n                    <p>'+t+"</p>\n                </div>\n            ";e.innerHTML=n}function p(e){e.forEach(function(e){var t=e.name+"   "+e.document,n=document.createElement("div"),a=document.createElement("p");n.classList.add("workshop-new-order-select-item"),a.innerText=t,n.appendChild(a),n.addEventListener("click",function(){return h(n,e.id,!1)}),g.clientSelectContainer.appendChild(n)})}function h(e,t,n){g.clientSelectContainer.querySelectorAll(".workshop-new-order-select-item.selected").forEach(function(e){e.classList.remove("selected")}),g.carSelectContainer.innerHTML="",g.activeCarId=null,e.classList.add("selected"),g.activeClientId=t,v.makeRequest("/workshops/getClientCars","post",{client_id:g.activeClientId}).then(function(e){if(0==e.length)return u(g.carSelectContainer,"Nenhum veículo encontrado, cadastre um novo");m(e,n)}).catch(function(e){console.log(e)})}function m(e,t){var n=g.clientSelectContainer.dataset.carId;e.forEach(function(e){var a=e.car_model.name,o=e.car_version_year.car_year.name,r=e.car_version.name,i=e.car_manufacturer.name,s=a+" "+o+" "+r+" "+i,c=document.createElement("div"),l=document.createElement("p");c.classList.add("workshop-new-order-select-item"),l.innerText=s,c.appendChild(l),c.addEventListener("click",function(){return f(c,e.id)}),t&&e.id==n&&f(c,e.id),g.carSelectContainer.appendChild(c)})}function f(e,t){g.carSelectContainer.querySelectorAll(".workshop-new-order-select-item.selected").forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),g.activeCarId=t}var v={getFormValues:function(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n},makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})},getContainerCheckBoxValues:function(e){var t=e.querySelectorAll("input"),n=[];return t.forEach(function(e){if(e.checked){var t={labelId:e.value};if(e.dataset.id&&(t.id=e.dataset.id),n.includes(t))return;n.push(t)}}),n},validateForm:function(e,t){var n=this;this.removeInputErrors(t);var a=[];if(e.forEach(function(e){e.date&&n.validateDate(e,a),e.notEmpty&&n.validateEmptyField(e,a)}),a.length>0){a.forEach(function(e){return n.addInputError(e.inputName,e.message)});var o=document.querySelector(".error").offsetTop;return window.scrollTo({top:o-300,behavior:"smooth"}),!1}return!0},validateEmptyField:function(e,t){0===e.value.length&&this.createFormError("Este campo não pode estar vazio",e.inputName,t)},removeInputErrors:function(e){e.querySelectorAll(".error").forEach(function(e){return e.classList.remove("error")})},validateDate:function(e,t){this.isValidDate(e.value)||this.createFormError("Data inválida",e.inputName,t)},isValidDate:function(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]},createFormError:function(e,t,n){var a={inputName:t,message:e};n.push(a)},addInputError:function(e,t){var n=document.querySelector("#"+e),a=n.querySelector(".step-input-error-message");n.classList.add("error"),a.textContent=t},formatDate:function(e,t){var n=e.split(t);return n[1]+"/"+n[0]+"/"+n[2]},activeSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="none"),n.style.display="flex"},disableSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="block"),n.style.display="none"},masks:{date:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1")}}},g={scheduleForm:document.querySelector("#workshop-new-schedule-form"),searchInputElement:document.querySelector("#search-client-input input"),clientSelectContainer:document.querySelector("#workshop-new-order-select-itens-container"),carSelectContainer:document.querySelector("#workshop-new-order-car-itens-container"),activeClientId:null,activeCarId:null,addNewServiceBtn:document.querySelector("#add-new-service"),servicesContainer:document.querySelector("#workshop-new-order-services-container"),productsContainer:document.querySelector("#workshop-new-order-products-container"),checklistViewBtn:document.querySelector("#checklist-view-btn"),listViewBtn:document.querySelector("#list-view-btn"),checkboxViewContainer:document.querySelector("#workshop-new-schedule-checkboxes"),listViewContainer:document.querySelector("#workshop-new-schedule-list"),pageMessage:document.querySelector("#workshop-new-order-page-message"),activeLabelView:"checklist",calendarBox:$("#calendar-box"),hourSelect:document.querySelector("#hours-select select"),newCarBtn:document.querySelector("#add-new-car"),scheduleDateSelect:document.querySelector("#calendar-box input")};!function(){document.querySelectorAll("select").forEach(function(e){""==e.value&&e.classList.add("placeholder-option"),e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})}),g.scheduleForm.addEventListener("submit",a),g.searchInputElement.addEventListener("input",d),g.addNewServiceBtn.addEventListener("click",s),g.checklistViewBtn.addEventListener("click",r),g.listViewBtn.addEventListener("click",i),g.listViewContainer.querySelectorAll(".workshop-new-order-service-list").forEach(function(n){var a=n.querySelector("#add-label-list-btn"),o=n.querySelector("#remove-label-list-btn");a.addEventListener("click",function(){return t(n)}),o.addEventListener("click",function(){return e(n)})}),g.newCarBtn.addEventListener("click",n),document.querySelectorAll("input").forEach(function(e){var t=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=v.masks[t](e.target.value)})})}(),function(){var e=g.clientSelectContainer.dataset.name,t=g.clientSelectContainer.dataset.id,n=g.clientSelectContainer.dataset.document,a=e+"   "+n,o=document.createElement("div"),r=document.createElement("p");o.classList.add("workshop-new-order-select-item","selected"),r.innerText=a,o.appendChild(r),o.addEventListener("click",function(){return h(o,t,!1)}),h(o,t,!0),g.clientSelectContainer.appendChild(o)}(),function(){function e(e,t,n){var a='<option value="" disabled selected hidden>'+n+"</option>";t.innerHTML=a,e.forEach(function(e){var n=new Option(e,e);t.appendChild(n)})}var t=moment().add(1,"days").toDate(),n=moment().add(1,"year").toDate(),a=g.calendarBox.data("enabled-days"),o=g.calendarBox.data("disabled-dates");a||(a=[]),o||(o=[]),new Pikaday({field:document.getElementById("datepicker-input"),format:"DD-MM-YYYY",container:document.getElementById("calendar-box"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(t){var n=moment(t).format("YYYY-MM-DD");v.makeRequest("/schedulings/available_hours","post",{workshop_id:g.calendarBox.data("workshop-id"),date:n}).then(function(t){t.success&&e(t.data,g.hourSelect,"Escolha um horário")}).catch(function(e){console.log(e)})}}),new Pikaday({field:document.getElementById("datepicker-input-2"),format:"DD-MM-YYYY",container:document.getElementById("datepicker-container-2"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(e){}}),new Pikaday({field:document.getElementById("datepicker-input-3"),format:"DD-MM-YYYY",container:document.getElementById("datepicker-container-3"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(e){}})}(),function(){var e=g.scheduleDateSelect.value.split("-"),t=e[2]+"-"+e[1]+"-"+e[0];v.makeRequest("/schedulings/available_hours","post",{workshop_id:g.calendarBox.data("workshop-id"),date:t}).then(function(e){e.success&&e.data.forEach(function(e){var t=new Option(e,e);g.hourSelect.appendChild(t)})}).catch(function(e){console.log(e)})}()}}},{}],54:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){e.preventDefault(),t()}function t(){var e=n('\n                <div class="workshop-new-order-wrapper car-fields">\n                    <div class="workshop-new-order-close">\n                      <button id="close-card-btn" type="button"><img src="/img/svg/close.svg" alt="remover-veiculo"></button>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="manufacturer-select">\n                            <label class="workshop-new-order-input-label">Marca</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="model">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a marca</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="workshop-new-order-input-container select border" id="model-select">\n                            <label class="workshop-new-order-input-label">Modelo</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="model">\n                                    <option disabled="" selected="" hidden="" value="">Selecione o modelo</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="version-select">\n                            <label class="workshop-new-order-input-label">Versão</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="versão">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a versão</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="workshop-new-order-input-container select border" id="year-select">\n                            <label class="workshop-new-order-input-label">Ano</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="year">\n                                    <option disabled="" selected="" hidden="" value="">Selecione o ano</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-wrapper">\n                        <div class="workshop-new-order-input-container select border" id="color-select">\n                            <label class="workshop-new-order-input-label">Cor</label>\n                            <div class="workshop-new-order-input-icon-container">\n                                <select class="workshop-new-order-input select" name="color">\n                                    <option disabled="" selected="" hidden="" value="">Selecione a cor</option>\n                                </select>\n                            </div>\n                            <span class="step-input-error-message"></span>\n                        </div>\n                        <div class="workshop-new-order-input-wrapper new-client fifty">\n                            <div class="workshop-new-order-input-container border" id="new-client-input-plate">\n                                <label class="workshop-new-order-input-label">Placa</label>\n                                <div class="workshop-new-order-input-icon-container">\n                                    <input type="text" class="workshop-new-order-input" placeholder="AAA-000" name="plate">\n                                </div>\n                                <span class="step-input-error-message"></span>\n                            </div>\n                            <div class="workshop-new-order-input-container border" id="new-client-input-mileage">\n                                <label class="workshop-new-order-input-label">KM</label>\n                                <div class="workshop-new-order-input-icon-container">\n                                    <input type="text" class="workshop-new-order-input" placeholder="KM" name="mileage">\n                                </div>\n                                <span class="step-input-error-message"></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ');e.querySelectorAll("select").forEach(function(e){e.classList.add("placeholder-option"),e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})});var t=e.querySelector("#manufacturer-select select"),a=e.querySelector("#model-select select"),o=e.querySelector("#version-select select"),r=e.querySelector("#year-select select"),i=e.querySelector("#color-select select"),s=e.querySelector("#close-card-btn");m(_.carColors,i,"name","id"),m(_.carManufacturers,t,"name","id"),t.addEventListener("change",function(e){return u(t,a,o,r)}),a.addEventListener("change",function(e){return p(a,o,r)}),o.addEventListener("change",function(e){return h(o,r)}),s.addEventListener("click",function(t){return e.remove()}),_.carsContainer.appendChild(e)}function n(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function o(e){function t(e){g.makeRequest("/users/registerWorkshopUser","post",e).then(function(e){if(e.data.success)return n(e.data.data.id);console.log(e),window.location.href="/oficina?success=false&message=Ocorreu um erro, por favor tente novamente"}).catch(function(e){window.location.href="/oficina?success=false&message=Ocorreu um erro, por favor tente novamente",console.log(e)})}function n(e){m.forEach(function(t){t.user_id=e,g.makeRequest("/pages/registerNewCar","post",t).then(function(e){}).catch(function(e){console.log(e)})}),window.location.href="/oficina?success=true&message=Cliente cadastrado com sucesso",g.disableSpinner("workshop-new-order-new-client-btn")}e.preventDefault();var a=void 0,o=void 0;if("client"===_.activeForm){a=g.getFormValues(_.clientForm);var r=a.document.replace(/-/g,"").replace(/\./g,"").trim(),i=g.formatDate(a.birthday);o=[{value:a.name,inputName:"new-client-input-name",notEmpty:!0},{value:i,inputName:"new-client-input-birthday",notEmpty:!0,date:!0},{value:a.gender,inputName:"new-client-input-gender",notEmpty:!0},{value:a.email,inputName:"new-client-input-email",notEmpty:!0},{value:r,inputName:"new-client-input-document",notEmpty:!0,cpf:!0},{value:a.cellphone,inputName:"new-client-input-cellphone",notEmpty:!0}]}if("company"===_.activeForm){a=g.getFormValues(_.companyForm);var s=a.responsible_document.replace(/-/g,"").replace(/\./g,"").trim();o=[{value:a.name,inputName:"new-company-input-name",notEmpty:!0},{value:a.email,inputName:"new-company-input-email",notEmpty:!0},{value:a.document,inputName:"new-company-input-document",notEmpty:!0,cnpj:!0},{value:a.company_name,inputName:"new-company-input-company-name",notEmpty:!0},{value:s,inputName:"new-company-input-responsible-document",notEmpty:!0,cpf:!0},{value:a.responsible_name,inputName:"new-company-input-responsible-name",notEmpty:!0},{value:a.company_zipcode,inputName:"new-company-input-zipcode",notEmpty:!0},{value:a.company_address,inputName:"new-company-input-address",notEmpty:!0},{value:a.company_number,inputName:"new-company-input-number",notEmpty:!0},{value:a.company_neighborhood,inputName:"new-company-input-neighborhood",notEmpty:!0},{value:a.company_state,inputName:"state-select",notEmpty:!0},{value:a.company_city,inputName:"city-select",notEmpty:!0}]}var c=[];if(c=c.concat(o),g.validateForm(c,_.pageSection)){var l=g.splitPhone(a.phone),d=g.splitPhone(a.cellphone),u=_.hasCellPhoneWhatsCheckbox.checked,p=_.hasPhoneWhatsCheckbox.checked,h={name:a.name,email:a.email,document:a.document,cellphone:d.phoneNumber?d.phoneNumber:null,phone:l.phoneNumber?l.phoneNumber:null,cellphone_area_code:d.phoneAreaCode?d.phoneAreaCode:null,phone_area_code:l.phoneAreaCode?l.phoneAreaCode:null,terms_of_accession:!0,cellphone_has_whatsapp:u,phone_has_whatsapp:p};"client"===_.activeForm&&(h.birthday=a.birthday,h.gender=a.gender,h.type="person"),"company"===_.activeForm&&(h.company_name=a.company_name,h.responsible_document=a.responsible_document,h.responsible_name=a.responsible_name,h.company_zipcode=a.company_zipcode,h.company_address=a.company_address,h.company_number=a.company_number,h.company_neighborhood=a.company_neighborhood,h.company_complement=a.company_complement,h.state_id=a.company_state,h.city_id=a.company_city,h.type="company");var m=[];_.carsContainer.querySelectorAll(".car-fields").forEach(function(e){var t=e.querySelector("#manufacturer-select select").value,n=e.querySelector("#model-select select").value,a=e.querySelector("#version-select select").value,o=e.querySelector("#year-select select").value,r=e.querySelector("#color-select select").value,i=e.querySelector("#new-client-input-plate input").value,s=e.querySelector("#new-client-input-mileage input").value;m.push({car:{car_manufacturer_id:t,car_model_id:n,car_version_id:a,car_version_year_id:o,license_plate:i,car_color_id:r,km:s}})}),g.makeRequest("/users/email-exists","post",{email:a.email}).then(function(e){if(e.result.success){if(e.result.exists){g.addInputError("new-client-input-email","O e-mail informado já existe"),g.addInputError("new-company-input-email","O e-mail informado já existe");var n=document.querySelector(".error").offsetTop;return void window.scrollTo({top:n-300,behavior:"smooth"})}g.makeRequest("/users/workshop-has-user","post",{document:a.document}).then(function(e){if(e.result.success){if(e.result.exists){g.addInputError("new-client-input-document","O CPF informado já foi cadastrado"),g.addInputError("new-company-input-document","O CNPJ informado já foi cadastrado");var n=document.querySelector(".error").offsetTop;return void window.scrollTo({top:n-300,behavior:"smooth"})}g.activeSpinner("workshop-new-order-new-client-btn"),t(h)}}).catch(function(e){return console.log(e)})}}).catch(function(e){return console.log(e)})}}function r(e){if(9===e.value.length){var t=e.value;g.makeRequest("https://viacep.com.br/ws/"+t+"/json/","get").then(function(e){e.erro||i(e)}).catch(function(e){return console.log(e)})}}function i(e){_.addressInput.value=e.logradouro,_.neighborhoodInput.value=e.bairro,_.stateOptions.forEach(function(t){var n=t.text.split(" "),a=n[n.length-1].replace(/[{()}]/g,"");console.log(a,e.uf),a===e.uf&&(t.selected="selected")}),s(null,e.localidade)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_.stateSelect.value,a={id:n};g.makeRequest("/Cities/getStateCities","post",a).then(function(e){return c(e,t)}).catch(function(e){return console.log(e)})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_.citySelect.querySelectorAll(".step-input-city-select-option").forEach(function(e){return e.remove()}),e.forEach(function(e){t&&e.name;var n=document.createElement("option");n.classList.add("step-input-city-select-option"),n.innerText=e.name,n.value=e.id,t===e.name&&(n.selected=!0),_.citySelect.appendChild(n)})}function l(){_.clientFormBtn.classList.add("active"),_.companyFormBtn.classList.remove("active"),_.clientForm.classList.remove("disabled"),_.companyForm.classList.add("disabled"),_.activeForm="client"}function d(){_.clientFormBtn.classList.remove("active"),_.companyFormBtn.classList.add("active"),_.clientForm.classList.add("disabled"),_.companyForm.classList.remove("disabled"),_.activeForm="company"}function u(e,t,n,a){var o=e.value,r={id:o};g.makeRequest("/carManufacturers/getModels","post",r).then(function(e){e.success&&(v(t,"Selecione o modelo"),v(n,"Selecione a versão"),v(a,"Selecione o ano"),m(e.data,t,"name","id"))})}function p(e,t,n){var a=e.value,o={id:a};g.makeRequest("/carModels/getVersions","post",o).then(function(e){e.success&&(v(t,"Selecione a versão"),v(n,"Selecione o ano"),m(e.data,t,"name","id"))})}function h(e,t){var n=e.value,a={id:n};g.makeRequest("/carVersions/getVersionYears","post",a).then(function(e){e.success&&(v(t,"Selecione o ano"),f(e.data,t))})}function m(e,t,n,a){e.forEach(function(e){var o=new Option(e[n],e[a]);t.appendChild(o)})}function f(e,t){e.forEach(function(e){var n=new Option(e.car_year.name,e.car_year.id);t.appendChild(n)}),v()}function v(e,t){if(e){for(var n=e.options.length,a=n-1;a>=0;a--)e.options[a]=null;var o='<option value="" disabled selected hidden>'+t+"</option>";e.innerHTML=o}}var g={getFormValues:function(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n},makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})},validateForm:function(e,t){var n=this;this.removeInputErrors(t);var a=[];if(e.forEach(function(e){e.cpf&&n.validateCPF(e,a),e.date&&n.validateDate(e,a),e.isTrue&&n.validateIsTrueField(e,a),e.notEmpty&&n.validateEmptyField(e,a),e.cnpj&&n.validateCNPJ(e,a)}),a.length>0){a.forEach(function(e){return n.addInputError(e.inputName,e.message)});var o=document.querySelector(".error").offsetTop;return window.scrollTo({top:o-300,behavior:"smooth"}),!1}return!0},validateEmptyField:function(e,t){0===e.value.length&&this.createFormError("Este campo não pode estar vazio",e.inputName,t)},validateIsTrueField:function(e,t){e.value||this.createFormError("Este campo é obrigatório",e.inputName,t)},validateCPF:function(e,t){this.isValidCPF(e.value)||this.createFormError("CPF inválido",e.inputName,t)},isValidCPF:function(e){var t,n;if(t=0,"00000000000"==e)return!1;for(var a=1;a<=9;a++)t+=parseInt(e.substring(a-1,a))*(11-a);if(n=10*t%11,10!=n&&11!=n||(n=0),n!=parseInt(e.substring(9,10)))return!1;t=0;for(var a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return n=10*t%11,10!=n&&11!=n||(n=0),n==parseInt(e.substring(10,11))},validateCNPJ:function(e,t){this.isValidCNPJ(e.value)||this.createFormError("CNPJ inválido",e.inputName,t)},isValidCNPJ:function(e){if(!e)return!1;var t="string"==typeof e;if(!(t||Number.isInteger(e)||Array.isArray(e)))return!1;if(t){if(e.length>18)return!1;var n=/^\d{14}$/.test(e),o=/^\d{2}.\d{3}.\d{3}\/\d{4}-\d{2}$/.test(e);if(!n&&!o)return!1}var r=e.toString().match(/\d/g),i=Array.isArray(r)?r.map(Number):[];if(14!==i.length)return!1;if(1===[].concat(a(new Set(i))).length)return!1;var s=function(e){for(var t=i.slice(0,e),n=e-7,a=0,o=e;o>=1;o--){a+=t[e-o]*n--,n<2&&(n=9)}var r=11-a%11;return r>9?0:r},c=i.slice(12);return s(12)===c[0]&&s(13)===c[1]},removeInputErrors:function(e){e.querySelectorAll(".error").forEach(function(e){return e.classList.remove("error")})},validateDate:function(e,t){this.isValidDate(e.value)||this.createFormError("Data inválida",e.inputName,t)},isValidDate:function(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]},createFormError:function(e,t,n){var a={inputName:t,message:e};n.push(a)},addInputError:function(e,t){var n=document.querySelector("#"+e),a=n.querySelector(".step-input-error-message");n.classList.add("error"),a.textContent=t},formatDate:function(e){var t=e.split("/");return t[1]+"/"+t[0]+"/"+t[2]},activeSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="none"),n.style.display="flex"},disableSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="flex"),n.style.display="none"},masks:{cpf:function(e){return e.replace(/\D+/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},cnpj:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},phone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")},telephonePhone:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{4})-(\d)(\d{4})/,"$1$2-$3").replace(/(-\d{4})\d+?$/,"$1")},cep:function(e){return e.replace(/\D+/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1")},date:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1")}},splitPhone:function(e){var t=e.split(" ");return{phoneNumber:t[1],phoneAreaCode:t[0].replace(/[{()}]/g,"")}}},_={pageSection:document.querySelector("#workshop-new-order-section"),stateSelect:document.querySelector("#state-select select"),citySelect:document.querySelector("#city-select select"),carForm:document.querySelector("#new-car-form"),clientForm:document.querySelector("#new-client-form"),companyForm:document.querySelector("#new-company-form"),hasCellPhoneWhatsCheckbox:document.querySelector("#cellphone-whatsapp-checkbox"),hasPhoneWhatsCheckbox:document.querySelector("#phone-whatsapp-checkbox"),zipcodeInput:document.querySelector("#new-company-input-zipcode input"),addressInput:document.querySelector("#new-company-input-address input"),neighborhoodInput:document.querySelector("#new-company-input-neighborhood input"),stateOptions:document.querySelectorAll("#state-select select option"),clientFormBtn:document.querySelector("#add-new-client-btn"),companyFormBtn:document.querySelector("#add-new-company-btn"),activeForm:"client",addCarBtn:document.querySelector("#add-new-car"),carsContainer:document.querySelector("#cars-container"),carManufacturers:[],carColors:[]};!function(){document.querySelectorAll("select").forEach(function(e){e.classList.add("placeholder-option"),e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})}),_.carForm.addEventListener("submit",o),_.stateSelect.addEventListener("change",s),_.zipcodeInput.addEventListener("input",function(e){return r(e.target)}),_.clientFormBtn.addEventListener("click",l),_.companyFormBtn.addEventListener("click",d),_.addCarBtn.addEventListener("click",function(t){return e(t)}),_.pageSection.querySelectorAll("input").forEach(function(e){var t=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=g.masks[t](e.target.value)})})}(),g.makeRequest("/workshops/getManufacturers","get",{}).then(function(e){_.carManufacturers=e,g.makeRequest("/workshops/getColors","get",{}).then(function(e){_.carColors=e,t()}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}}},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e){e.remove()}function t(e){e.classList.add("selected")}function n(){g.activeClientId&&(window.location.href="/oficina/cliente/editar/"+g.activeClientId)}function a(e){e.preventDefault();var t=v.getFormValues(g.scheduleForm),n=t.date,a=t.hour,r=t.content_status,i=t.return_date,s=t.description,c=t.insurance_company,l=t.delivery_date,d=v.formatDate(n,"-"),u=v.formatDate(l,"-"),p=[{value:d,inputName:"calendar-box",notEmpty:!0,date:!0},{value:u,inputName:"calendar-box-2",notEmpty:!0,date:!0},{value:a,inputName:"hours-select",notEmpty:!0}];if(i){var h=v.formatDate(i,"-");p.push({value:h,inputName:"return-schedule-date-input",notEmpty:!0,date:!0})}if(v.validateForm(p,document)){if(!g.activeClientId){g.pageMessage.innerText="Nenhum cliente selecionado",g.pageMessage.classList.add("error");var m=document.querySelector(".error").offsetTop;return void window.scrollTo({top:m-300,behavior:"smooth"})}if(!g.activeCarId){g.pageMessage.innerText="Nenhum veículo selecionado",g.pageMessage.classList.add("error");var f=document.querySelector(".error").offsetTop;return void window.scrollTo({top:f-300,behavior:"smooth"})}var _=g.servicesContainer.querySelectorAll(".workshop-new-order-input-wrapper"),b=l.split("-"),w=b[2]+"/"+b[1]+"/"+b[0],y=n.split("-"),k=y[2]+"/"+y[1]+"/"+y[0],S="";if(i){var C=i.split("-");S=C[2]+"/"+C[1]+"/"+C[0]}var x=[];_.forEach(function(e){var t=e.querySelector("#services-select select").value,n=e.querySelector("#service-supplier-input input").value,a=e.querySelector("#service-technician-input input").value,o={workshop_service_id:t,supplier:n,technician:a};t&&x.push(o)});var $=[];if("list"===g.activeLabelView&&($=o()),"checklist"===g.activeLabelView){var E=v.getContainerCheckBoxValues(g.checkboxViewContainer);E.length>0&&E.forEach(function(e){var t={scheduling_label_id:e,return_km:null};$.push(t)})}var q={scheduling:{date:k,hour:a,delivery_date:w,content_status:r,user_id:g.activeClientId,car_id:g.activeCarId,description:s,scheduling_type:"service_order",insurance_company:c,return_date:S},scheduling_services:x,scheduling_labels:$};v.activeSpinner("workshop-new-order-schedule-btn"),v.makeRequest("/schedulings/createSchedule","post",q).then(function(e){v.disableSpinner("workshop-new-order-schedule-btn"),window.location.href="/oficina?success=true&message=Agendamento criado com sucesso"}).catch(function(e){v.disableSpinner("workshop-new-order-schedule-btn"),window.location.href="/oficina?success=false&message=Ocorreu um erro, por favor tente novamente",console.log(e)})}}function o(){var e=[];return g.listViewContainer.querySelectorAll(".workshop-new-order-service-list.selected").forEach(function(t){var n=t.querySelector("#return-km-input input"),a=t.querySelector("#return-date-input input"),o={scheduling_label_id:t.id,return_km:n.value,return_month:a.value};e.push(o)}),e}function r(){g.listViewBtn.classList.remove("active"),
g.checklistViewBtn.classList.add("active"),g.listViewContainer.classList.add("disabled"),g.checkboxViewContainer.classList.remove("disabled"),g.activeLabelView="checklist"}function i(){g.checklistViewBtn.classList.remove("active"),g.listViewBtn.classList.add("active"),g.checkboxViewContainer.classList.add("disabled"),g.listViewContainer.classList.remove("disabled"),g.activeLabelView="list"}function s(e){e.preventDefault();var t=document.querySelector("#services-select select").innerHTML,n=document.createElement("div");n.classList.add("workshop-new-order-input-wrapper","new-schedule");var a=l("Código","id-teste","name"),o=l("Fornecedor","service-supplier-input","name"),r=l("Técnico","service-technician-input","name"),i=c('\n                <div class="workshop-new-order-input-container select" id="services-select">\n                    <label class="workshop-new-order-input-label">Descrição</label>\n                    <div class="workshop-new-order-input-icon-container">\n                        <select class="workshop-new-order-input select placeholder-option" name="service[1][service]">\n                    </div>\n                    <span class="step-input-error-message"></span>\n                </div>\n            ');i.querySelector("select").innerHTML=t,n.innerHTML+=a,n.appendChild(i),n.innerHTML+=o,n.innerHTML+=r,n.querySelector("select").addEventListener("change",function(e){e.target.classList.remove("placeholder-option")}),g.servicesContainer.appendChild(n)}function c(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function l(e,t,n){return'\n                <div class="workshop-new-order-input-container" id="'+t+'">\n                    <label class="workshop-new-order-input-label">'+e+'</label>\n                    <div class="workshop-new-order-input-icon-container">\n                        <input type="text" class="workshop-new-order-input" placeholder="'+e+'" name="'+n+'">\n                    </div>\n                    <span class="step-input-error-message"></span>\n                </div>\n            '}function d(e){var t=e.target.value;g.clientSelectContainer.innerHTML="",g.carSelectContainer.innerHTML="",g.activeClientId=null,g.activeCarId=null,""!=t&&v.makeRequest("/workshops/getClients","post",{data:t}).then(function(e){if(0==e.length)return u(g.clientSelectContainer,"Nenhum cliente encontrado");p(e)}).catch(function(e){console.log(e)})}function u(e,t){var n='\n                <div class="workshop-new-order-select-item">\n                    <p>'+t+"</p>\n                </div>\n            ";e.innerHTML=n}function p(e){e.forEach(function(e){var t=e.name+"   "+e.document,n=document.createElement("div"),a=document.createElement("p");n.classList.add("workshop-new-order-select-item"),a.innerText=t,n.appendChild(a),n.addEventListener("click",function(){return h(n,e.id)}),g.clientSelectContainer.appendChild(n)})}function h(e,t){g.clientSelectContainer.querySelectorAll(".workshop-new-order-select-item.selected").forEach(function(e){e.classList.remove("selected")}),g.carSelectContainer.innerHTML="",g.activeCarId=null,e.classList.add("selected"),g.activeClientId=t,v.makeRequest("/workshops/getClientCars","post",{client_id:g.activeClientId}).then(function(e){if(0==e.length)return u(g.carSelectContainer,"Nenhum veículo encontrado, cadastre um novo");m(e)}).catch(function(e){console.log(e)})}function m(e){e.forEach(function(e){var t=e.car_model.name,n=e.car_version_year.car_year.name,a=e.car_version.name,o=e.car_manufacturer.name,r=t+" "+n+" "+a+" "+o,i=document.createElement("div"),s=document.createElement("p");i.classList.add("workshop-new-order-select-item"),s.innerText=r,i.appendChild(s),i.addEventListener("click",function(){return f(i,e.id)}),g.carSelectContainer.appendChild(i)})}function f(e,t){g.carSelectContainer.querySelectorAll(".workshop-new-order-select-item.selected").forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),g.activeCarId=t}var v={getFormValues:function(e){for(var t=e.elements,n={},a=0;a<t.length;a++){var o=t.item(a);n[o.name]=o.value}return n},makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})},getContainerCheckBoxValues:function(e){var t=e.querySelectorAll("input"),n=[];return t.forEach(function(e){if(e.checked){if(n.includes(e.value))return;n.push(e.value)}}),n},validateForm:function(e,t){var n=this;this.removeInputErrors(t);var a=[];if(e.forEach(function(e){e.date&&n.validateDate(e,a),e.notEmpty&&n.validateEmptyField(e,a)}),a.length>0){a.forEach(function(e){return n.addInputError(e.inputName,e.message)});var o=document.querySelector(".error").offsetTop;return window.scrollTo({top:o-300,behavior:"smooth"}),!1}return!0},validateEmptyField:function(e,t){0===e.value.length&&this.createFormError("Este campo não pode estar vazio",e.inputName,t)},removeInputErrors:function(e){e.querySelectorAll(".error").forEach(function(e){return e.classList.remove("error")})},validateDate:function(e,t){this.isValidDate(e.value)||this.createFormError("Data inválida",e.inputName,t)},isValidDate:function(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[1],10),a=parseInt(t[0],10),o=parseInt(t[2],10);if(o<1e3||o>3e3||0==a||a>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(r[1]=29),n>0&&n<=r[a-1]},createFormError:function(e,t,n){var a={inputName:t,message:e};n.push(a)},addInputError:function(e,t){var n=document.querySelector("#"+e),a=n.querySelector(".step-input-error-message");n.classList.add("error"),a.textContent=t},formatDate:function(e,t){var n=e.split(t);return n[1]+"/"+n[0]+"/"+n[2]},activeSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="none"),n.style.display="flex"},disableSpinner:function(e){var t=document.querySelector("#"+e),n=document.querySelector(".steps-spinner");t&&(t.style.display="block"),n.style.display="none"},masks:{date:function(e){return e.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1")}}},g={scheduleForm:document.querySelector("#workshop-new-schedule-form"),searchInputElement:document.querySelector("#search-client-input input"),clientSelectContainer:document.querySelector("#workshop-new-order-select-itens-container"),carSelectContainer:document.querySelector("#workshop-new-order-car-itens-container"),activeClientId:null,activeCarId:null,addNewServiceBtn:document.querySelector("#add-new-service"),servicesContainer:document.querySelector("#workshop-new-order-services-container"),checklistViewBtn:document.querySelector("#checklist-view-btn"),listViewBtn:document.querySelector("#list-view-btn"),checkboxViewContainer:document.querySelector("#workshop-new-schedule-checkboxes"),listViewContainer:document.querySelector("#workshop-new-schedule-list"),pageMessage:document.querySelector("#workshop-new-order-page-message"),activeLabelView:"checklist",calendarBox:$("#calendar-box"),hourSelect:document.querySelector("#hours-select select"),newCarBtn:document.querySelector("#add-new-car")};!function(){document.querySelectorAll("select").forEach(function(e){e.classList.add("placeholder-option"),e.addEventListener("change",function(e){e.target.classList.remove("placeholder-option")})}),g.scheduleForm.addEventListener("submit",a),g.searchInputElement.addEventListener("input",d),g.addNewServiceBtn.addEventListener("click",s),g.checklistViewBtn.addEventListener("click",r),g.listViewBtn.addEventListener("click",i),g.listViewContainer.querySelectorAll(".workshop-new-order-service-list").forEach(function(n){var a=n.querySelector("#add-label-list-btn"),o=n.querySelector("#remove-label-list-btn");a.addEventListener("click",function(){return t(n)}),o.addEventListener("click",function(){return e(n)})}),g.newCarBtn.addEventListener("click",n),document.querySelectorAll("input").forEach(function(e){var t=e.dataset.js;e.dataset.js&&e.addEventListener("input",function(e){e.target.value=v.masks[t](e.target.value)})})}(),function(){function e(e,t,n){var a='<option value="" disabled selected hidden>'+n+"</option>";t.innerHTML=a,e.forEach(function(e){var n=new Option(e,e);t.appendChild(n)})}var t=moment().add(1,"days").toDate(),n=moment().add(1,"year").toDate(),a=g.calendarBox.data("enabled-days"),o=g.calendarBox.data("disabled-dates");a||(a=[]),o||(o=[]),new Pikaday({field:document.getElementById("datepicker-input"),format:"DD-MM-YYYY",container:document.getElementById("calendar-box"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(t){var n=moment(t).format("YYYY-MM-DD");v.makeRequest("/schedulings/available_hours","post",{workshop_id:g.calendarBox.data("workshop-id"),date:n}).then(function(t){t.success&&e(t.data,g.hourSelect,"Escolha um horário")}).catch(function(e){console.log(e)})}}),new Pikaday({field:document.getElementById("datepicker-input-2"),format:"DD-MM-YYYY",container:document.getElementById("datepicker-container-2"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(e){}}),new Pikaday({field:document.getElementById("datepicker-input-3"),format:"DD-MM-YYYY",container:document.getElementById("datepicker-container-3"),minDate:t,maxDate:n,i18n:{previousMonth:"Mês anterior",nextMonth:"Próximo mês",months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],weekdaysShort:["D","S","T","Q","Q","S","S"]},disableDayFn:function(e){var t=moment(e).format("DD-MM-YYYY");return-1===$.inArray(e.getDay(),a)||$.inArray(t,o)>-1},onSelect:function(e){}})}()}}},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={init:function(){function e(e,a){if(r.filtersBtn.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active"),"all"===a)return n(r.schedules);t(a)}function t(e){var t=[];r.schedules.forEach(function(n){n.content_status===e&&t.push(n)}),n(t)}function n(e){if(r.schedulesContainer.innerHTML="",0===e.length)return a();e.forEach(function(e){var t=new Date(e.created),n=t.toLocaleDateString("pt-BR"),a="Indefinida";if(e.return_date){a=new Date(e.delivery_date).toLocaleDateString("pt-BR")}var o="green";"cancelled"===e.content_status&&(o="red"),"started"===e.content_status&&(o="blue");var i='\n                <div class="workshop-new-order-orders-container">\n                    <div class="workshop-new-order-status-container">\n                        <label class="workshop-new-order-status-label">Status</label>\n                        <div class="workshop-new-order-status '+o+'">\n                            <img class="workshop-new-order-status-icon green" src="/img/svg/check.svg">\n                            <img class="workshop-new-order-status-icon blue" src="/img/svg/play.svg">\n                            <img class="workshop-new-order-status-icon red" src="/img/svg/cancel.svg">\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container">\n                        <label class="workshop-new-order-input-label">O.S</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" placeholder="O.S" value="'+e.id+'" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container">\n                        <label class="workshop-new-order-input-label">Data de abertura</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" placeholder="teste" value="'+n+'" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container">\n                        <label class="workshop-new-order-input-label">Data de finalização</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" value="'+a+'" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container client">\n                        <label class="workshop-new-order-input-label">Cliente</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" placeholder="Cliente" value="'+e.user.name+'" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container">\n                        <label class="workshop-new-order-input-label">Placa</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" placeholder="Placa" value="'+e.car.license_plate+'" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-input-container">\n                        <label class="workshop-new-order-input-label">Total</label>\n                        <div class="workshop-new-order-input-icon-container">\n                            <input type="text" class="workshop-new-order-input" placeholder="Indefinido" disabled>\n                        </div>\n                    </div>\n                    <div class="workshop-new-order-actions-container">\n                        <label class="workshop-new-order-actions-label">Ações</label>\n                        <div class="workshop-new-order-actions">\n                            <a class="workshop-new-order-actions-btn" href="/oficina/agendamento/editar/'+e.id+'">\n                                <img src="/img/svg/edit-clients.svg" alt="editar">\n                            </a>\n                        </div>  \n                    </div>\n                </div>\n                ';r.schedulesContainer.innerHTML+=i})}function a(){r.schedulesContainer.innerHTML+='\n            <div class="workshop-new-order-select-item">\n                <p>Nenhuma ordem encontrada</p>\n            </div>\n            '}var o={makeRequest:function(e,t,n){return new Promise(function(a,o){$.ajax({url:e,type:t,dataType:"json",data:n,success:function(e){a(e)},error:function(e){o(e)}})})}},r={schedulesContainer:document.querySelector("#schedules-container"),schedules:[],allFilterBtn:document.querySelector("#filter-all"),startedFilterBtn:document.querySelector("#filter-started"),doneFilterBtn:document.querySelector("#filter-done"),cancelledFilterBtn:document.querySelector("#filter-cancelled"),filtersBtn:document.querySelectorAll(".workshop-new-order-orders-filters-item")};o.makeRequest("/workshops/getServiceOrders","get").then(function(e){r.schedules=e,n(r.schedules)}).catch(function(e){console.log(e)}),function(){r.allFilterBtn.addEventListener("click",function(){return e(r.allFilterBtn,"all")}),r.startedFilterBtn.addEventListener("click",function(){return e(r.startedFilterBtn,"started")}),r.doneFilterBtn.addEventListener("click",function(){return e(r.doneFilterBtn,"done")}),r.cancelledFilterBtn.addEventListener("click",function(){return e(r.cancelledFilterBtn,"cancelled")})}()}}},{}],57:[function(e,t,n){!function(e,t){"object"==typeof n&&n&&"string"!=typeof n.nodeName?t(n):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return f(e)?"array":typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function r(e,t){return v.call(e,t)}function i(e){return!r(g,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return _[e]})}function c(t,n){function o(e){if("string"==typeof e&&(e=e.split(w,2)),!f(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(a(e[0])+"\\s*"),s=new RegExp("\\s*"+a(e[1])),c=new RegExp("\\s*"+a("}"+e[1]))}if(!t)return[];var r,s,c,p=[],h=[],m=[],v=!1,g=!1;o(n||e.tags);for(var _,C,x,$,E,q,L=new u(t);!L.eos();){if(_=L.pos,x=L.scanUntil(r))for(var M=0,D=x.length;M<D;++M)$=x.charAt(M),i($)?m.push(h.length):g=!0,h.push(["text",$,_,_+1]),_+=1,"\n"===$&&function(){if(v&&!g)for(;m.length;)delete h[m.pop()];else m=[];v=!1,g=!1}();if(!L.scan(r))break;if(v=!0,C=L.scan(S)||"name",L.scan(b),"="===C?(x=L.scanUntil(y),L.scan(y),L.scanUntil(s)):"{"===C?(x=L.scanUntil(c),L.scan(k),L.scanUntil(s),C="&"):x=L.scanUntil(s),!L.scan(s))throw new Error("Unclosed tag at "+L.pos);if(E=[C,x,_,L.pos],h.push(E),"#"===C||"^"===C)p.push(E);else if("/"===C){if(!(q=p.pop()))throw new Error('Unopened section "'+x+'" at '+_);if(q[1]!==x)throw new Error('Unclosed section "'+q[1]+'" at '+_)}else"name"===C||"{"===C||"&"===C?g=!0:"="===C&&o(x)}if(q=p.pop())throw new Error('Unclosed section "'+q[1]+'" at '+L.pos);return d(l(h))}function l(e){for(var t,n,a=[],o=0,r=e.length;o<r;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}function d(e){for(var t,n,a=[],o=a,r=[],i=0,s=e.length;i<s;++i)switch(t=e[i],t[0]){case"#":case"^":o.push(t),r.push(t),o=t[4]=[];break;case"/":n=r.pop(),n[5]=t[2],o=r.length>0?r[r.length-1][4]:a;break;default:o.push(t)}return a}function u(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var m=Object.prototype.toString,f=Array.isArray||function(e){return"[object Array]"===m.call(e)},v=RegExp.prototype.test,g=/\S/,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,w=/\s+/,y=/\s*=/,k=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},u.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n,a=this.cache;if(a.hasOwnProperty(e))n=a[e];else{for(var r,i,s=this,c=!1;s;){if(e.indexOf(".")>0)for(n=s.view,r=e.split("."),i=0;null!=n&&i<r.length;)i===r.length-1&&(c=o(n,r[i])),n=n[r[i++]];else n=s.view[e],c=o(s.view,e);if(c)break;s=s.parent}a[e]=n}return t(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var n=this.cache,a=n[e];return null==a&&(a=n[e]=c(e,t)),a},h.prototype.render=function(e,t,n){var a=this.parse(e),o=t instanceof p?t:new p(t);return this.renderTokens(a,o,n,e)},h.prototype.renderTokens=function(e,t,n,a){for(var o,r,i,s="",c=0,l=e.length;c<l;++c)i=void 0,o=e[c],r=o[0],"#"===r?i=this.renderSection(o,t,n,a):"^"===r?i=this.renderInverted(o,t,n,a):">"===r?i=this.renderPartial(o,t,n,a):"&"===r?i=this.unescapedValue(o,t):"name"===r?i=this.escapedValue(o,t):"text"===r&&(i=this.rawValue(o)),void 0!==i&&(s+=i);return s},h.prototype.renderSection=function(e,n,a,o){function r(e){return i.render(e,n,a)}var i=this,s="",c=n.lookup(e[1]);if(c){if(f(c))for(var l=0,d=c.length;l<d;++l)s+=this.renderTokens(e[4],n.push(c[l]),a,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],n.push(c),a,o);else if(t(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,o.slice(e[3],e[5]),r),null!=c&&(s+=c)}else s+=this.renderTokens(e[4],n,a,o);return s}},h.prototype.renderInverted=function(e,t,n,a){var o=t.lookup(e[1]);if(!o||f(o)&&0===o.length)return this.renderTokens(e[4],t,n,a)},h.prototype.renderPartial=function(e,n,a){if(a){var o=t(a)?a(e[1]):a[e[1]];return null!=o?this.renderTokens(this.parse(o),n,a,o):void 0}},h.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},h.prototype.escapedValue=function(t,n){var a=n.lookup(t[1]);if(null!=a)return e.escape(a)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var C=new h;return e.clearCache=function(){return C.clearCache()},e.parse=function(e,t){return C.parse(e,t)},e.render=function(e,t,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(e,t,a)},e.to_html=function(n,a,o,r){var i=e.render(n,a,o);if(!t(r))return i;r(i)},e.escape=s,e.Scanner=u,e.Context=p,e.Writer=h,e})},{}]},{},[7]);